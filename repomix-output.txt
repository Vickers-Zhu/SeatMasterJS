This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix. The content has been processed where comments have been removed, line numbers have been added.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: src/**/*, *.*
- Files matching these patterns are excluded: **/*.log, node_modules/**/*
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Code comments have been removed from supported file types
- Line numbers have been added to the beginning of each line

Additional Info:
----------------

================================================================
Directory Structure
================================================================
src/
  components/
    CustomText/
      CustomText.js
    ErrorBoundary/
      ErrorBoundary.js
    FadeInView/
      FadeInView.js
    Favourite/
      Favourite.js
    GlobalWrapper/
      GlobalWrapper.js
    LanguageSelector/
      LanguageSelector.js
    SafeArea/
      SafeArea.js
    Separator/
      Separator.js
      Separator.styles.js
    Spacer/
      Spacer.js
    Switch/
      Switch.js
      Switch.styles.js
      SwitchAlternate.styles.js
    TimeScroll/
      TimeScroll.js
    WebApp/
      styles.js
      useStaticServer.js
      WebApp.js
  data/
    mockData.js
  features/
    auth/
      components/
        CountryListItem.js
        CountryListItem.styles.js
        LoginDropDownPicker.js
        LoginDropDownPicker.styles.js
      screens/
        LoginScreen.js
        LoginScreen.styles.js
    customer/
      reservations/
        components/
          PastReservationCard.js
          PastReservationCard.styles.js
          ReservationCard.js
          ReservationCard.styles.js
        screens/
          ReservationsScreen.js
      restaurants/
        components/
          Others.js
          RestaurantInfoCard.js
          RestaurantInfoCard.styles.js
          RestaurantList.styles.js
          RestaurantMenu.js
          RestaurantTabBar.js
          Reviews.js
          Search.js
          TabNavigation.js
        hooks/
          useReservationHandler.js
          useScrollHandler.js
        screens/
          RestaurantDetailScreen.js
          RestaurantsScreen.js
      settings/
        screens/
          AccountSettingsScreen.js
          AccountSettingsScreen.styles.js
          SettingsScreen.js
    merchant/
      dashboard/
        components/
          CounterSeats.js
          SeatView.js
          SharedTableStyles.styles.js
          TableMatrix.js
        screens/
          MerchantHomeScreen.js
      reservations/
        components/
          ReservationComponents.js
          ReservationComponents.styles.js
          ReservationsGrid.js
          ReservationsMailbox.js
        screens/
          MerchantReservationsScreen.js
        utils/
          timeUtils.js
      settings/
        screens/
          MerchantSettingsScreen.js
  infrastructure/
    navigation/
      AppNavigator.js
      AuthNavigator.js
      CheckoutNavigator.js
      index.js
      MerchantNavigator.js
      ReservationsNavigator.js
      RestaurantsNavigator.js
      SettingsNavigator.js
    options/
      GlobalScreenOptions.js
    theme/
      colors.js
      fonts.js
      index.js
      sizes.js
      spacing.js
  services/
    i18n/
      locales/
        en/
          en.js
        ja/
          ja.js
        zh/
          zh.js
      index.js
    AuthenticationContext.js
    LanguageContext.js
.cursorignore
.gitignore
App.js
app.json
babel.config.js
eas.json
metro.config.js
package.json
repomix.config.json
tsconfig.json

================================================================
Files
================================================================

================
File: src/components/CustomText/CustomText.js
================
 1: import { Text } from "react-native";
 2: import styled from "styled-components";
 3: 
 4: const defaultTextStyles = (theme) => `
 5:   font-family: ${theme.fonts.body};
 6:   font-weight: ${theme.fontWeights.regular};
 7:   color: ${theme.colors.text.primary};
 8:   flex-wrap: wrap;
 9:   margin-top: 0px;
10:   margin-bottom: 0px;
11: `;
12: const title = (theme) => `
13:   font-size: ${theme.fontSizes.title};
14:   font-weight: ${theme.fontWeights.medium};
15: `;
16: const h5 = (theme) => `
17:   font-size: ${theme.fontSizes.h5};
18: `;
19: const h4 = (theme) => `
20:   font-size: ${theme.fontSizes.h4};
21: `;
22: const h3 = (theme) => `
23:   font-size: ${theme.fontSizes.h3};
24: `;
25: const h2 = (theme) => `
26:   font-size: ${theme.fontSizes.h2};
27: `;
28: const h1 = (theme) => `
29:   font-size: ${theme.fontSizes.h1};
30: `;
31: 
32: const body = (theme) => `
33:   font-size: ${theme.fontSizes.body};
34: `;
35: 
36: const hint = (theme) => `
37:   font-size: ${theme.fontSizes.body};
38: `;
39: 
40: const error = (theme) => `
41:   color: ${theme.colors.text.error};
42: `;
43: 
44: const caption = (theme) => `
45:   font-size: ${theme.fontSizes.caption};
46:   font-weight: ${theme.fontWeights.bold};
47: `;
48: 
49: const label = (theme) => `
50:   font-family: ${theme.fonts.heading};
51:   font-size: ${theme.fontSizes.body};
52:   font-weight: ${theme.fontWeights.medium};
53: `;
54: 
55: const variants = {
56:   body,
57:   hint,
58:   error,
59:   label,
60:   caption,
61:   title,
62:   h5,
63:   h4,
64:   h3,
65:   h2,
66:   h1,
67: };
68: 
69: export const CustomText = styled(Text)`
70:   ${({ theme }) => defaultTextStyles(theme)};
71:   ${({ variant, theme }) => variants[variant](theme)};
72: `;
73: 
74: CustomText.defaultProps = {
75:   variant: "body",
76: };

================
File: src/components/ErrorBoundary/ErrorBoundary.js
================
  1: import React from "react";
  2: import { TouchableOpacity } from "react-native";
  3: import styled from "styled-components/native";
  4: 
  5: 
  6: 
  7: 
  8: 
  9: 
 10: class ErrorBoundary extends React.Component {
 11:   constructor(props) {
 12:     super(props);
 13:     this.state = { hasError: false, error: null, errorInfo: null };
 14:   }
 15: 
 16: 
 17: 
 18: 
 19: 
 20:   static getDerivedStateFromError(error) {
 21:     return { hasError: true, error };
 22:   }
 23: 
 24: 
 25: 
 26: 
 27: 
 28: 
 29:   componentDidCatch(error, errorInfo) {
 30:     this.setState({ errorInfo });
 31: 
 32:     console.error("ErrorBoundary caught an error:", error, errorInfo);
 33: 
 34:   }
 35: 
 36: 
 37: 
 38: 
 39:   resetError = () => {
 40:     this.setState({ hasError: false, error: null, errorInfo: null });
 41:   };
 42: 
 43:   render() {
 44:     if (this.state.hasError) {
 45: 
 46:       return (
 47:         <ErrorContainer>
 48:           <ErrorTitle>Something went wrong.</ErrorTitle>
 49:           <ErrorMessage>
 50:             We're sorry for the inconvenience. Please try again later.
 51:           </ErrorMessage>
 52:           {}
 53:           <RetryButton onPress={this.resetError}>
 54:             <RetryButtonText>Try Again</RetryButtonText>
 55:           </RetryButton>
 56:           {}
 57:           {__DEV__ && this.state.errorInfo && (
 58:             <ErrorDetails>
 59:               <ErrorDetailsTitle>Error Details:</ErrorDetailsTitle>
 60:               <ErrorDetailsText>{this.state.error.toString()}</ErrorDetailsText>
 61:               <ErrorDetailsText>
 62:                 {this.state.errorInfo.componentStack}
 63:               </ErrorDetailsText>
 64:             </ErrorDetails>
 65:           )}
 66:         </ErrorContainer>
 67:       );
 68:     }
 69: 
 70: 
 71:     return this.props.children;
 72:   }
 73: }
 74: 
 75: 
 76: const ErrorContainer = styled.View`
 77:   flex: 1;
 78:   justify-content: center;
 79:   align-items: center;
 80:   padding: ${({ theme }) => theme.space[3]};
 81:   background-color: ${({ theme }) => theme.colors.bg.secondary};
 82: `;
 83: 
 84: const ErrorTitle = styled.Text`
 85:   font-size: ${({ theme }) => theme.fontSizes.title};
 86:   font-weight: ${({ theme }) => theme.fontWeights.bold};
 87:   color: ${({ theme }) => theme.colors.text.error};
 88:   margin-bottom: ${({ theme }) => theme.space[2]};
 89: `;
 90: 
 91: const ErrorMessage = styled.Text`
 92:   font-size: ${({ theme }) => theme.fontSizes.body};
 93:   color: ${({ theme }) => theme.colors.text.primary};
 94:   text-align: center;
 95:   margin-bottom: ${({ theme }) => theme.space[3]};
 96: `;
 97: 
 98: const RetryButton = styled(TouchableOpacity)`
 99:   padding-vertical: ${({ theme }) => theme.space[2]};
100:   padding-horizontal: ${({ theme }) => theme.space[3]};
101:   background-color: ${({ theme }) => theme.colors.ui.primary};
102:   border-radius: 5px;
103: `;
104: 
105: const RetryButtonText = styled.Text`
106:   font-size: ${({ theme }) => theme.fontSizes.button};
107:   color: ${({ theme }) => theme.colors.text.inverse};
108:   font-weight: ${({ theme }) => theme.fontWeights.bold};
109: `;
110: 
111: const ErrorDetails = styled.View`
112:   margin-top: ${({ theme }) => theme.space[3]};
113:   padding: ${({ theme }) => theme.space[2]};
114:   background-color: #f8d7da;
115:   border-radius: 5px;
116: `;
117: 
118: const ErrorDetailsTitle = styled.Text`
119:   font-size: ${({ theme }) => theme.fontSizes.body};
120:   font-weight: ${({ theme }) => theme.fontWeights.bold};
121:   color: ${({ theme }) => theme.colors.text.error};
122:   margin-bottom: ${({ theme }) => theme.space[1]};
123: `;
124: 
125: const ErrorDetailsText = styled.Text`
126:   font-size: ${({ theme }) => theme.fontSizes.caption};
127:   color: ${({ theme }) => theme.colors.text.error};
128: `;
129: 
130: export default ErrorBoundary;

================
File: src/components/FadeInView/FadeInView.js
================
 1: import React, { useRef, useEffect } from 'react';
 2: import { Animated } from 'react-native';
 3: 
 4: export const FadeInView = ({ duration = 1500, ...props }) => {
 5:   const fadeAnim = useRef(new Animated.Value(0)).current;
 6: 
 7:   useEffect(() => {
 8:     Animated.timing(fadeAnim, {
 9:       toValue: 1,
10:       duration: duration,
11:       useNativeDriver: true,
12:     }).start();
13:   }, [fadeAnim, duration]);
14: 
15:   return (
16:     <Animated.View
17:       style={{
18:         ...props.style,
19:         opacity: fadeAnim,
20:       }}
21:     >
22:       {props.children}
23:     </Animated.View>
24:   );
25: };

================
File: src/components/Favourite/Favourite.js
================
 1: import React, { useContext } from 'react';
 2: import { TouchableOpacity } from 'react-native';
 3: import styled from 'styled-components/native';
 4: 
 5: import { AntDesign } from '@expo/vector-icons';
 6: 
 7: 
 8: const FavouriteButton = styled(TouchableOpacity)`
 9:   position: absolute;
10:   top: 25px;
11:   right: 25px;
12:   z-index: 9;
13: `;
14: 
15: export const Favourite = ({ restaurant }) => {
16: 
17:   return (
18:     <FavouriteButton
19:     >
20:       <AntDesign
21:         name={false ? 'heart' : 'hearto'}
22:         size={24}
23:         color={false ? 'red' : 'white'}
24:       />
25:     </FavouriteButton>
26:   );
27: };

================
File: src/components/GlobalWrapper/GlobalWrapper.js
================
 1: import React from 'react';
 2: import { StatusBar as RNStatusBar, View } from 'react-native';
 3: import { SafeAreaProvider, useSafeAreaInsets } from 'react-native-safe-area-context';
 4: import styled from 'styled-components/native';
 5: 
 6: const StatusBarBackground = styled(View)`
 7:   background-color: ${(props) => props.backgroundColor || 'transparent'};
 8: `;
 9: 
10: const CustomStatusBar = ({ backgroundColor }) => {
11:   const insets = useSafeAreaInsets();
12:   return (
13:     <StatusBarBackground style={{ height: insets.top }} backgroundColor={backgroundColor} />
14:   );
15: };
16: 
17: export const GlobalWrapper = ({ children }) => (
18:   <SafeAreaProvider>
19:     <RNStatusBar barStyle="dark-content" />
20:     <CustomStatusBar backgroundColor="white" />
21:     {children}
22:   </SafeAreaProvider>
23: );

================
File: src/components/LanguageSelector/LanguageSelector.js
================
 1: import React, { useState } from "react";
 2: import { TouchableOpacity, View } from "react-native";
 3: import { MaterialIcons } from "@expo/vector-icons";
 4: import styled from "styled-components/native";
 5: import { useTranslation } from "react-i18next";
 6: 
 7: import { CustomText } from "../CustomText/CustomText";
 8: 
 9: const languages = [
10:   { code: "en", label: "English" },
11:   { code: "ja", label: "日本語" },
12:   { code: "zh", label: "中文" },
13: ];
14: 
15: const LanguageButton = styled(TouchableOpacity)`
16:   flex-direction: row;
17:   align-items: center;
18:   background-color: ${(props) => props.theme.colors.bg.secondary};
19:   padding: ${(props) => props.theme.space[2]} ${(props) => props.theme.space[3]};
20:   border-radius: 15px;
21: `;
22: 
23: const LanguageText = styled(CustomText)`
24:   margin-right: ${(props) => props.theme.space[2]};
25:   font-size: ${(props) => props.theme.fontSizes.body};
26: `;
27: 
28: const DropdownContainer = styled.View`
29:   position: absolute;
30:   top: 100%;
31:   left: 0;
32:   margin-top: 5px;
33:   background-color: ${(props) => props.theme.colors.bg.primary};
34:   border-radius: 8px;
35:   padding: ${(props) => props.theme.space[2]};
36:   min-width: 160px;
37:   shadow-opacity: 0.2;
38:   shadow-radius: 3px;
39:   shadow-color: #000;
40:   shadow-offset: 0px 2px;
41:   elevation: 5;
42:   z-index: 1000;
43: `;
44: 
45: const LanguageOption = styled(TouchableOpacity)`
46:   padding: ${(props) => props.theme.space[2]} ${(props) => props.theme.space[3]};
47:   border-bottom-width: ${(props) => (props.isLast ? "0" : "0.5px")};
48:   border-bottom-color: ${(props) => props.theme.colors.ui.tertiary};
49: `;
50: 
51: const LanguageSelector = ({
52:   currentLanguage = "en",
53:   onChangeLanguage,
54:   style,
55: }) => {
56:   const [isOpen, setIsOpen] = useState(false);
57:   const { t } = useTranslation("common");
58: 
59:   const toggleDropdown = () => {
60:     setIsOpen(!isOpen);
61:   };
62: 
63:   const handleSelectLanguage = (languageCode) => {
64:     if (onChangeLanguage) {
65:       onChangeLanguage(languageCode);
66:     }
67:     setIsOpen(false);
68:   };
69: 
70:   return (
71:     <View style={[{ position: "relative" }, style]}>
72:       <LanguageButton onPress={toggleDropdown}>
73:         <LanguageText>{t("languages." + currentLanguage)}</LanguageText>
74:         <MaterialIcons
75:           name={isOpen ? "keyboard-arrow-up" : "keyboard-arrow-down"}
76:           size={22}
77:           color="#262626"
78:         />
79:       </LanguageButton>
80: 
81:       {isOpen && (
82:         <DropdownContainer>
83:           {languages.map((language, index) => (
84:             <LanguageOption
85:               key={language.code}
86:               isLast={index === languages.length - 1}
87:               onPress={() => handleSelectLanguage(language.code)}
88:             >
89:               <LanguageText>{t("languages." + language.code)}</LanguageText>
90:             </LanguageOption>
91:           ))}
92:         </DropdownContainer>
93:       )}
94:     </View>
95:   );
96: };
97: 
98: export default LanguageSelector;

================
File: src/components/SafeArea/SafeArea.js
================
1: import { StatusBar, SafeAreaView } from 'react-native';
2: import styled from 'styled-components';
3: 
4: export const SafeArea = styled(SafeAreaView)`
5:   flex: 1;
6:   ${StatusBar.currentHeight && `margin-top: ${StatusBar.currentHeight}px`};
7:   background-color: ${(props) => props.theme.colors.bg.primary};
8: `;

================
File: src/components/Separator/Separator.js
================
 1: import React from "react";
 2: import PropTypes from "prop-types";
 3: import { SeparatorFull, SeparatorPartial } from "./Separator.styles";
 4: 
 5: export const Separator = ({ type }) => {
 6:   return type === "full" ? <SeparatorFull /> : <SeparatorPartial />;
 7: };
 8: 
 9: Separator.propTypes = {
10:   type: PropTypes.oneOf(["full", "partial"]),
11: };

================
File: src/components/Separator/Separator.styles.js
================
 1: import styled from "styled-components/native";
 2: 
 3: export const SeparatorFull = styled.View`
 4:   height: 1px;
 5:   background-color: rgba(0, 0, 0, 0.1);
 6:   width: 100%;
 7:   margin-vertical: ${(props) => props.theme.space[3]};
 8: `;
 9: 
10: export const SeparatorPartial = styled.View`
11:   height: 1px;
12:   background-color: rgba(0, 0, 0, 0.1);
13:   width: 80%;
14:   margin-vertical: ${(props) => props.theme.space[2]};
15:   margin-left: 66px;
16: `;

================
File: src/components/Spacer/Spacer.js
================
 1: import React from 'react';
 2: import { View } from 'react-native';
 3: import styled, { useTheme } from 'styled-components/native';
 4: 
 5: const sizeVariant = {
 6:   small: 1,
 7:   medium: 2,
 8:   large: 3,
 9:   xl: 4,
10:   xxl: 5,
11: };
12: 
13: const positionVariant = {
14:   top: 'marginTop',
15:   left: 'marginLeft',
16:   right: 'marginRight',
17:   bottom: 'marginBottom',
18: };
19: 
20: const getVariant = (position, size, theme) => {
21:   const sizeIndex = sizeVariant[size];
22:   const property = positionVariant[position];
23:   const value = theme.space[sizeIndex];
24: 
25:   return `${property}:${value}`;
26: };
27: 
28: const SpacerView = styled(View)`
29:   ${({ variant }) => variant};
30: `;
31: 
32: export const Spacer = ({ position = 'top', size = 'small', children }) => {
33:   const theme = useTheme();
34:   const variant = getVariant(position, size, theme);
35: 
36:   return <SpacerView variant={variant}>{children}</SpacerView>;
37: };

================
File: src/components/Switch/Switch.js
================
 1: import React, { useRef, useEffect } from "react";
 2: import { Animated, TouchableWithoutFeedback } from "react-native";
 3: 
 4: import * as DefaultStyles from "./Switch.styles";
 5: import * as AltStyles from "./SwitchAlternate.styles";
 6: 
 7: const SwitchContainer = ({
 8:   isOn,
 9:   setIsOn,
10:   leftLabel,
11:   rightLabel,
12:   variant = "default",
13: }) => {
14: 
15:   const Styles = variant === "alternate" ? AltStyles : DefaultStyles;
16: 
17: 
18:   const capsulePosition = useRef(new Animated.Value(isOn ? 96 : 0)).current;
19: 
20:   useEffect(() => {
21:     Animated.timing(capsulePosition, {
22:       toValue: isOn ? 96 : 0,
23:       duration: 200,
24:       useNativeDriver: false,
25:     }).start();
26:   }, [isOn]);
27: 
28:   return (
29:     <Styles.Container>
30:       <Styles.SwitchBackground>
31:         <Styles.Capsule style={{ left: capsulePosition }} />
32:         <TouchableWithoutFeedback onPress={() => setIsOn(false)}>
33:           <Styles.TextWrapper>
34:             {}
35:             <Styles.Label active={!isOn}>{leftLabel}</Styles.Label>
36:           </Styles.TextWrapper>
37:         </TouchableWithoutFeedback>
38:         <TouchableWithoutFeedback onPress={() => setIsOn(true)}>
39:           <Styles.TextWrapper>
40:             {}
41:             <Styles.Label active={isOn}>{rightLabel}</Styles.Label>
42:           </Styles.TextWrapper>
43:         </TouchableWithoutFeedback>
44:       </Styles.SwitchBackground>
45:     </Styles.Container>
46:   );
47: };
48: 
49: export default SwitchContainer;

================
File: src/components/Switch/Switch.styles.js
================
 1: import styled from "styled-components/native";
 2: import { Animated, Text } from "react-native";
 3: 
 4: export const Container = styled.View`
 5:   flex-direction: row;
 6:   justify-content: center;
 7:   align-items: center;
 8:   margin: 10px;
 9: `;
10: 
11: export const SwitchBackground = styled.View`
12:   flex-direction: row;
13:   justify-content: space-around;
14:   align-items: center;
15:   background-color: ${(props) => props.theme.colors.ui.disabled};
16:   border-radius: 25px;
17:   width: 200px;
18:   height: 50px;
19:   padding: 3px;
20: `;
21: 
22: export const Capsule = styled(Animated.View)`
23:   position: absolute;
24:   width: 50%;
25:   height: 100%;
26:   background-color: ${(props) => props.theme.colors.bg.primary};
27:   border-radius: 25px;
28:   margin: 3px;
29: `;
30: 
31: export const TextWrapper = styled.View`
32:   flex: 1;
33:   align-items: center;
34:   justify-content: center;
35: `;
36: 
37: export const Label = styled(Text)`
38:   font-size: ${(props) => props.theme.fontSizes.button};
39:   color: ${(props) => props.theme.colors.text.primary};
40: `;

================
File: src/components/Switch/SwitchAlternate.styles.js
================
 1: import styled from "styled-components/native";
 2: import { Animated, Text } from "react-native";
 3: 
 4: export const Container = styled.View`
 5:   flex-direction: row;
 6:   justify-content: center;
 7:   align-items: center;
 8:   margin: ${(props) => props.theme.space[2]};
 9: `;
10: 
11: export const SwitchBackground = styled.View`
12:   flex-direction: row;
13:   justify-content: space-around;
14:   align-items: center;
15:   background-color: ${(props) =>
16:     props.theme.colors.ui.disabled};
17:   border-radius: 25px;
18:   width: 200px;
19:   height: 50px;
20:   padding: ${(props) => props.theme.space[1]};
21: `;
22: 
23: export const Capsule = styled(Animated.View)`
24:   position: absolute;
25:   width: 50%;
26:   height: 100%;
27:   background-color: ${(props) =>
28:     props.theme.colors.ui.primary};
29:   border-radius: 25px;
30:   margin: ${(props) => props.theme.space[1]};
31: `;
32: 
33: export const TextWrapper = styled.View`
34:   flex: 1;
35:   align-items: center;
36:   justify-content: center;
37: `;
38: 
39: export const Label = styled(Text)`
40:   font-size: ${(props) => props.theme.fontSizes.button};
41:   font-family: ${(props) => props.theme.fonts.body};
42:   color: ${(props) =>
43:     props.active
44:       ? props.theme.colors.text.inverse
45:       : props.theme.colors.text.primary};
46: `;

================
File: src/components/TimeScroll/TimeScroll.js
================
  1: import React, { useRef } from "react";
  2: import styled from "styled-components/native";
  3: import { Animated } from "react-native";
  4: import { LinearGradient } from "expo-linear-gradient";
  5: 
  6: const ITEM_HEIGHT = 50;
  7: const VISIBLE_ITEMS = 5;
  8: const CONTAINER_HEIGHT = ITEM_HEIGHT * VISIBLE_ITEMS;
  9: const CONTAINER_WIDTH = 60;
 10: const PADDING_VERTICAL = (CONTAINER_HEIGHT - ITEM_HEIGHT) / 2;
 11: 
 12: const Container = styled.View`
 13:   height: ${CONTAINER_HEIGHT}px;
 14:   width: ${CONTAINER_WIDTH}px;
 15:   background-color: ${(props) => props.theme.colors.bg.secondary};
 16:   overflow: hidden;
 17:   border-radius: 30px;
 18:   position: relative;
 19: `;
 20: 
 21: const StyledAnimatedItem = styled(Animated.View)`
 22:   height: ${ITEM_HEIGHT}px;
 23:   justify-content: center;
 24:   align-items: center;
 25: `;
 26: 
 27: const TimeText = styled.Text`
 28:   color: ${(props) => props.theme.colors.text.primary};
 29:   font-size: 18px;
 30:   font-family: ${(props) => props.theme.fonts.body};
 31: `;
 32: 
 33: export const TimeScroll = ({
 34:   times,
 35:   selectedTime,
 36:   onTimeChange,
 37:   containerHeight = CONTAINER_HEIGHT,
 38:   containerWidth = CONTAINER_WIDTH,
 39:   itemHeight = ITEM_HEIGHT,
 40:   visibleItems = VISIBLE_ITEMS,
 41: }) => {
 42:   const scrollY = useRef(new Animated.Value(0)).current;
 43:   const paddingVertical = (containerHeight - itemHeight) / 2;
 44: 
 45:   const handleMomentumScrollEnd = (event) => {
 46:     const offsetY = event.nativeEvent.contentOffset.y;
 47:     const index = Math.round(offsetY / itemHeight);
 48:     if (index >= 0 && index < times.length) {
 49:       onTimeChange(times[index]);
 50:     }
 51:   };
 52: 
 53:   return (
 54:     <Container style={{ height: containerHeight, width: containerWidth }}>
 55:       <Animated.ScrollView
 56:         contentContainerStyle={{ paddingVertical: paddingVertical }}
 57:         showsVerticalScrollIndicator={false}
 58:         snapToInterval={itemHeight}
 59:         decelerationRate="fast"
 60:         bounces={false}
 61:         onMomentumScrollEnd={handleMomentumScrollEnd}
 62:         onScroll={Animated.event(
 63:           [{ nativeEvent: { contentOffset: { y: scrollY } } }],
 64:           { useNativeDriver: true }
 65:         )}
 66:         scrollEventThrottle={16}
 67:       >
 68:         {times.map((time, index) => {
 69:           const inputRange = [
 70:             (index - 1) * itemHeight,
 71:             index * itemHeight,
 72:             (index + 1) * itemHeight,
 73:           ];
 74: 
 75:           const scale = scrollY.interpolate({
 76:             inputRange,
 77:             outputRange: [0.7, 1, 0.7],
 78:             extrapolate: "clamp",
 79:           });
 80: 
 81:           const opacity = scrollY.interpolate({
 82:             inputRange,
 83:             outputRange: [0.3, 1, 0.3],
 84:             extrapolate: "clamp",
 85:           });
 86: 
 87:           const rotateX = scrollY.interpolate({
 88:             inputRange,
 89:             outputRange: ["30deg", "0deg", "-30deg"],
 90:             extrapolate: "clamp",
 91:           });
 92: 
 93:           return (
 94:             <StyledAnimatedItem
 95:               key={index}
 96:               style={{
 97:                 height: itemHeight,
 98:                 transform: [{ perspective: 1000 }, { rotateX }, { scale }],
 99:                 opacity,
100:               }}
101:             >
102:               <TimeText>{time}</TimeText>
103:             </StyledAnimatedItem>
104:           );
105:         })}
106:       </Animated.ScrollView>
107:       {}
108:       <LinearGradient
109:         colors={["rgba(241,241,241,1)", "rgba(241,241,241,0)"]}
110:         style={{
111:           position: "absolute",
112:           top: 0,
113:           left: 0,
114:           right: 0,
115:           height: 20,
116:         }}
117:         pointerEvents="none"
118:       />
119:       {}
120:       <LinearGradient
121:         colors={["rgba(241,241,241,0)", "rgba(241,241,241,1)"]}
122:         style={{
123:           position: "absolute",
124:           bottom: 0,
125:           left: 0,
126:           right: 0,
127:           height: 20,
128:         }}
129:         pointerEvents="none"
130:       />
131:     </Container>
132:   );
133: };
134: 
135: export default TimeScroll;

================
File: src/components/WebApp/styles.js
================
 1: import styled from "styled-components/native";
 2: import { WebView } from "react-native-webview";
 3: import { TouchableOpacity, Text, View } from "react-native";
 4: 
 5: 
 6: export const Container = styled.View`
 7:   width: 100%;
 8:   height: ${({ height }) => height}px;
 9:   background-color: ${({ theme }) => theme.colors.bg.primary};
10: `;
11: 
12: // Styled WebView
13: export const StyledWebView = styled(WebView)`
14:   flex: 1;
15:   width: 100%;
16: `;
17: 
18: // Footer container
19: export const Footer = styled.View`
20:   padding: ${({ theme }) => theme.space[3]};
21:   background-color: ${({ theme }) => theme.colors.ui.tertiary};
22:   flex-direction: row;
23:   justify-content: space-between;
24:   align-items: center;
25: `;
26: 
27: // Text displaying selected chairs
28: export const SelectedText = styled(Text)`
29:   flex: 1;
30:   margin-right: ${({ theme }) => theme.space[2]};
31:   color: ${({ theme }) => theme.colors.text.primary};
32:   font-size: ${({ theme }) => theme.fontSizes.body};
33:   font-family: ${({ theme }) => theme.fonts.body};
34: `;
35: 
36: // Cancel button
37: export const CancelButton = styled(TouchableOpacity)`
38:   padding: ${({ theme }) => theme.space[2]};
39:   background-color: ${({ theme }) => theme.colors.ui.error};
40:   border-radius: 4px;
41: `;
42: 
43: // Text inside the Cancel button
44: export const CancelButtonText = styled(Text)`
45:   color: ${({ theme }) => theme.colors.text.inverse};
46:   font-size: ${({ theme }) => theme.fontSizes.button};
47:   font-family: ${({ theme }) => theme.fonts.body};
48:   text-align: center;
49: `;

================
File: src/components/WebApp/useStaticServer.js
================
 1: import { useEffect, useState } from "react";
 2: import StaticServer from "react-native-static-server";
 3: import RNFS from "react-native-fs";
 4: 
 5: const useStaticServer = () => {
 6:   const [url, setUrl] = useState("");
 7: 
 8:   useEffect(() => {
 9:     let server = null;
10: 
11:     const startServer = async () => {
12:       const path = `${RNFS.MainBundlePath}/3d_build`; // Ensure this path exists and contains your web app
13:       console.log(`Inner webapp path verified: ${path}`);
14:       server = new StaticServer(0, path, { localOnly: true });
15:       try {
16:         const serverUrl = await server.start();
17:         setUrl(serverUrl);
18:         console.log(`Server hosting at: ${serverUrl}`);
19:       } catch (error) {
20:         console.error("Failed to start server:", error);
21:       }
22:     };
23: 
24:     startServer();
25: 
26: 
27:     return () => {
28:       if (server) {
29:         server.stop();
30:       }
31:     };
32:   }, []);
33: 
34:   return url;
35: };
36: 
37: export default useStaticServer;

================
File: src/components/WebApp/WebApp.js
================
  1: import React, { useEffect, useRef, useState, useCallback } from "react";
  2: import { View, ActivityIndicator } from "react-native";
  3: import { WebView } from "react-native-webview";
  4: import styled from "styled-components/native";
  5: import useStaticServer from "./useStaticServer";
  6: 
  7: import {
  8:   Container,
  9:   StyledWebView,
 10:   Footer,
 11:   SelectedText,
 12:   CancelButton,
 13:   CancelButtonText,
 14: } from "./styles";
 15: 
 16: const WebApp = ({ onInteractionStart, onInteractionEnd }) => {
 17:   const serverUrl = useStaticServer();
 18:   const webViewRef = useRef(null);
 19:   const [webViewHeight, setWebViewHeight] = useState(200);
 20:   const [selectedChairs, setSelectedChairs] = useState([]);
 21:   const [occupiedChairs, setOccupiedChairs] = useState(["CHAIR2", "CHAIR4"]);
 22:   const [isServerReady, setIsServerReady] = useState(false);
 23: 
 24: 
 25:   useEffect(() => {
 26:     if (serverUrl) {
 27:       setIsServerReady(true);
 28:     }
 29:   }, [serverUrl]);
 30: 
 31:   const sendChairsToWebView = useCallback(() => {
 32:     if (webViewRef.current) {
 33:       const script = `
 34:         (function() {
 35:           if (window.updateChairs) {
 36:             window.updateChairs({
 37:               selectedChairs: ${JSON.stringify(selectedChairs)},
 38:               occupiedChairs: ${JSON.stringify(occupiedChairs)}
 39:             });
 40:           }
 41:         })();
 42:         true;
 43:       `;
 44:       webViewRef.current.injectJavaScript(script);
 45:     }
 46:   }, [selectedChairs, occupiedChairs]);
 47: 
 48:   useEffect(() => {
 49:     sendChairsToWebView();
 50:   }, [selectedChairs, occupiedChairs, sendChairsToWebView]);
 51: 
 52:   const handleWebViewMessage = useCallback(
 53:     (event) => {
 54:       try {
 55:         const messageData = JSON.parse(event.nativeEvent.data);
 56: 
 57:         switch (messageData.type) {
 58:           case "chairClicked":
 59:             if (occupiedChairs.includes(messageData.name)) {
 60:               return;
 61:             }
 62:             setSelectedChairs((prevSelected) => {
 63:               if (prevSelected.includes(messageData.name)) {
 64:                 return prevSelected.filter((name) => name !== messageData.name);
 65:               } else {
 66:                 return [...prevSelected, messageData.name];
 67:               }
 68:             });
 69:             break;
 70: 
 71:           case "contentHeight":
 72:             const height = Number(messageData.height);
 73:             if (height > 0 && height !== webViewHeight) {
 74:               setWebViewHeight(height);
 75:             }
 76:             break;
 77: 
 78:           case "interactionStart":
 79:             if (onInteractionStart) {
 80:               onInteractionStart();
 81:             }
 82:             break;
 83: 
 84:           case "interactionEnd":
 85:             if (onInteractionEnd) {
 86:               onInteractionEnd();
 87:             }
 88:             break;
 89: 
 90:           default:
 91:             console.warn("Unhandled message type:", messageData.type);
 92:         }
 93:       } catch (error) {
 94:         console.error("Failed to parse message from WebView:", error);
 95:       }
 96:     },
 97:     [occupiedChairs, webViewHeight, onInteractionStart, onInteractionEnd]
 98:   );
 99: 
100:   const cancelSelection = () => {
101:     setSelectedChairs([]);
102:   };
103: 
104:   return (
105:     <View style={{ flex: 1 }}>
106:       {isServerReady ? (
107:         <Container height={webViewHeight}>
108:           <StyledWebView
109:             ref={webViewRef}
110:             source={{ uri: serverUrl }}
111:             scrollEnabled={false}
112:             cacheEnabled={false}
113:             cacheMode="LOAD_NO_CACHE"
114:             originWhitelist={["*"]}
115:             onError={(syntheticEvent) => {
116:               const { nativeEvent } = syntheticEvent;
117:               console.warn("WebView error: ", nativeEvent);
118:             }}
119:             onMessage={handleWebViewMessage}
120:             onLoadEnd={() => {
121:               sendChairsToWebView();
122:             }}
123:           />
124:         </Container>
125:       ) : (
126:         <View
127:           style={{ flex: 1, justifyContent: "center", alignItems: "center" }}
128:         >
129:           <ActivityIndicator size="large" color="#0000ff" />
130:         </View>
131:       )}
132:       <Footer>
133:         <SelectedText>
134:           Selected Chairs: {selectedChairs.join(", ") || "None"}
135:         </SelectedText>
136:         <CancelButton onPress={cancelSelection}>
137:           <CancelButtonText>Cancel Selection</CancelButtonText>
138:         </CancelButton>
139:       </Footer>
140:     </View>
141:   );
142: };
143: 
144: export default WebApp;

================
File: src/data/mockData.js
================
  1: export const restaurants = [
  2:   {
  3:     name: "La Piazza",
  4:     icon: "https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",
  5:     photos: [
  6:       "https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Zm9vZHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
  7:     ],
  8:     address: "123 Piazza Street",
  9:     isOpenNow: true,
 10:     rating: 4.5,
 11:     isClosedTemporarily: false,
 12:     placeId: "1",
 13:   },
 14:   {
 15:     name: "Sushi World",
 16:     icon: "https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",
 17:     photos: ["https://images.unsplash.com/photo-1553621042-f6e147245754"],
 18:     address: "456 Sushi Lane",
 19:     isOpenNow: true,
 20:     rating: 5,
 21:     isClosedTemporarily: false,
 22:     placeId: "2",
 23:   },
 24:   {
 25:     name: "Burger House",
 26:     icon: "https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",
 27:     photos: ["https://images.unsplash.com/photo-1550547660-d9450f859349"],
 28:     address: "789 Burger Blvd",
 29:     isOpenNow: false,
 30:     rating: 3.8,
 31:     isClosedTemporarily: false,
 32:     placeId: "3",
 33:   },
 34:   {
 35:     name: "Ocean Breeze Café",
 36:     icon: "https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",
 37:     photos: [
 38:       "https://images.unsplash.com/photo-1544511916-0148ccdeb877?auto=format&fit=crop&w=400&q=60",
 39:     ],
 40:     address: "101 Ocean Drive",
 41:     isOpenNow: true,
 42:     rating: 4.2,
 43:     isClosedTemporarily: false,
 44:     placeId: "4",
 45:   },
 46: ];
 47: 
 48: export const reservations = [
 49:   {
 50:     id: 1,
 51:     restaurant: restaurants[0],
 52:     date: "2024-04-01",
 53:     time: "7:00 PM",
 54:     seatsNumber: 4,
 55:     status: "Confirmed",
 56:   },
 57:   {
 58:     id: 2,
 59:     restaurant: restaurants[1],
 60:     date: "2024-03-15",
 61:     time: "6:30 PM",
 62:     seatsNumber: 2,
 63:     status: "Completed",
 64:   },
 65:   {
 66:     id: 3,
 67:     restaurant: restaurants[2],
 68:     date: "2024-03-20",
 69:     time: "6:00 PM",
 70:     seatsNumber: 3,
 71:     status: "Completed",
 72:   },
 73:   {
 74:     id: 4,
 75:     restaurant: restaurants[3],
 76:     date: "2024-03-28",
 77:     time: "6:00 PM",
 78:     seatsNumber: 3,
 79:     status: "Completed",
 80:   },
 81: ];
 82: 
 83: export const countryCodes = [
 84:   {
 85:     flag: "🇺🇸",
 86:     countryName: "United States",
 87:     code: "+1",
 88:   },
 89:   {
 90:     flag: "🇬🇧",
 91:     countryName: "United Kingdom",
 92:     code: "+44",
 93:   },
 94:   {
 95:     flag: "🇨🇦",
 96:     countryName: "Canada",
 97:     code: "+1",
 98:   },
 99:   {
100:     flag: "🇦🇺",
101:     countryName: "Australia",
102:     code: "+61",
103:   },
104:   {
105:     flag: "🇳🇿",
106:     countryName: "New Zealand",
107:     code: "+64",
108:   },
109:   {
110:     flag: "🇮🇳",
111:     countryName: "India",
112:     code: "+91",
113:   },
114:   {
115:     flag: "🇨🇳",
116:     countryName: "China",
117:     code: "+86",
118:   },
119:   {
120:     flag: "🇯🇵",
121:     countryName: "Japan",
122:     code: "+81",
123:   },
124: ];
125: 
126: export const users = [
127:   {
128:     username: "Vickers Zhu",
129:     email: "****@example.com",
130:     profileImage: require("../../assets/images/user_profile.jpg"),
131:     phoneNumber: "+81 **** ****",
132:   },
133: ];
134: 
135: export const tableStatuses = {
136:   "0-1": { id: 1, row: 0, col: 1, status: "empty" },
137:   "0-2": { id: 2, row: 0, col: 2, status: "empty" },
138:   "1-0": { id: 3, row: 1, col: 0, status: "empty" },
139:   "1-1": { id: 4, row: 1, col: 1, status: "occupied" },
140:   "1-2": { id: 5, row: 1, col: 2, status: "empty" },
141:   "1-3": { id: 6, row: 1, col: 3, status: "empty" },
142:   "2-0": { id: 7, row: 2, col: 0, status: "reserved" },
143:   "2-1": { id: 8, row: 2, col: 1, status: "empty" },
144:   "2-2": { id: 9, row: 2, col: 2, status: "empty" },
145:   "2-3": { id: 10, row: 2, col: 3, status: "occupied" },
146:   "3-1": { id: 11, row: 3, col: 1, status: "empty" },
147:   "3-2": { id: 12, row: 3, col: 2, status: "empty" },
148: };
149: 
150: export const seatingData = {
151:   tables: [
152:     {
153:       id: 1,
154:       chairs: [
155:         { id: "1A", status: "occupied" },
156:         { id: "1B", status: "empty" },
157:         { id: "1C", status: "empty" },
158:       ],
159:     },
160:     {
161:       id: 2,
162:       chairs: [
163:         { id: "2A", status: "empty" },
164:         { id: "2B", status: "empty" },
165:         { id: "2C", status: "reserved" },
166:         { id: "2D", status: "reserved" },
167:       ],
168:     },
169:     {
170:       id: 3,
171:       chairs: ["3A", "3B", "3C", "3D", "3E", "3F", "3G", "3H", "3I", "3J"].map(
172:         (chairId, index) => {
173:           if (index === 2 || index === 5) {
174:             return { id: chairId, status: "occupied" };
175:           }
176:           return { id: chairId, status: "empty" };
177:         }
178:       ),
179:     },
180:     {
181:       id: 4,
182:       chairs: [
183:         { id: "4A", status: "empty" },
184:         { id: "4B", status: "occupied" },
185:         { id: "4C", status: "empty" },
186:         { id: "4D", status: "empty" },
187:       ],
188:     },
189:     {
190:       id: 5,
191:       chairs: [
192:         { id: "5A", status: "empty" },
193:         { id: "5B", status: "reserved" },
194:         { id: "5C", status: "empty" },
195:       ],
196:     },
197:     {
198:       id: 6,
199:       chairs: [
200:         { id: "6A", status: "occupied" },
201:         { id: "6B", status: "occupied" },
202:       ],
203:     },
204:     {
205:       id: 7,
206:       chairs: ["7A", "7B", "7C", "7D", "7E", "7F", "7G", "7H", "7I", "7J"].map(
207:         (chairId, index) => {
208:           return index % 3 === 0
209:             ? { id: chairId, status: "reserved" }
210:             : { id: chairId, status: "empty" };
211:         }
212:       ),
213:     },
214:     {
215:       id: 8,
216:       chairs: [
217:         { id: "8A", status: "empty" },
218:         { id: "8B", status: "occupied" },
219:       ],
220:     },
221:     {
222:       id: 9,
223:       chairs: [
224:         { id: "9A", status: "empty" },
225:         { id: "9B", status: "empty" },
226:         { id: "9C", status: "reserved" },
227:       ],
228:     },
229:     {
230:       id: 10,
231:       chairs: [
232:         "10A",
233:         "10B",
234:         "10C",
235:         "10D",
236:         "10E",
237:         "10F",
238:         "10G",
239:         "10H",
240:         "10I",
241:         "10J",
242:       ].map((chairId, index) => {
243:         if (index === 4) return { id: chairId, status: "occupied" };
244:         if (index === 7) return { id: chairId, status: "reserved" };
245:         return { id: chairId, status: "empty" };
246:       }),
247:     },
248:     {
249:       id: 11,
250:       chairs: [
251:         { id: "11A", status: "empty" },
252:         { id: "11B", status: "empty" },
253:       ],
254:     },
255:     {
256:       id: 12,
257:       chairs: [
258:         { id: "12A", status: "occupied" },
259:         { id: "12B", status: "empty" },
260:         { id: "12C", status: "empty" },
261:       ],
262:     },
263:   ],
264:   counterSeats: Array.from({ length: 30 }, (_, i) => ({
265:     id: `C${i + 1}`,
266:     status: i % 5 === 0 ? "occupied" : i % 7 === 0 ? "reserved" : "empty",
267:   })),
268: };
269: 
270: export const merchantReservations = [
271:   {
272:     id: 1,
273:     customerName: "John Smith",
274:     people: 2,
275:     time: "11:00",
276:     duration: 90,
277:     tableId: 2,
278:     chairs: ["2A", "2B"],
279:     status: "confirmed",
280:     note: "Anniversary celebration",
281:   },
282:   {
283:     id: 2,
284:     customerName: "Emma Wilson",
285:     people: 4,
286:     time: "12:30",
287:     duration: 120,
288:     tableId: 4,
289:     chairs: ["4A", "4B", "4C", "4D"],
290:     status: "pending",
291:     note: "Window seat preferred",
292:   },
293:   {
294:     id: 3,
295:     customerName: "David Lee",
296:     people: 1,
297:     time: "13:00",
298:     duration: 60,
299:     tableId: 6,
300:     chairs: ["6A"],
301:     status: "confirmed",
302:     note: "",
303:   },
304:   {
305:     id: 4,
306:     customerName: "Sarah Johnson",
307:     people: 3,
308:     time: "15:30",
309:     duration: 90,
310:     tableId: 1,
311:     chairs: ["1A", "1B", "1C"],
312:     status: "confirmed",
313:     note: "Allergic to nuts",
314:   },
315:   {
316:     id: 5,
317:     customerName: "Michael Brown",
318:     people: 2,
319:     time: "18:00",
320:     duration: 120,
321:     tableId: 5,
322:     chairs: ["5A", "5B"],
323:     status: "confirmed",
324:     note: "Birthday celebration",
325:   },
326:   {
327:     id: 9,
328:     customerName: "Lisa Wong",
329:     people: 3,
330:     time: "17:00",
331:     duration: 90,
332:     tableId: 7,
333:     chairs: ["7A", "7D", "7G"],
334:     status: "confirmed",
335:     note: "Family dinner",
336:   },
337:   {
338:     id: 10,
339:     customerName: "Tom Garcia",
340:     people: 2,
341:     time: "19:00",
342:     duration: 60,
343:     tableId: 10,
344:     chairs: ["10E"],
345:     status: "confirmed",
346:     note: "Quick business dinner",
347:   },
348:   {
349:     id: 11,
350:     customerName: "Rachel Kim",
351:     people: 2,
352:     time: "16:30",
353:     duration: 90,
354:     tableId: 12,
355:     chairs: ["12A"],
356:     status: "confirmed",
357:     note: "Late lunch",
358:   },
359:   {
360:     id: 12,
361:     customerName: "Mark Rodriguez",
362:     people: 1,
363:     time: "20:00",
364:     duration: 60,
365:     tableId: 8,
366:     chairs: ["8B"],
367:     status: "confirmed",
368:     note: "Solo dinner",
369:   },
370: 
371:   {
372:     id: 6,
373:     customerName: "Alex Chen",
374:     people: 1,
375:     time: "10:00",
376:     duration: 60,
377:     counterSeatId: "C3",
378:     isCounterSeat: true,
379:     status: "confirmed",
380:     note: "Business breakfast",
381:   },
382:   {
383:     id: 7,
384:     customerName: "Jessica Miller",
385:     people: 1,
386:     time: "14:00",
387:     duration: 90,
388:     counterSeatId: "C7",
389:     isCounterSeat: true,
390:     status: "confirmed",
391:     note: "Solo diner",
392:   },
393:   {
394:     id: 8,
395:     customerName: "Robert Taylor",
396:     people: 1,
397:     time: "19:30",
398:     duration: 60,
399:     counterSeatId: "C15",
400:     isCounterSeat: true,
401:     status: "pending",
402:     note: "Late dinner",
403:   },
404:   {
405:     id: 13,
406:     customerName: "Emily Chen",
407:     people: 1,
408:     time: "11:30",
409:     duration: 45,
410:     counterSeatId: "C10",
411:     isCounterSeat: true,
412:     status: "confirmed",
413:     note: "Quick lunch",
414:   },
415:   {
416:     id: 14,
417:     customerName: "Alex Johnson",
418:     people: 1,
419:     time: "17:45",
420:     duration: 75,
421:     counterSeatId: "C20",
422:     isCounterSeat: true,
423:     status: "confirmed",
424:     note: "After-work drink",
425:   },
426: ];
427: 
428: 
429: export const timeSlots = [
430:   "09:00",
431:   "09:30",
432:   "10:00",
433:   "10:30",
434:   "11:00",
435:   "11:30",
436:   "12:00",
437:   "12:30",
438:   "13:00",
439:   "13:30",
440:   "14:00",
441:   "14:30",
442:   "15:00",
443:   "15:30",
444:   "16:00",
445:   "16:30",
446:   "17:00",
447:   "17:30",
448:   "18:00",
449:   "18:30",
450:   "19:00",
451:   "19:30",
452:   "20:00",
453:   "20:30",
454:   "21:00",
455:   "21:30",
456:   "22:00",
457:   "22:30",
458: ];

================
File: src/features/auth/components/CountryListItem.js
================
 1: import React from "react";
 2: import {
 3:   ListItemContainer,
 4:   FlagText,
 5:   CodeText,
 6: } from "./CountryListItem.styles";
 7: import { TouchableOpacity } from "react-native";
 8: 
 9: 
10: 
11: 
12: 
13: 
14: const CountryListItem = ({ item, onPress }) => (
15:   <TouchableOpacity onPress={() => onPress(item)} activeOpacity={0.6}>
16:     <ListItemContainer>
17:       <FlagText>{item.flag}</FlagText>
18:       <CodeText>{item.code}</CodeText>
19:     </ListItemContainer>
20:   </TouchableOpacity>
21: );
22: 
23: export default CountryListItem;

================
File: src/features/auth/components/CountryListItem.styles.js
================
 1: import styled from "styled-components/native";
 2: import { View, Text } from "react-native";
 3: 
 4: 
 5: 
 6: 
 7: export const ListItemContainer = styled(View)`
 8:   flex-direction: row;
 9:   align-items: center;
10:   padding-vertical: ${(props) => props.theme.space[2]};
11:   padding-horizontal: ${(props) => props.theme.space[2]};
12:   background-color: ${(props) => props.theme.colors.bg.primary};
13:   border-bottom-width: 0.5px;
14:   border-bottom-color: ${(props) => props.theme.colors.ui.tertiary};
15: `;
16: 
17: 
18: 
19: 
20: export const CountryInfoContainer = styled(View)`
21:   flex-direction: row;
22:   align-items: center;
23:   flex: 1;
24:   margin-right: ${(props) => props.theme.space[2]};
25: `;
26: 
27: 
28: 
29: 
30: export const FlagText = styled(Text)`
31:   font-size: 20px;
32:   margin-right: ${(props) => props.theme.space[2]};
33: `;
34: 
35: 
36: 
37: 
38: export const CountryNameText = styled(Text)`
39:   font-family: ${(props) => props.theme.fonts.body};
40:   font-size: ${(props) => props.theme.fontSizes.body};
41:   color: ${(props) => props.theme.colors.text.primary};
42:   flex: 1;
43: `;
44: 
45: 
46: 
47: 
48: export const CodeText = styled(Text)`
49:   font-family: ${(props) => props.theme.fonts.body};
50:   font-size: 16px;
51:   font-weight: ${(props) => props.theme.fontWeights.medium};
52:   color: ${(props) => props.theme.colors.text.primary};
53: `;

================
File: src/features/auth/components/LoginDropDownPicker.js
================
  1: import React, { useState, useEffect } from "react";
  2: import { MaterialIcons } from "@expo/vector-icons";
  3: import {
  4:   DropdownContainer,
  5:   PlaceholderText,
  6:   SelectedItemWrapper,
  7:   FlagText,
  8:   CodeText,
  9:   StyledDropDownPicker,
 10: } from "./LoginDropDownPicker.styles";
 11: import CountryListItem from "./CountryListItem";
 12: import { useTheme } from "styled-components/native";
 13: 
 14: 
 15: 
 16: 
 17: 
 18: 
 19: 
 20: 
 21: const LoginDropDownPicker = ({
 22:   countryCodes,
 23:   selectedCountry,
 24:   setSelectedCountry,
 25:   style,
 26: }) => {
 27:   const [open, setOpen] = useState(false);
 28:   const [selectedItem, setSelectedItem] = useState(null);
 29:   const theme = useTheme();
 30: 
 31: 
 32:   useEffect(() => {
 33:     if (selectedCountry && countryCodes) {
 34:       const item = countryCodes.find(
 35:         (item) => item.countryName === selectedCountry
 36:       );
 37:       setSelectedItem(item);
 38:     }
 39:   }, [selectedCountry, countryCodes]);
 40: 
 41: 
 42:   const handleSelectItem = (item) => {
 43:     setSelectedCountry(item.countryName);
 44:     setOpen(false);
 45:   };
 46: 
 47: 
 48:   const dropdownItems = countryCodes.map((item) => ({
 49:     label: `${item.flag}  ${item.code}`,
 50:     value: item.countryName,
 51:     countryName: item.countryName,
 52:     code: item.code,
 53:     flag: item.flag,
 54:   }));
 55: 
 56: 
 57:   const renderPlaceholder = () => {
 58:     if (!selectedItem) return <PlaceholderText>Select</PlaceholderText>;
 59: 
 60:     return (
 61:       <SelectedItemWrapper>
 62:         <FlagText>{selectedItem.flag}</FlagText>
 63:         <CodeText>{selectedItem.code}</CodeText>
 64:         <MaterialIcons
 65:           name={open ? "keyboard-arrow-up" : "keyboard-arrow-down"}
 66:           size={16}
 67:           color={theme.colors.text.primary}
 68:           style={{ marginLeft: 4 }}
 69:         />
 70:       </SelectedItemWrapper>
 71:     );
 72:   };
 73: 
 74:   return (
 75:     <DropdownContainer style={style}>
 76:       <StyledDropDownPicker
 77:         open={open}
 78:         value={selectedCountry}
 79:         items={dropdownItems}
 80:         setOpen={setOpen}
 81:         setValue={(val) => {
 82:           const item = countryCodes.find((item) => item.countryName === val);
 83:           setSelectedCountry(item?.countryName);
 84:         }}
 85:         placeholder="Select"
 86:         listMode="SCROLLVIEW"
 87:         renderListItem={({ item }) => (
 88:           <CountryListItem item={item} onPress={handleSelectItem} />
 89:         )}
 90:         searchable={false}
 91:         ArrowUpIconComponent={() => null}
 92:         ArrowDownIconComponent={() => null}
 93:         renderSelectedItemLabel={() => null}
 94:         renderPlaceholder={renderPlaceholder}
 95:       />
 96:     </DropdownContainer>
 97:   );
 98: };
 99: 
100: export default LoginDropDownPicker;

================
File: src/features/auth/components/LoginDropDownPicker.styles.js
================
  1: import styled from "styled-components/native";
  2: import DropDownPicker from "react-native-dropdown-picker";
  3: import { View, Text } from "react-native";
  4: 
  5: 
  6: 
  7: 
  8: export const DropdownContainer = styled(View)`
  9:   position: relative;
 10:   background-color: ${(props) => props.theme.colors.bg.secondary};
 11:   border-radius: 8px;
 12: `;
 13: 
 14: 
 15: 
 16: 
 17: export const PlaceholderText = styled(Text)`
 18:   color: ${(props) => props.theme.colors.text.disabled};
 19:   font-family: ${(props) => props.theme.fonts.body};
 20:   font-size: 16px;
 21:   padding-horizontal: ${(props) => props.theme.space[2]};
 22: `;
 23: 
 24: 
 25: 
 26: 
 27: export const SelectedItemWrapper = styled(View)`
 28:   flex-direction: row;
 29:   align-items: center;
 30:   padding-horizontal: ${(props) => props.theme.space[2]};
 31: `;
 32: 
 33: 
 34: 
 35: 
 36: export const FlagText = styled(Text)`
 37:   font-size: 20px;
 38:   margin-right: ${(props) => props.theme.space[2]};
 39: `;
 40: 
 41: 
 42: 
 43: 
 44: export const CodeText = styled(Text)`
 45:   font-family: ${(props) => props.theme.fonts.body};
 46:   font-size: 16px;
 47:   font-weight: ${(props) => props.theme.fontWeights.medium};
 48:   color: ${(props) => props.theme.colors.text.primary};
 49: `;
 50: 
 51: 
 52: 
 53: 
 54: export const StyledDropDownPicker = styled(DropDownPicker).attrs(
 55:   ({ theme }) => ({
 56: 
 57:     style: {
 58:       backgroundColor: theme.colors.bg.secondary,
 59:       borderColor: theme.colors.ui.tertiary,
 60:       borderRadius: 8,
 61:       minHeight: 50,
 62:       borderWidth: 1,
 63:       width: "100%",
 64:     },
 65: 
 66: 
 67:     dropDownContainerStyle: {
 68:       position: "absolute",
 69:       width: "100%",
 70:       backgroundColor: theme.colors.bg.primary,
 71:       borderColor: theme.colors.ui.tertiary,
 72:       borderWidth: 1,
 73:       borderTopWidth: 0,
 74:       borderBottomLeftRadius: 8,
 75:       borderBottomRightRadius: 8,
 76:       elevation: 5,
 77:       shadowColor: "#000",
 78:       shadowOffset: { width: 0, height: 2 },
 79:       shadowOpacity: 0.1,
 80:       shadowRadius: 4,
 81:       zIndex: 1000,
 82:     },
 83: 
 84: 
 85:     placeholderStyle: {
 86:       color: theme.colors.text.disabled,
 87:       fontFamily: theme.fonts.body,
 88:       fontSize: 16,
 89:     },
 90: 
 91: 
 92:     selectedItemContainerStyle: {
 93:       flexDirection: 'row',
 94:       alignItems: 'center',
 95:       paddingHorizontal: parseInt(theme.space[2]),
 96:     },
 97: 
 98: 
 99:     listItemContainerStyle: {
100:       height: 50,
101:       flexDirection: 'row',
102:       alignItems: 'center',
103:     },
104: 
105: 
106:     listParentContainerStyle: {
107:       maxHeight: 250,
108:     },
109: 
110: 
111:     itemSeparatorStyle: {
112:       backgroundColor: theme.colors.ui.tertiary,
113:       height: 0.5,
114:     },
115:   })
116: )`
117:   z-index: 2000;
118: `;

================
File: src/features/auth/screens/LoginScreen.js
================
  1: import React, { useState } from "react";
  2: import { View } from "react-native";
  3: import { Formik } from "formik";
  4: import * as yup from "yup";
  5: import { countryCodes } from "../../../data/mockData";
  6: import {
  7:   Container,
  8:   TopRightContainer,
  9:   Logo,
 10:   InputContainer,
 11:   FlexContainer,
 12:   TextInput,
 13:   Button,
 14:   ButtonText,
 15:   LinkText,
 16:   ErrorText,
 17:   TitleText,
 18: } from "./LoginScreen.styles";
 19: 
 20: import { useAuthentication } from "../../../services/AuthenticationContext";
 21: import { useLanguage } from "../../../services/LanguageContext";
 22: 
 23: import LoginDropDownPicker from "../components/LoginDropDownPicker";
 24: import SwitchContainer from "../../../components/Switch/Switch";
 25: import LanguageSelector from "../../../components/LanguageSelector/LanguageSelector";
 26: 
 27: 
 28: const validationSchema = yup.object().shape({
 29:   phone: yup
 30:     .string()
 31:     .required("Phone number is required")
 32:     .matches(/^\d+$/, "Phone number must contain only digits"),
 33:   password: yup
 34:     .string()
 35:     .min(6, "Password must be at least 6 characters")
 36:     .required("Password is required"),
 37: });
 38: 
 39: export const LoginScreen = ({ navigation }) => {
 40:   const [selectedCountry, setSelectedCountry] = useState("United States");
 41:   const [containerWidth, setContainerWidth] = useState(380);
 42: 
 43:   const [isMerchant, setIsMerchant] = useState(false);
 44:   const { onLogin, isLoading, error } = useAuthentication();
 45:   const { currentLanguage, changeLanguage } = useLanguage();
 46: 
 47:   const handleLogin = (values) => {
 48:     const selectedCode =
 49:       countryCodes.find((country) => country.countryName === selectedCountry)
 50:         ?.code || "+1";
 51:     onLogin(
 52:       `${selectedCode}${values.phone}`,
 53:       values.password,
 54:       isMerchant ? "merchant" : "customer"
 55:     );
 56:   };
 57: 
 58:   return (
 59:     <Container>
 60:       <LanguageSelector
 61:         currentLanguage={currentLanguage}
 62:         onChangeLanguage={changeLanguage}
 63:         style={{
 64:           position: "absolute",
 65:           top: 20,
 66:           left: 20,
 67:           zIndex: 1000,
 68:         }}
 69:       />
 70:       {}
 71:       <TopRightContainer style={{ transform: [{ scale: 0.8 }] }}>
 72:         <SwitchContainer
 73:           isOn={isMerchant}
 74:           setIsOn={setIsMerchant}
 75:           leftLabel="Customer"
 76:           rightLabel="Merchant"
 77:           variant="alternate"
 78:         />
 79:       </TopRightContainer>
 80: 
 81:       <Logo source={require("../../../../assets/images/splash copy.png")} />
 82:       <TitleText variant="title">Login</TitleText>
 83: 
 84:       <Formik
 85:         initialValues={{ phone: "", password: "" }}
 86:         validationSchema={validationSchema}
 87:         onSubmit={handleLogin}
 88:       >
 89:         {({
 90:           handleChange,
 91:           handleBlur,
 92:           handleSubmit,
 93:           values,
 94:           errors,
 95:           touched,
 96:           isValid,
 97:         }) => (
 98:           <>
 99:             <InputContainer
100:               style={{ zIndex: 2000, elevation: 2000 }}
101:               onLayout={(event) => {
102:                 const { width } = event.nativeEvent.layout;
103:                 setContainerWidth(width);
104:               }}
105:             >
106:               <FlexContainer>
107:                 <View
108:                   style={{
109:                     flex: 0.29,
110:                     marginRight: "2%",
111:                     zIndex: 9000,
112:                     elevation: 9000,
113:                   }}
114:                 >
115:                   <LoginDropDownPicker
116:                     countryCodes={countryCodes}
117:                     selectedCountry={selectedCountry}
118:                     setSelectedCountry={setSelectedCountry}
119:                     containerWidth={containerWidth}
120:                   />
121:                 </View>
122:                 <View style={{ flex: 0.71 }}>
123:                   <TextInput
124:                     placeholder="Phone number"
125:                     placeholderTextColor="#9C9C9C"
126:                     keyboardType="number-pad"
127:                     onChangeText={handleChange("phone")}
128:                     onBlur={handleBlur("phone")}
129:                     value={values.phone}
130:                   />
131:                 </View>
132:               </FlexContainer>
133:               {errors.phone && touched.phone && (
134:                 <ErrorText>{errors.phone}</ErrorText>
135:               )}
136:             </InputContainer>
137: 
138:             <InputContainer>
139:               <TextInput
140:                 placeholder="Password"
141:                 placeholderTextColor="#9C9C9C"
142:                 secureTextEntry
143:                 autoCapitalize="none"
144:                 onChangeText={handleChange("password")}
145:                 onBlur={handleBlur("password")}
146:                 value={values.password}
147:               />
148:               {errors.password && touched.password && (
149:                 <ErrorText>{errors.password}</ErrorText>
150:               )}
151:             </InputContainer>
152: 
153:             <Button onPress={handleSubmit} disabled={!isValid}>
154:               <ButtonText> {isLoading ? "Logging in..." : "Login"} </ButtonText>
155:             </Button>
156:             {error && <ErrorText>{error}</ErrorText>}
157: 
158:             <LinkText onPress={() => console.log("Navigate to SignUp")}>
159:               Don't have an account? Sign Up
160:             </LinkText>
161:           </>
162:         )}
163:       </Formik>
164:     </Container>
165:   );
166: };

================
File: src/features/auth/screens/LoginScreen.styles.js
================
 1: import styled from "styled-components/native";
 2: import { CustomText } from "../../../components/CustomText/CustomText";
 3: 
 4: export const Container = styled.View`
 5:   flex: 1;
 6:   justify-content: flex-start;
 7:   align-items: center;
 8:   background-color: ${(props) => props.theme.colors.bg.primary};
 9:   padding: ${(props) => props.theme.space[4]};
10: `;
11: 
12: export const Logo = styled.Image`
13:   height: 100px;
14:   width: 100px;
15:   margin-bottom: ${(props) => props.theme.space[4]};
16: `;
17: 
18: export const InputContainer = styled.View`
19:   width: 100%;
20:   margin-bottom: ${(props) => props.theme.space[3]};
21: `;
22: 
23: export const TextInput = styled.TextInput`
24:   width: 100%;
25:   padding: ${(props) => props.theme.space[3]};
26:   font-size: ${(props) => props.theme.fontSizes.body};
27:   color: ${(props) => props.theme.colors.text.primary};
28:   background-color: ${(props) => props.theme.colors.bg.secondary};
29:   border-radius: ${(props) => props.theme.space[2]};
30: `;
31: 
32: export const FlexContainer = styled.View`
33:   z-index: 9999;
34:   elevation: 9999;
35:   flex-direction: row;
36:   align-items: center;
37:   width: 100%;
38: `;
39: 
40: export const Button = styled.TouchableOpacity`
41:   width: 90%;
42:   padding: ${(props) => props.theme.space[3]};
43:   background-color: ${(props) => props.theme.colors.ui.primary};
44:   border-radius: ${(props) => props.theme.space[1]};
45:   align-items: center;
46:   margin-top: ${(props) => props.theme.space[3]};
47: `;
48: 
49: export const ButtonText = styled(CustomText)`
50:   color: ${(props) => props.theme.colors.text.inverse};
51:   font-size: ${(props) => props.theme.fontSizes.body};
52: `;
53: 
54: export const LinkText = styled(CustomText)`
55:   margin-top: ${(props) => props.theme.space[2]};
56:   color: ${(props) => props.theme.colors.text.secondary};
57:   text-decoration: underline;
58:   font-size: ${(props) => props.theme.fontSizes.caption};
59: `;
60: 
61: export const ErrorText = styled(CustomText)`
62:   color: ${(props) => props.theme.colors.text.error};
63:   font-size: ${(props) => props.theme.fontSizes.caption};
64:   margin-top: ${(props) => props.theme.space[1]};
65: `;
66: 
67: export const TitleText = styled(CustomText)`
68:   color: ${(props) => props.theme.colors.text.primary};
69:   padding-bottom: ${(props) => props.theme.space[4]};
70:   font-size: ${(props) => props.theme.fontSizes.title};
71: `;
72: 
73: export const TopRightContainer = styled.View`
74:   position: absolute;
75:   top: ${(props) => props.theme.space[0]};
76:   right: ${(props) => props.theme.space[0]};
77:   z-index: 10000;
78: `;

================
File: src/features/customer/reservations/components/PastReservationCard.js
================
 1: import React from "react";
 2: import { View } from "react-native";
 3: import { useNavigation } from "@react-navigation/native";
 4: import styled, { useTheme } from "styled-components/native";
 5: 
 6: import { Spacer } from "../../../../components/Spacer/Spacer";
 7: import { CustomText } from "../../../../components/CustomText/CustomText";
 8: 
 9: import {
10:   PastReservationCardContainer,
11:   CircleImage,
12:   InfoContainer,
13:   InfoText,
14:   StatusText,
15:   ViewStoreButton,
16:   ViewStoreButtonText,
17: } from "./PastReservationCard.styles";
18: 
19: export const PastReservationCard = ({ reservation = {} }) => {
20:   const navigation = useNavigation();
21: 
22:   const {
23:     restaurant = {},
24:     date = "2024-04-01",
25:     status = "Completed",
26:   } = reservation;
27: 
28:   return (
29:     <PastReservationCardContainer>
30:       <CircleImage source={{ uri: restaurant.photos[0] }} />
31:       <InfoContainer>
32:         <CustomText variant="title">{restaurant.name}</CustomText>
33:         <Spacer position="top" size="small" />
34:         <InfoText>Reserved Date: {date}</InfoText>
35:         <Spacer position="top" size="small" />
36:         <StatusText>{status}</StatusText>
37:       </InfoContainer>
38:       <ViewStoreButton
39:         onPress={() => {
40:           navigation.navigate("RestaurantDetailScreen", {
41:             restaurant: restaurant,
42:           });
43:         }}
44:       >
45:         <ViewStoreButtonText>View Store</ViewStoreButtonText>
46:       </ViewStoreButton>
47:     </PastReservationCardContainer>
48:   );
49: };

================
File: src/features/customer/reservations/components/PastReservationCard.styles.js
================
 1: import styled from "styled-components/native";
 2: import { View, Text, Image, TouchableOpacity } from "react-native";
 3: 
 4: 
 5: 
 6: 
 7: 
 8: 
 9: export const PastReservationCardContainer = styled(View)`
10:   flex-direction: row;
11:   align-items: center;
12:   padding-left: ${(props) => props.theme.space[3]};
13:   padding-right: ${(props) => props.theme.space[3]};
14:   border-radius: 8px;
15:   margin-vertical: ${(props) => props.theme.space[2]};
16: `;
17: 
18: 
19: export const CircleImage = styled(Image)`
20:   width: 50px;
21:   height: 50px;
22:   border-radius: 25px;
23: `;
24: 
25: 
26: export const InfoContainer = styled(View)`
27:   flex: 1;
28:   margin-left: ${(props) => props.theme.space[3]};
29: `;
30: 
31: 
32: export const InfoText = styled(Text)`
33:   font-family: ${(props) => props.theme.fonts.body};
34:   font-size: ${(props) => props.theme.fontSizes.body};
35:   color: ${(props) => props.theme.colors.text.primary};
36: `;
37: 
38: 
39: export const StatusText = styled(Text)`
40:   font-family: ${(props) => props.theme.fonts.body};
41:   font-size: ${(props) => props.theme.fontSizes.body};
42:   color: ${(props) => props.theme.colors.text.primary};
43: `;
44: 
45: 
46: export const ViewStoreButton = styled(TouchableOpacity)`
47:   padding-vertical: ${(props) => props.theme.space[2]};
48:   padding-horizontal: ${(props) => props.theme.space[2]};
49:   background-color: ${(props) => props.theme.colors.ui.tertiary};
50:   border-radius: 25px;
51: `;
52: 
53: 
54: export const ViewStoreButtonText = styled(Text)`
55:   font-family: ${(props) => props.theme.fonts.body};
56:   font-size: ${(props) => props.theme.fontSizes.button};
57:   color: ${(props) => props.theme.colors.text.primary};
58:   text-align: center;
59: `;

================
File: src/features/customer/reservations/components/ReservationCard.js
================
 1: import React from "react";
 2: import { View } from "react-native";
 3: import { useNavigation } from "@react-navigation/native";
 4: import styled, { useTheme } from "styled-components/native";
 5: 
 6: import { Spacer } from "../../../../components/Spacer/Spacer";
 7: import { CustomText } from "../../../../components/CustomText/CustomText";
 8: 
 9: import {
10:   ReservationCardContainer,
11:   ReservationCardCover,
12:   Info,
13:   Section,
14:   ReservationDetails,
15:   DetailText,
16:   TrackButton,
17:   TrackButtonText,
18: } from "./ReservationCard.styles";
19: 
20: export const ReservationCard = ({ reservation = {} }) => {
21:   const navigation = useNavigation();
22:   const theme = useTheme();
23: 
24:   const {
25:     restaurant = {},
26:     date = "2024-04-01",
27:     time = "7:00 PM",
28:     seatsNumber = 4,
29:     status = "Confirmed",
30:   } = reservation;
31: 
32:   return (
33:     <ReservationCardContainer elevation={0}>
34:       <ReservationCardCover source={{ uri: restaurant.photos[0] }} />
35:       <Info>
36:         <CustomText variant="title">{restaurant.name}</CustomText>
37:         <Section>
38:           <ReservationDetails>
39:             <DetailText>Time: {time}</DetailText>
40:             <DetailText>Seats: {seatsNumber}</DetailText>
41:             <DetailText>Date: {date}</DetailText>
42:           </ReservationDetails>
43:           <TrackButton
44:             onPress={() => {
45:               navigation.navigate("RestaurantDetailScreen", {
46:                 restaurant: restaurant,
47:                 presentationStyle: "modal",
48:                 openReservationView: true,
49:               });
50:             }}
51:           >
52:             <TrackButtonText>Track</TrackButtonText>
53:           </TrackButton>
54:         </Section>
55:       </Info>
56:     </ReservationCardContainer>
57:   );
58: };

================
File: src/features/customer/reservations/components/ReservationCard.styles.js
================
 1: import styled from "styled-components/native";
 2: import { Image, View, TouchableOpacity, Text } from "react-native";
 3: import { Card } from "react-native-paper";
 4: 
 5: 
 6: 
 7: 
 8: 
 9: 
10: export const ReservationCardContainer = styled(Card)`
11:   background-color: ${(props) => props.theme.colors.bg.primary};
12:   width: 98%;
13:   align-self: center;
14:   border-radius: 8px;
15: 
16:   /* Remove elevation for Android */
17:   elevation: 0;
18: 
19:   /* Remove shadow for iOS */
20:   shadow-color: transparent;
21:   shadow-opacity: 0;
22:   shadow-radius: 0px;
23: `;
24: 
25: 
26: export const ReservationCardCover = styled(Card.Cover)`
27:   padding: ${(props) => props.theme.space[3]};
28:   background-color: ${(props) => props.theme.colors.bg.primary};
29:   height: 150px;
30:   border-top-left-radius: 8px;
31:   border-top-right-radius: 8px;
32: `;
33: 
34: 
35: export const Info = styled(View)`
36:   padding-left: ${(props) => props.theme.space[3]};
37:   padding-right: ${(props) => props.theme.space[3]};
38:   padding-bottom: 0;
39:   margin-top: -5px;
40: `;
41: 
42: 
43: export const Section = styled(View)`
44:   flex-direction: row;
45:   justify-content: space-between;
46:   align-items: center;
47:   margin-top: ${(props) => props.theme.space[2]};
48: `;
49: 
50: 
51: export const ReservationDetails = styled(View)`
52:   flex-direction: column;
53: `;
54: 
55: 
56: export const DetailText = styled(Text)`
57:   font-family: ${(props) => props.theme.fonts.body};
58:   font-size: ${(props) => props.theme.fontSizes.body};
59:   color: ${(props) => props.theme.colors.text.primary};
60: `;
61: 
62: 
63: export const TrackButton = styled(TouchableOpacity)`
64:   padding: ${(props) => props.theme.space[1]} ${(props) => props.theme.space[2]};
65:   background-color: ${(props) => props.theme.colors.ui.primary};
66:   border-radius: 25px;
67: `;
68: 
69: 
70: export const TrackButtonText = styled(Text)`
71:   padding: ${(props) => props.theme.space[2]};
72:   font-family: ${(props) => props.theme.fonts.body};
73:   font-size: ${(props) => props.theme.fontSizes.body};
74:   color: ${(props) => props.theme.colors.bg.primary};
75:   text-align: center;
76: `;

================
File: src/features/customer/reservations/screens/ReservationsScreen.js
================
 1: import React from "react";
 2: import styled from "styled-components/native";
 3: import { ScrollView } from "react-native";
 4: import { useNavigation } from "@react-navigation/native";
 5: 
 6: import { reservations } from "../../../../data/mockData";
 7: import { CustomText } from "../../../../components/CustomText/CustomText";
 8: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
 9: import { Spacer } from "../../../../components/Spacer/Spacer";
10: import { Separator } from "../../../../components/Separator/Separator";
11: import { ReservationCard } from "../components/ReservationCard";
12: import { PastReservationCard } from "../components/PastReservationCard";
13: 
14: const Container = styled(SafeArea)`
15:   flex: 1;
16:   background-color: ${(props) => props.theme.colors.bg.primary};
17:   padding: ${(props) => props.theme.space[3]};
18: `;
19: 
20: const SectionTitle = styled(CustomText)`
21:   margin-left: ${(props) => props.theme.space[2]};
22:   padding-left: ${(props) => props.theme.space[2]};
23: `;
24: 
25: export const ReservationsScreen = () => {
26:   const navigation = useNavigation();
27: 
28: 
29:   const currentReservations = reservations.filter(
30:     (reservation) =>
31:       reservation.status === "Confirmed" || reservation.status === "Pending"
32:   );
33:   const pastReservations = reservations.filter(
34:     (reservation) => reservation.status === "Completed"
35:   );
36: 
37:   return (
38:     <Container>
39:       <ScrollView>
40:         {}
41:         <Spacer position="top" size="small" />
42:         <SectionTitle variant="title">Current Reservations</SectionTitle>
43:         {currentReservations.map((reservation, index) => (
44:           <React.Fragment key={reservation.id}>
45:             <ReservationCard reservation={reservation} />
46:             {currentReservations.length > 2 &&
47:               index < currentReservations.length - 1 && (
48:                 <Separator type="full" />
49:               )}
50:           </React.Fragment>
51:         ))}
52:         <Separator type="full" />
53: 
54:         {}
55:         <SectionTitle variant="title">Past Reservations</SectionTitle>
56:         <Spacer position="top" size="small" />
57:         {pastReservations.map((reservation, index) => (
58:           <React.Fragment key={reservation.id}>
59:             <PastReservationCard reservation={reservation} />
60:             {index < pastReservations.length - 1 && (
61:               <Separator type="partial" />
62:             )}
63:           </React.Fragment>
64:         ))}
65:       </ScrollView>
66:     </Container>
67:   );
68: };

================
File: src/features/customer/restaurants/components/Others.js
================
 1: import React from "react";
 2: import { View, Text } from "react-native";
 3: import { List, Divider } from "react-native-paper";
 4: 
 5: const Others = () => (
 6:   <View>
 7:     <Text style={{ fontSize: 24, margin: 16 }}>Others</Text>
 8:     <List.Accordion
 9:       title="Others"
10:       left={(props) => <List.Icon {...props} icon="dots-horizontal" />}
11:     >
12:       {Array.from({ length: 50 }, (_, index) => (
13:         <List.Item key={index} title={`Other ${index + 1}`} />
14:       ))}
15:     </List.Accordion>
16:     <Divider />
17:   </View>
18: );
19: 
20: export default Others;

================
File: src/features/customer/restaurants/components/RestaurantInfoCard.js
================
 1: import React from "react";
 2: import { View } from "react-native";
 3: import { SvgXml } from "react-native-svg";
 4: 
 5: import { Spacer } from "../../../../components/Spacer/Spacer";
 6: import { CustomText } from "../../../../components/CustomText/CustomText";
 7: import { Favourite } from "../../../../components/Favourite/Favourite";
 8: 
 9: import star from "../../../../../assets/icons/star";
10: import open from "../../../../../assets/icons/open";
11: 
12: import {
13:   RestaurantCard,
14:   RestaurantCardCover,
15:   Address,
16:   Info,
17:   Section,
18:   Rating,
19:   OperationStatus,
20:   Icon,
21: } from "./RestaurantInfoCard.styles";
22: 
23: export const RestaurantInfoCard = ({ restaurant = {}, elevation = 5 }) => {
24:   const {
25:     name = "Sick Eats",
26:     icon = "https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",
27:     photos = [
28:       "https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Zm9vZHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
29:     ],
30:     address = "100 random sick avenue",
31:     isOpenNow = true,
32:     rating = 4,
33:     isClosedTemporarily = true,
34:     placeId,
35:   } = restaurant;
36:   const ratingArray = Array.from(new Array(Math.floor(rating)));
37:   return (
38:     <RestaurantCard elevation={elevation}>
39:       <View>
40:         <Favourite restaurant={restaurant} />
41:         <RestaurantCardCover key={name} source={{ uri: photos[0] }} />
42:       </View>
43:       <Info>
44:         <CustomText variant="label">{name}</CustomText>
45:         <Section>
46:           <Rating>
47:             {ratingArray.map((_, i) => (
48:               <SvgXml
49:                 key={`star-${placeId}-${i}`}
50:                 xml={star}
51:                 width={20}
52:                 height={20}
53:               />
54:             ))}
55:           </Rating>
56:           <OperationStatus>
57:             {isClosedTemporarily && (
58:               <CustomText variant="error">CLOSED TEMPORARILY</CustomText>
59:             )}
60:             {isOpenNow && <SvgXml xml={open} width={20} height={20} />}
61:             <Spacer position="left" size="large">
62:               <Icon source={{ uri: icon }} />
63:             </Spacer>
64:           </OperationStatus>
65:         </Section>
66:         <Address>{address}</Address>
67:       </Info>
68:     </RestaurantCard>
69:   );
70: };

================
File: src/features/customer/restaurants/components/RestaurantInfoCard.styles.js
================
 1: import { Image, View, Text } from 'react-native';
 2: import { Card } from 'react-native-paper';
 3: import styled from 'styled-components/native';
 4: 
 5: export const RestaurantCard = styled(Card)`
 6:   background-color: ${(props) => props.theme.colors.bg.primary};
 7:   width: 95%;
 8:   align-self: center;
 9: `;
10: 
11: export const RestaurantCardCover = styled(Card.Cover)`
12:   padding: ${(props) => props.theme.space[3]};
13:   background-color: ${(props) => props.theme.colors.bg.primary};
14: `;
15: 
16: export const Address = styled(Text)`
17:   font-family: ${(props) => props.theme.fonts.body};
18:   font-size: ${(props) => props.theme.fontSizes.caption};
19: `;
20: 
21: export const Info = styled(View)`
22:   padding: ${(props) => props.theme.space[3]};
23: `;
24: 
25: export const Section = styled(View)`
26:   flex-direction: row;
27:   align-items: center;
28: `;
29: 
30: export const Rating = styled(View)`
31:   flex-direction: row;
32:   padding-top: ${(props) => props.theme.space[2]};
33:   padding-bottom: ${(props) => props.theme.space[2]};
34: `;
35: 
36: export const OperationStatus = styled(View)`
37:   flex: 1;
38:   flex-direction: row;
39:   justify-content: flex-end;
40: `;
41: 
42: export const Icon = styled(Image)`
43:   width: 15px;
44:   height: 15px;
45: `;

================
File: src/features/customer/restaurants/components/RestaurantList.styles.js
================
 1: import { FlatList } from "react-native";
 2: import { Button } from "react-native-paper";
 3: import styled from "styled-components/native";
 4: 
 5: import { colors } from "../../../../infrastructure/theme/colors";
 6: 
 7: export const RestaurantList = styled(FlatList).attrs({
 8:   contentContainerStyle: {
 9:     padding: 16,
10:   },
11: })``;
12: 
13: export const OrderButton = styled(Button).attrs({
14:   color: colors.brand.primary,
15: })`
16:   padding: ${(props) => props.theme.space[2]};
17:   width: 80%;
18:   align-self: center;
19: `;

================
File: src/features/customer/restaurants/components/RestaurantMenu.js
================
 1: import React from "react";
 2: import { View, Text } from "react-native";
 3: import { List, Divider } from "react-native-paper";
 4: 
 5: const RestaurantMenu = () => (
 6:   <View>
 7:     <Text style={{ fontSize: 24, margin: 16 }}>Menu</Text>
 8:     <List.Accordion
 9:       title="Menu"
10:       left={(props) => <List.Icon {...props} icon="bread-slice" />}
11:     >
12:       {Array.from({ length: 30 }, (_, index) => (
13:         <List.Item key={index} title={`Item ${index + 1}`} />
14:       ))}
15:     </List.Accordion>
16:     <Divider />
17:   </View>
18: );
19: 
20: export default RestaurantMenu;

================
File: src/features/customer/restaurants/components/RestaurantTabBar.js
================
 1: import React from "react";
 2: import styled from "styled-components/native";
 3: import { TabBar as OriginalTabBar } from "react-native-tab-view";
 4: 
 5: const CustomTabBarContainer = styled(OriginalTabBar).attrs((props) => ({
 6:   indicatorStyle: {
 7:     backgroundColor: props.theme.colors.text.primary,
 8:   },
 9:   labelStyle: {
10:     color: props.theme.colors.text.primary,
11:   },
12: }))`
13:   background-color: ${(props) => props.theme.colors.bg.primary};
14: `;
15: 
16: const TabBar = (props) => {
17:   const { routes, scrollToTab, setIndex } = props;
18: 
19:   return (
20:     <CustomTabBarContainer
21:       {...props}
22:       onTabPress={({ route, preventDefault }) => {
23:         preventDefault();
24:         const tabIndex = routes.findIndex((r) => r.key === route.key);
25:         scrollToTab(route.key, tabIndex);
26:       }}
27:     />
28:   );
29: };
30: 
31: export default TabBar;

================
File: src/features/customer/restaurants/components/Reviews.js
================
 1: import React from "react";
 2: import { View, Text } from "react-native";
 3: import { List, Divider } from "react-native-paper";
 4: 
 5: const Reviews = () => (
 6:   <View>
 7:     <Text style={{ fontSize: 24, margin: 16 }}>Reviews</Text>
 8:     <List.Accordion
 9:       title="Reviews"
10:       left={(props) => <List.Icon {...props} icon="star" />}
11:     >
12:       {Array.from({ length: 50 }, (_, index) => (
13:         <List.Item key={index} title={`Review ${index + 1}`} />
14:       ))}
15:     </List.Accordion>
16:     <Divider />
17:   </View>
18: );
19: 
20: export default Reviews;

================
File: src/features/customer/restaurants/components/Search.js
================
 1: import React, { useContext, useState, useEffect } from "react";
 2: import { View } from "react-native";
 3: import { Searchbar } from "react-native-paper";
 4: import styled from "styled-components/native";
 5: 
 6: const SearchContainer = styled(View)`
 7:   padding: ${(props) => props.theme.space[3]};
 8:   background-color: ${(props) => props.theme.colors.brand.secondary};
 9: `;
10: 
11: export const Search = () => {
12:   keyword = "TestKeyword";
13:   const [searchKeyword, setSearchKeyword] = useState(keyword);
14: 
15:   useEffect(() => {
16:     setSearchKeyword(keyword);
17:   }, [keyword]);
18: 
19:   return (
20:     <SearchContainer>
21:       <Searchbar
22:         placeholder="Search"
23:         value={searchKeyword}
24:         onChangeText={(text) => setSearchKeyword(text)}
25:         style={{ backgroundColor: "#ffffff" }}
26:       />
27:     </SearchContainer>
28:   );
29: };

================
File: src/features/customer/restaurants/components/TabNavigation.js
================
 1: import React from "react";
 2: import { TabView, SceneMap } from "react-native-tab-view";
 3: import { Animated } from "react-native";
 4: import RestaurantMenu from "./RestaurantMenu";
 5: import Reviews from "./Reviews";
 6: import Others from "./Others";
 7: import TabBar from "./RestaurantTabBar";
 8: 
 9: const renderSceneMap = {
10:   menu: RestaurantMenu,
11:   reviews: Reviews,
12:   others: Others,
13: };
14: 
15: const TabNavigation = ({
16:   index,
17:   setIndex,
18:   routes,
19:   layout,
20:   renderOpacity,
21:   scrollToTab,
22:   heights,
23: }) => {
24:   return (
25:     <Animated.View style={{ opacity: renderOpacity }}>
26:       <TabView
27:         navigationState={{ index, routes }}
28:         renderScene={SceneMap(renderSceneMap)}
29:         renderTabBar={(props) => (
30:           <TabBar
31:             {...props}
32:             routes={routes}
33:             scrollToTab={scrollToTab}
34:             setIndex={setIndex}
35:           />
36:         )}
37:         onIndexChange={setIndex}
38:         initialLayout={{ width: layout.width }}
39:       />
40:     </Animated.View>
41:   );
42: };
43: 
44: export default TabNavigation;

================
File: src/features/customer/restaurants/hooks/useReservationHandler.js
================
 1: import { useState } from "react";
 2: import { Animated } from "react-native";
 3: 
 4: const useReservationHandler = () => {
 5:   const [isReservation, setIsReservation] = useState(false);
 6:   const [isShowReservationContent, setIsShowReservationContent] =
 7:     useState(false);
 8:   const [opacity] = useState(new Animated.Value(1));
 9: 
10:   const animateAndSwitch = (newIsReservation) => {
11:     Animated.timing(opacity, {
12:       toValue: 0,
13:       duration: 200,
14:       useNativeDriver: true,
15:     }).start(() => {
16:       setIsReservation(newIsReservation);
17:       setTimeout(() => {
18:         setIsShowReservationContent(newIsReservation);
19:         Animated.timing(opacity, {
20:           toValue: 1,
21:           duration: 200,
22:           useNativeDriver: true,
23:         }).start();
24:       }, 200);
25:     });
26:   };
27: 
28:   return {
29:     isReservation,
30:     isShowReservationContent,
31:     opacity,
32:     animateAndSwitch,
33:   };
34: };
35: 
36: export default useReservationHandler;

================
File: src/features/customer/restaurants/hooks/useScrollHandler.js
================
 1: import { useState, useCallback } from "react";
 2: 
 3: const useScrollHandler = (routes, heights, setIndex) => {
 4:   const handleScroll = useCallback(
 5:     (event) => {
 6:       const scrollYValue = event.nativeEvent.contentOffset.y;
 7:       let accumulatedHeight = heights.restaurantInfoCard + heights.switch;
 8:       for (let i = 0; i < routes.length; i++) {
 9:         if (
10:           scrollYValue <
11:           accumulatedHeight + (heights.content[routes[i].key] || 0) / 2
12:         ) {
13:           setIndex(i);
14:           break;
15:         }
16:         accumulatedHeight += heights.content[routes[i].key] || 0;
17:       }
18:     },
19:     [routes, heights, setIndex]
20:   );
21: 
22:   return handleScroll;
23: };
24: 
25: export default useScrollHandler;

================
File: src/features/customer/restaurants/screens/RestaurantDetailScreen.js
================
  1: import React, { useState, useRef, useEffect } from "react";
  2: import { Animated, Dimensions, View } from "react-native";
  3: import styled from "styled-components/native";
  4: import { IconButton } from "react-native-paper";
  5: 
  6: import { CustomText } from "../../../../components/CustomText/CustomText";
  7: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
  8: import SwitchContainer from "../../../../components/Switch/Switch";
  9: import WebApp from "../../../../components/WebApp/WebApp";
 10: import ErrorBoundary from "../../../../components/ErrorBoundary/ErrorBoundary";
 11: 
 12: import { RestaurantInfoCard } from "../components/RestaurantInfoCard";
 13: import RestaurantMenu from "../components/RestaurantMenu";
 14: import Reviews from "../components/Reviews";
 15: import Others from "../components/Others";
 16: import TabNavigation from "../components/TabNavigation";
 17: import useScrollHandler from "../hooks/useScrollHandler";
 18: import useReservationHandler from "../hooks/useReservationHandler";
 19: 
 20: const Spacing = styled.View`
 21:   padding-bottom: ${(props) => props.theme.space[2]};
 22: `;
 23: 
 24: export const Header = styled.View`
 25:   flex-direction: row;
 26:   align-items: center;
 27:   justify-content: center;
 28:   padding: ${(props) => props.theme.space[2]};
 29:   position: relative;
 30:   background-color: ${(props) => props.theme.colors.bg.primary};
 31: `;
 32: 
 33: export const CloseButtonWrapper = styled.View`
 34:   position: absolute;
 35:   left: ${(props) => props.theme.space[2]};
 36: `;
 37: 
 38: const RestaurantDetailScreen = ({ route, navigation }) => {
 39:   const { restaurant, openReservationView } = route.params;
 40:   const layout = useRef(Dimensions.get("window")).current;
 41:   const [index, setIndex] = useState(0);
 42:   const [routes] = useState([
 43:     { key: "menu", title: "Menu" },
 44:     { key: "reviews", title: "Reviews" },
 45:     { key: "others", title: "Others" },
 46:   ]);
 47: 
 48:   const scrollY = useRef(new Animated.Value(0)).current;
 49:   const scrollViewRef = useRef(null);
 50: 
 51:   const [heights, setHeights] = useState({
 52:     restaurantInfoCard: 0,
 53:     switch: 0,
 54:     content: {},
 55:   });
 56: 
 57:   useEffect(() => {
 58:     if (openReservationView) {
 59:       animateAndSwitch(true);
 60:     }
 61:   }, [openReservationView]);
 62: 
 63:   const { isReservation, isShowReservationContent, opacity, animateAndSwitch } =
 64:     useReservationHandler();
 65: 
 66:   const [scrollEnabled, setScrollEnabled] = useState(true);
 67: 
 68:   const handleScroll = useScrollHandler(routes, heights, setIndex);
 69: 
 70:   const scrollToTab = (tabKey, newIndex) => {
 71:     let yPosition = heights.restaurantInfoCard + heights.switch;
 72:     for (let i = 0; i < routes.length; i++) {
 73:       if (routes[i].key === tabKey) break;
 74:       yPosition += heights.content[routes[i].key] || 0;
 75:     }
 76:     scrollViewRef.current.scrollTo({ y: yPosition, animated: true });
 77:     setIndex(newIndex);
 78:   };
 79: 
 80: 
 81:   const handleInteractionStart = () => {
 82:     setScrollEnabled(false);
 83:   };
 84: 
 85: 
 86:   const handleInteractionEnd = () => {
 87:     setScrollEnabled(true);
 88:   };
 89: 
 90:   return (
 91:     <SafeArea>
 92:       <Header>
 93:         {}
 94:         <CloseButtonWrapper>
 95:           <IconButton
 96:             icon="arrow-left"
 97:             size={24}
 98:             onPress={() => navigation.goBack()}
 99:             accessibilityLabel="Close"
100:           />
101:         </CloseButtonWrapper>
102: 
103:         {}
104:         <CustomText variant="title">RestaurantDetail</CustomText>
105:       </Header>
106:       <View style={{ flex: 1 }}>
107:         <Animated.ScrollView
108:           scrollEnabled={scrollEnabled}
109:           ref={scrollViewRef}
110:           scrollEventThrottle={16}
111:           onScroll={Animated.event(
112:             [{ nativeEvent: { contentOffset: { y: scrollY } } }],
113:             { listener: handleScroll, useNativeDriver: false }
114:           )}
115:           stickyHeaderIndices={isReservation ? [] : [2]}
116:         >
117:           <Spacing
118:             onLayout={(event) =>
119:               setHeights({
120:                 ...heights,
121:                 restaurantInfoCard: event.nativeEvent.layout.height,
122:               })
123:             }
124:           >
125:             <RestaurantInfoCard restaurant={restaurant} elevation={0} />
126:           </Spacing>
127: 
128:           <View
129:             onLayout={(event) =>
130:               setHeights({
131:                 ...heights,
132:                 switch: event.nativeEvent.layout.height,
133:               })
134:             }
135:           >
136:             <SwitchContainer
137:               isOn={isReservation}
138:               setIsOn={(newValue) => animateAndSwitch(newValue)}
139:               leftLabel="General"
140:               rightLabel="Reservation"
141:               variant="default"
142:             />
143:           </View>
144: 
145:           {!isShowReservationContent && !isReservation && (
146:             <TabNavigation
147:               index={index}
148:               setIndex={setIndex}
149:               routes={routes}
150:               layout={layout}
151:               renderOpacity={opacity}
152:               scrollToTab={scrollToTab}
153:               heights={heights}
154:             />
155:           )}
156: 
157:           {!isShowReservationContent &&
158:             !isReservation &&
159:             routes.map((route) => (
160:               <Animated.View key={route.key} style={{ opacity }}>
161:                 <View
162:                   onLayout={(event) =>
163:                     setHeights({
164:                       ...heights,
165:                       content: {
166:                         ...heights.content,
167:                         [route.key]: event.nativeEvent.layout.height,
168:                       },
169:                     })
170:                   }
171:                 >
172:                   {React.createElement(
173:                     route.key === "menu"
174:                       ? RestaurantMenu
175:                       : route.key === "reviews"
176:                       ? Reviews
177:                       : Others
178:                   )}
179:                 </View>
180:               </Animated.View>
181:             ))}
182: 
183:           {isShowReservationContent && isReservation && (
184:             <Animated.View style={{ opacity, flex: 1 }}>
185:               <ErrorBoundary>
186:                 <WebApp
187:                   onInteractionStart={handleInteractionStart}
188:                   onInteractionEnd={handleInteractionEnd}
189:                 />
190:               </ErrorBoundary>
191:             </Animated.View>
192:           )}
193:         </Animated.ScrollView>
194:       </View>
195:     </SafeArea>
196:   );
197: };
198: 
199: export { RestaurantDetailScreen };

================
File: src/features/customer/restaurants/screens/RestaurantsScreen.js
================
 1: import React, { useContext, useState } from "react";
 2: import { View, TouchableOpacity } from "react-native";
 3: import { ActivityIndicator, Colors } from "react-native-paper";
 4: import styled from "styled-components/native";
 5: 
 6: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
 7: import { FadeInView } from "../../../../components/FadeInView/FadeInView";
 8: import { Spacer } from "../../../../components/Spacer/Spacer";
 9: 
10: import { restaurants } from "../../../../data/mockData";
11: 
12: import { Search } from "../components/Search";
13: import { RestaurantList } from "../components/RestaurantList.styles";
14: import { RestaurantInfoCard } from "../components/RestaurantInfoCard";
15: 
16: const LoadingContainer = styled(View)`
17:   position: absolute;
18:   top: 50%;
19:   left: 50%;
20: `;
21: 
22: const Loading = styled(ActivityIndicator)`
23:   margin-left: -25px;
24: `;
25: 
26: export const RestaurantsScreen = ({ navigation }) => {
27:   const [isToggled, setIsToggled] = useState(false);
28: 
29:   return (
30:     <SafeArea>
31:       <Search
32:         isFavouritesToggled={isToggled}
33:         onFavouritesToggle={() => setIsToggled(!isToggled)}
34:       />
35:       <RestaurantList
36:         data={restaurants}
37:         renderItem={({ item }) => {
38:           return (
39:             <TouchableOpacity
40:               onPress={() =>
41:                 navigation.navigate("RestaurantDetailScreen", {
42:                   restaurant: item,
43:                 })
44:               }
45:             >
46:               <Spacer position="bottom" size="large">
47:                 <FadeInView>
48:                   <RestaurantInfoCard restaurant={item} />
49:                 </FadeInView>
50:               </Spacer>
51:             </TouchableOpacity>
52:           );
53:         }}
54:         keyExtractor={(item) => item.name}
55:       />
56:     </SafeArea>
57:   );
58: };

================
File: src/features/customer/settings/screens/AccountSettingsScreen.js
================
 1: import React, { useState } from "react";
 2: import { IconButton, Avatar } from "react-native-paper";
 3: 
 4: 
 5: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
 6: import { Separator } from "../../../../components/Separator/Separator";
 7: import { CustomText } from "../../../../components/CustomText/CustomText";
 8: 
 9: 
10: import { users } from "../../../../data/mockData";
11: 
12: 
13: import {
14:   SettingsContainer,
15:   Header,
16:   CloseButtonWrapper,
17:   SectionTitle,
18:   FrameLine,
19:   ProfileContainer,
20:   ItemContainer,
21:   ItemTextContainer,
22:   BoldText,
23:   InfoText,
24: } from "./AccountSettingsScreen.styles";
25: 
26: export const AccountSettingsScreen = ({ navigation }) => {
27:   const user = users[0];
28: 
29:   return (
30:     <SafeArea>
31:       <SettingsContainer>
32:         {}
33:         <Header>
34:           {}
35:           <CloseButtonWrapper>
36:             <IconButton
37:               icon="close"
38:               size={24}
39:               onPress={() => navigation.goBack()}
40:             />
41:           </CloseButtonWrapper>
42: 
43:           {}
44:           <CustomText variant="title">SeatMaster Account</CustomText>
45:         </Header>
46: 
47:         {}
48:         <FrameLine>
49:           <SectionTitle variant="h4">Account Info</SectionTitle>
50: 
51:           {}
52:           <ProfileContainer>
53:             <Avatar.Image size={80} source={user.profileImage} />
54:           </ProfileContainer>
55: 
56:           {}
57:           <SectionTitle variant="h5">Basic Info</SectionTitle>
58: 
59:           {}
60:           <ItemContainer>
61:             <ItemTextContainer>
62:               <BoldText variant="body">Name</BoldText>
63:               <InfoText variant="body">{user.username}</InfoText>
64:             </ItemTextContainer>
65:             <IconButton icon="chevron-right" size={24} />
66:           </ItemContainer>
67:           <Separator type="full" />
68: 
69:           {}
70:           <ItemContainer>
71:             <ItemTextContainer>
72:               <BoldText variant="body">Phone Number</BoldText>
73:               <InfoText variant="body">{user.phoneNumber}</InfoText>
74:             </ItemTextContainer>
75:             <IconButton icon="chevron-right" size={24} />
76:           </ItemContainer>
77:           <Separator type="full" />
78: 
79:           {}
80:           <ItemContainer>
81:             <ItemTextContainer>
82:               <BoldText variant="body">Email</BoldText>
83:               <InfoText variant="body">{user.email}</InfoText>
84:             </ItemTextContainer>
85:             <IconButton icon="chevron-right" size={24} />
86:           </ItemContainer>
87:           <Separator type="full" />
88:         </FrameLine>
89:       </SettingsContainer>
90:     </SafeArea>
91:   );
92: };

================
File: src/features/customer/settings/screens/AccountSettingsScreen.styles.js
================
 1: import styled from "styled-components/native";
 2: import { ScrollView, View } from "react-native";
 3: import { CustomText } from "../../../../components/CustomText/CustomText";
 4: 
 5: export const SettingsContainer = styled(ScrollView)`
 6:   background-color: ${(props) => props.theme.colors.bg.primary};
 7: `;
 8: 
 9: export const Header = styled.View`
10:   flex-direction: row;
11:   align-items: center;
12:   justify-content: center;
13:   padding: ${(props) => props.theme.space[2]};
14:   position: relative;
15: `;
16: 
17: export const CloseButtonWrapper = styled.View`
18:   position: absolute;
19:   left: ${(props) => props.theme.space[2]};
20: `;
21: 
22: export const SectionTitle = styled(CustomText)`
23:   padding: ${(props) => props.theme.space[3]} ${(props) => props.theme.space[3]};
24:   font-weight: ${(props) => props.theme.fontWeights.bold};
25: `;
26: 
27: export const FrameLine = styled.View`
28:   border-width: 1px;
29:   border-color: rgba(0, 0, 0, 0.1);
30:   margin: ${(props) => props.theme.space[1]};
31:   border-radius: 8px;
32: `;
33: 
34: export const ProfileContainer = styled.View`
35:   flex-direction: row;
36:   align-items: center;
37:   padding: ${(props) => props.theme.space[3]};
38: `;
39: 
40: export const ItemContainer = styled.View`
41:   flex-direction: row;
42:   justify-content: space-between;
43:   align-items: center;
44:   padding-vertical: ${(props) => props.theme.space[0]};
45:   padding-horizontal: ${(props) => props.theme.space[3]};
46: `;
47: 
48: export const ItemTextContainer = styled.View`
49:   flex-direction: column;
50: `;
51: 
52: export const BoldText = styled(CustomText)`
53:   font-weight: ${(props) => props.theme.fontWeights.bold};
54: `;
55: 
56: export const InfoText = styled(CustomText)`
57:   color: ${(props) => props.theme.colors.text.secondary};
58: `;

================
File: src/features/customer/settings/screens/SettingsScreen.js
================
  1: import React from "react";
  2: import { TouchableOpacity, View } from "react-native";
  3: import { List, Avatar, Divider } from "react-native-paper";
  4: import styled from "styled-components/native";
  5: 
  6: import { useAuthentication } from "../../../../services/AuthenticationContext";
  7: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
  8: import { Spacer } from "../../../../components/Spacer/Spacer";
  9: import { CustomText } from "../../../../components/CustomText/CustomText";
 10: import { Separator } from "../../../../components/Separator/Separator";
 11: 
 12: 
 13: import { users } from "../../../../data/mockData";
 14: 
 15: 
 16: const SettingsContainer = styled.ScrollView`
 17:   background-color: ${(props) => props.theme.colors.bg.primary};
 18: `;
 19: 
 20: const ProfileContainer = styled.View`
 21:   flex-direction: row;
 22:   justify-content: space-between;
 23:   align-items: center;
 24:   padding: ${(props) => props.theme.space[3]};
 25:   background-color: ${(props) => props.theme.colors.bg.primary};
 26:   border-bottom-width: 1px;
 27:   border-bottom-color: ${(props) => props.theme.colors.ui.tertiary};
 28: `;
 29: 
 30: const UserInfoContainer = styled.View`
 31:   flex: 1;
 32:   margin-right: ${(props) => props.theme.space[2]};
 33:   align-items: flex-start;
 34: `;
 35: 
 36: const AvatarContainer = styled.View`
 37:   align-items: center;
 38:   justify-content: center;
 39: `;
 40: 
 41: const SettingsItem = styled(List.Item)`
 42:   padding: ${(props) => props.theme.space[2]};
 43: `;
 44: 
 45: const EmailText = styled(CustomText)`
 46:   color: ${(props) => props.theme.colors.text.secondary};
 47: `;
 48: 
 49: const SectionHeader = styled.View`
 50:   padding: ${(props) => props.theme.space[2]};
 51:   background-color: ${(props) => props.theme.colors.bg.secondary};
 52: `;
 53: 
 54: const SectionTitle = styled(CustomText)`
 55:   font-weight: ${(props) => props.theme.fontWeights.bold};
 56:   color: ${(props) => props.theme.colors.text.secondary};
 57: `;
 58: 
 59: export const SettingsScreen = ({ navigation }) => {
 60:   const { onLogout } = useAuthentication();
 61:   const user = users[0];
 62: 
 63:   return (
 64:     <SafeArea>
 65:       <SettingsContainer>
 66:         {}
 67:         <ProfileContainer>
 68:           <UserInfoContainer>
 69:             <CustomText variant="h3">{user.username}</CustomText>
 70:             <Spacer position="top" size="small" />
 71:             <EmailText variant="caption">{user.email}</EmailText>
 72:             <Spacer position="top" size="small" />
 73:             <EmailText variant="caption">{user.phoneNumber}</EmailText>
 74:           </UserInfoContainer>
 75:           <AvatarContainer>
 76:             <TouchableOpacity onPress={() => {}}>
 77:               <Avatar.Image
 78:                 size={80}
 79:                 source={user.profileImage}
 80:                 backgroundColor={(props) => props.theme.colors.brand.primary}
 81:               />
 82:             </TouchableOpacity>
 83:           </AvatarContainer>
 84:         </ProfileContainer>
 85: 
 86:         {}
 87:         <SectionHeader>
 88:           <SectionTitle variant="body">ACCOUNT</SectionTitle>
 89:         </SectionHeader>
 90:         <List.Section>
 91:           <SettingsItem
 92:             title="Account Settings"
 93:             description="Manage your personal information"
 94:             left={(props) => (
 95:               <List.Icon
 96:                 {...props}
 97:                 color={(props) => props.theme.colors.text.primary}
 98:                 icon="account-cog"
 99:               />
100:             )}
101:             onPress={() => navigation.navigate("AccountSettings")}
102:           />
103:           <Divider />
104:           <SettingsItem
105:             title="Reservations"
106:             description="View and manage your restaurant reservations"
107:             left={(props) => (
108:               <List.Icon
109:                 {...props}
110:                 color={(props) => props.theme.colors.text.primary}
111:                 icon="book"
112:               />
113:             )}
114:             onPress={() => navigation.navigate("Reservations")}
115:           />
116:           <Divider />
117:           <SettingsItem
118:             title="Payment Methods"
119:             description="Manage your saved payment options"
120:             left={(props) => (
121:               <List.Icon
122:                 {...props}
123:                 color={(props) => props.theme.colors.text.primary}
124:                 icon="credit-card"
125:               />
126:             )}
127:             onPress={() => navigation.navigate("PaymentMethods")}
128:           />
129:         </List.Section>
130: 
131:         {}
132:         <SectionHeader>
133:           <SectionTitle variant="body">PREFERENCES</SectionTitle>
134:         </SectionHeader>
135:         <List.Section>
136:           <SettingsItem
137:             title="Notifications"
138:             description="Manage your notification settings"
139:             left={(props) => (
140:               <List.Icon
141:                 {...props}
142:                 color={(props) => props.theme.colors.text.primary}
143:                 icon="bell"
144:               />
145:             )}
146:             onPress={() => {}}
147:           />
148:           <Divider />
149:           <SettingsItem
150:             title="Language"
151:             description="Change your preferred language"
152:             left={(props) => (
153:               <List.Icon
154:                 {...props}
155:                 color={(props) => props.theme.colors.text.primary}
156:                 icon="translate"
157:               />
158:             )}
159:             onPress={() => {}}
160:           />
161:           <Divider />
162:           <SettingsItem
163:             title="Appearance"
164:             description="Customize the app's look and feel"
165:             left={(props) => (
166:               <List.Icon
167:                 {...props}
168:                 color={(props) => props.theme.colors.text.primary}
169:                 icon="palette"
170:               />
171:             )}
172:             onPress={() => {}}
173:           />
174:         </List.Section>
175: 
176:         {}
177:         <SectionHeader>
178:           <SectionTitle variant="body">SUPPORT</SectionTitle>
179:         </SectionHeader>
180:         <List.Section>
181:           <SettingsItem
182:             title="Help"
183:             description="Get support and read FAQs"
184:             left={(props) => (
185:               <List.Icon
186:                 {...props}
187:                 color={(props) => props.theme.colors.text.primary}
188:                 icon="help-circle"
189:               />
190:             )}
191:             onPress={() => {}}
192:           />
193:           <Divider />
194:           <SettingsItem
195:             title="About"
196:             description="Learn more about SeatMaster"
197:             left={(props) => (
198:               <List.Icon
199:                 {...props}
200:                 color={(props) => props.theme.colors.text.primary}
201:                 icon="information"
202:               />
203:             )}
204:             onPress={() => {}}
205:           />
206:           <Divider />
207:           <SettingsItem
208:             title="Logout"
209:             description="Sign out from your account"
210:             left={(props) => (
211:               <List.Icon
212:                 {...props}
213:                 color={(props) => props.theme.colors.text.error}
214:                 icon="logout"
215:               />
216:             )}
217:             onPress={() => {
218:               onLogout();
219:             }}
220:           />
221:         </List.Section>
222:         <Spacer position="bottom" size="large" />
223:       </SettingsContainer>
224:     </SafeArea>
225:   );
226: };

================
File: src/features/merchant/dashboard/components/CounterSeats.js
================
 1: import React from "react";
 2: import styled from "styled-components/native";
 3: import { CustomText } from "../../../../components/CustomText/CustomText";
 4: import { SharedChairsRow, SharedChairItem } from "./SharedTableStyles.styles";
 5: 
 6: const CounterContainer = styled.View`
 7:   margin-bottom: ${({ theme }) => theme.space[1]};
 8:   padding: ${({ theme }) => theme.space[2]};
 9: `;
10: 
11: export const CounterSeats = ({ counterSeats }) => {
12:   return (
13:     <CounterContainer>
14:       <CustomText variant="label">Counter</CustomText>
15:       <SharedChairsRow>
16:         {counterSeats.map((seat) => {
17:           const seatData =
18:             typeof seat === "object" ? seat : { id: seat, status: "empty" };
19:           return (
20:             <SharedChairItem
21:               key={seatData.id}
22:               status={seatData.status || "empty"}
23:               style={{ width: 40, height: 40, margin: 4 }}
24:             >
25:               <CustomText variant="body">{seatData.id}</CustomText>
26:             </SharedChairItem>
27:           );
28:         })}
29:       </SharedChairsRow>
30:     </CounterContainer>
31:   );
32: };
33: 
34: export default CounterSeats;

================
File: src/features/merchant/dashboard/components/SeatView.js
================
 1: import React from "react";
 2: import { ScrollView } from "react-native";
 3: import styled from "styled-components/native";
 4: import { CustomText } from "../../../../components/CustomText/CustomText";
 5: import { Separator } from "../../../../components/Separator/Separator";
 6: import {
 7:   SharedTableItem,
 8:   SharedChairItem,
 9:   SharedChairsRow,
10:   VerticalSeparator as DefaultVerticalSeparator,
11: } from "./SharedTableStyles.styles";
12: import CounterSeats from "./CounterSeats";
13: 
14: const RowContainer = styled.View`
15:   flex-direction: row;
16:   align-items: center;
17:   margin-bottom: ${({ theme }) => theme.space[2]};
18: `;
19: 
20: const TableColumn = styled.View`
21:   width: 60px;
22:   align-items: center;
23: `;
24: 
25: const ChairsColumn = styled.View`
26:   flex: 1;
27:   padding-left: ${({ theme }) => theme.space[2]};
28: `;
29: 
30: const VerticalSeparator = styled(DefaultVerticalSeparator)`
31:   height: 60px;
32: `;
33: 
34: export const SeatView = ({ seatingData, tableStatuses }) => {
35:   return (
36:     <ScrollView>
37:       <CounterSeats counterSeats={seatingData.counterSeats} />
38:       <Separator type="full" />
39:       {seatingData.tables.map((table) => {
40:         const tableStatus = Object.values(tableStatuses || {}).find(
41:           (statusObj) => statusObj.id === table.id
42:         );
43:         return (
44:           <RowContainer key={table.id}>
45:             <TableColumn>
46:               <SharedTableItem
47:                 status={tableStatus ? tableStatus.status : "empty"}
48:                 style={{ width: 60, height: 60 }}
49:               >
50:                 <CustomText variant="label">{table.id}</CustomText>
51:               </SharedTableItem>
52:             </TableColumn>
53:             <VerticalSeparator />
54:             <ChairsColumn>
55:               <SharedChairsRow>
56:                 {table.chairs.map((chair) => {
57:                   const chairData =
58:                     typeof chair === "object"
59:                       ? chair
60:                       : { id: chair, status: "empty" };
61:                   return (
62:                     <SharedChairItem
63:                       key={chairData.id}
64:                       status={chairData.status || "empty"}
65:                       style={{ width: 40, height: 40, margin: 4 }}
66:                     >
67:                       <CustomText variant="body">{chairData.id}</CustomText>
68:                     </SharedChairItem>
69:                   );
70:                 })}
71:               </SharedChairsRow>
72:             </ChairsColumn>
73:           </RowContainer>
74:         );
75:       })}
76:     </ScrollView>
77:   );
78: };

================
File: src/features/merchant/dashboard/components/SharedTableStyles.styles.js
================
 1: import styled from "styled-components/native";
 2: import { TouchableOpacity, View } from "react-native";
 3: 
 4: export const SharedTableItem = styled(TouchableOpacity)`
 5:   background-color: ${({ status, theme }) =>
 6:     status === "occupied"
 7:       ? "#ff4d4d"
 8:       : status === "reserved"
 9:       ? "#ffd11a"
10:       : "#b3ffb3"};
11:   padding: 8px;
12:   border-radius: 8px;
13:   margin-bottom: ${({ theme }) => theme.space[2]};
14:   justify-content: center;
15:   align-items: center;
16:   min-width: 60px;
17:   min-height: 60px;
18: `;
19: 
20: 
21: export const SharedChairItem = styled(TouchableOpacity)`
22:   background-color: ${({ status, theme }) =>
23:     status === "occupied"
24:       ? "#ff4d4d"
25:       : status === "reserved"
26:       ? "#ffd11a"
27:       : "#b3ffb3"};
28:   padding: 4px;
29:   border-radius: 4px;
30:   margin: 4px;
31:   justify-content: center;
32:   align-items: center;
33:   min-width: 40px;
34:   min-height: 40px;
35: `;
36: 
37: export const SharedChairsRow = styled(View)`
38:   flex-direction: row;
39:   flex-wrap: wrap;
40: `;
41: 
42: export const VerticalSeparator = styled(View)`
43:   width: 1px;
44:   background-color: rgba(0, 0, 0, 0.1);
45:   margin-horizontal: ${({ theme }) => theme.space[2]};
46:   align-self: stretch;
47: `;

================
File: src/features/merchant/dashboard/components/TableMatrix.js
================
 1: import React, { useState } from "react";
 2: import { View, Text, useWindowDimensions } from "react-native";
 3: import styled from "styled-components/native";
 4: import { SharedTableItem } from "./SharedTableStyles.styles";
 5: 
 6: const Row = styled.View`
 7:   flex-direction: row;
 8:   margin-bottom: ${({ theme }) => theme.space[2]};
 9: `;
10: 
11: const FIXED_BUTTON_SIZE = 60;
12: const FIXED_MARGIN_RIGHT = 16;
13: 
14: export const TableMatrix = ({
15:   tableStatuses: initialTableStatuses,
16:   onTablePress,
17: }) => {
18:   const [tableStatuses, setTableStatuses] = useState(initialTableStatuses);
19:   const { width: screenWidth } = useWindowDimensions();
20: 
21:   // Calculate maximum rows and columns based on tableStatuses keys (assumed format "row-col")
22:   const entries = Object.values(tableStatuses);
23:   const maxRow =
24:     entries.length > 0 ? Math.max(...entries.map((e) => e.row)) : 0;
25:   const maxCol =
26:     entries.length > 0 ? Math.max(...entries.map((e) => e.col)) : 0;
27:   const rows = maxRow + 1;
28:   const columns = maxCol + 1;
29: 
30:   const horizontalPadding = 32;
31:   const totalRequiredWidth =
32:     columns * FIXED_BUTTON_SIZE + (columns - 1) * FIXED_MARGIN_RIGHT;
33:   const availableWidth = screenWidth - horizontalPadding;
34:   const scale =
35:     totalRequiredWidth > availableWidth
36:       ? availableWidth / totalRequiredWidth
37:       : 1;
38: 
39:   const buttonSize = FIXED_BUTTON_SIZE * scale;
40:   const marginRight = FIXED_MARGIN_RIGHT * scale;
41: 
42:   const handlePress = (row, col, currentStatus) => {
43:     const key = `${row}-${col}`;
44:     const newStatus = currentStatus === "empty" ? "occupied" : "empty";
45:     console.log(
46:       `Table pressed: key=${key}, oldStatus=${currentStatus}, newStatus=${newStatus}`
47:     );
48:     setTableStatuses((prev) => ({
49:       ...prev,
50:       [key]: { id: prev[key]?.id || key, row, col, status: newStatus },
51:     }));
52:     if (onTablePress) {
53:       onTablePress(key, newStatus);
54:     }
55:   };
56: 
57:   return (
58:     <View style={{ padding: 16 }}>
59:       {Array.from({ length: rows }).map((_, rowIndex) => (
60:         <Row key={rowIndex}>
61:           {Array.from({ length: columns }).map((_, colIndex) => {
62:             const key = `${rowIndex}-${colIndex}`;
63:             const entry = tableStatuses[key];
64:             if (entry) {
65:               return (
66:                 <SharedTableItem
67:                   key={entry.id}
68:                   status={entry.status}
69:                   onPress={() => handlePress(rowIndex, colIndex, entry.status)}
70:                   style={{ width: buttonSize, height: buttonSize, marginRight }}
71:                 >
72:                   <Text>{entry.id}</Text>
73:                 </SharedTableItem>
74:               );
75:             } else {
76:               return (
77:                 <View
78:                   key={key}
79:                   style={{ width: buttonSize, height: buttonSize, marginRight }}
80:                 />
81:               );
82:             }
83:           })}
84:         </Row>
85:       ))}
86:     </View>
87:   );
88: };

================
File: src/features/merchant/dashboard/screens/MerchantHomeScreen.js
================
  1: import React, { useState, useEffect, useRef } from "react";
  2: import { Animated, ScrollView, View } from "react-native";
  3: import styled from "styled-components/native";
  4: import SwitchContainer from "../../../../components/Switch/Switch";
  5: import { Separator } from "../../../../components/Separator/Separator";
  6: import { TimeScroll } from "../../../../components/TimeScroll/TimeScroll";
  7: 
  8: import { tableStatuses, seatingData } from "../../../../data/mockData";
  9: 
 10: import { TableMatrix } from "../components/TableMatrix";
 11: import { SeatView } from "../components/SeatView";
 12: import CounterSeats from "../components/CounterSeats";
 13: 
 14: const Container = styled.View`
 15:   flex: 1;
 16:   background-color: ${(props) => props.theme.colors.bg.primary};
 17:   padding: 16px;
 18:   position: relative;
 19: `;
 20: 
 21: const MatrixWrapper = styled.View`
 22:   flex: 1;
 23:   margin-top: 16px;
 24: `;
 25: 
 26: const AnimatedTimeScrollContainer = Animated.createAnimatedComponent(
 27:   styled.View`
 28:     position: absolute;
 29:     right: 16px;
 30:     top: 0;
 31:     bottom: 0;
 32:     justify-content: center;
 33:     align-items: center;
 34:   `
 35: );
 36: 
 37: export const MerchantHomeScreen = () => {
 38:   const [times, setTimes] = useState(generateTimes(5));
 39:   const [selectedTime, setSelectedTime] = useState(times[0]);
 40:   const [isSeatMode, setIsSeatMode] = useState(false);
 41:   const [tableStatusesState, setTableStatusesState] = useState(tableStatuses);
 42:   const overlayOpacity = useRef(new Animated.Value(1)).current;
 43: 
 44:   function generateTimes(count) {
 45:     let timesArray = [];
 46:     let current = new Date();
 47:     current.setSeconds(0);
 48:     current.setMilliseconds(0);
 49:     for (let i = 0; i < count; i++) {
 50:       const hours = current.getHours();
 51:       const minutes = current.getMinutes();
 52:       const timeString = `${hours.toString().padStart(2, "0")}:${minutes
 53:         .toString()
 54:         .padStart(2, "0")}`;
 55:       timesArray.push(timeString);
 56:       current.setHours(current.getHours() + 1);
 57:     }
 58:     return timesArray;
 59:   }
 60: 
 61:   useEffect(() => {
 62:     const updateTimes = () => {
 63:       const newTimes = generateTimes(5);
 64:       setTimes(newTimes);
 65:       setSelectedTime(newTimes[0]);
 66:     };
 67:     updateTimes();
 68:     const interval = setInterval(updateTimes, 6000);
 69:     return () => clearInterval(interval);
 70:   }, []);
 71: 
 72:   const handleTimeChange = (time) => {
 73:     setSelectedTime(time);
 74:     console.log("Time changed to:", time);
 75:   };
 76: 
 77:   const handleTablePress = (key, status) => {
 78:     const newStatus = status === "empty" ? "occupied" : "empty";
 79:     console.log(`Table ${key} changed from ${status} to ${newStatus}`);
 80:     setTableStatusesState((prev) => ({
 81:       ...prev,
 82:       [key]: { ...prev[key], status: newStatus },
 83:     }));
 84:   };
 85: 
 86:   const onScrollBegin = () => {
 87:     Animated.timing(overlayOpacity, {
 88:       toValue: 0,
 89:       duration: 100,
 90:       useNativeDriver: true,
 91:     }).start();
 92:   };
 93: 
 94:   const onScrollEnd = () => {
 95:     Animated.timing(overlayOpacity, {
 96:       toValue: 1,
 97:       duration: 100,
 98:       useNativeDriver: true,
 99:     }).start();
100:   };
101: 
102:   return (
103:     <Container>
104:       <SwitchContainer
105:         isOn={isSeatMode}
106:         setIsOn={setIsSeatMode}
107:         leftLabel="Tables"
108:         rightLabel="Seats"
109:         variant="default"
110:       />
111:       <MatrixWrapper>
112:         {isSeatMode ? (
113:           <Animated.ScrollView
114:             onScrollBeginDrag={onScrollBegin}
115:             onScrollEndDrag={onScrollEnd}
116:             scrollEventThrottle={16}
117:           >
118:             <SeatView
119:               seatingData={seatingData}
120:               tableStatuses={tableStatusesState}
121:             />
122:           </Animated.ScrollView>
123:         ) : (
124:           <>
125:             <TableMatrix
126:               tableStatuses={tableStatusesState}
127:               onTablePress={handleTablePress}
128:             />
129:             <Separator type="full" />
130:             <CounterSeats counterSeats={seatingData.counterSeats} />
131:           </>
132:         )}
133:       </MatrixWrapper>
134:       <AnimatedTimeScrollContainer style={{ opacity: overlayOpacity }}>
135:         <TimeScroll
136:           times={times}
137:           selectedTime={selectedTime}
138:           onTimeChange={handleTimeChange}
139:         />
140:       </AnimatedTimeScrollContainer>
141:     </Container>
142:   );
143: };

================
File: src/features/merchant/reservations/components/ReservationComponents.js
================
  1: import React from "react";
  2: import { TouchableOpacity, View } from "react-native";
  3: import styled from "styled-components/native";
  4: import { CustomText } from "../../../../components/CustomText/CustomText";
  5: import {
  6:   SharedTableItem,
  7:   SharedChairItem,
  8: } from "../../dashboard/components/SharedTableStyles.styles";
  9: import {
 10:   ReservationBlockStyled,
 11:   ReservationName,
 12:   ReservationDetails,
 13:   ReservationPanelStyled,
 14:   ButtonsRow,
 15:   ActionButton,
 16: } from "./ReservationComponents.styles";
 17: 
 18: 
 19: const TableColumn = styled.View`
 20:   width: ${(props) => props.width}px;
 21:   align-items: center;
 22:   border-left-width: 1px;
 23:   border-left-color: ${(props) => props.theme.colors.ui.tertiary};
 24:   padding-horizontal: ${(props) => props.theme.space[2]};
 25:   padding-vertical: ${(props) => props.theme.space[2]};
 26: `;
 27: 
 28: const TableItem = styled.View`
 29:   align-items: center;
 30: `;
 31: 
 32: const ChairsGrid = styled.View`
 33:   flex-direction: column;
 34:   justify-content: center;
 35:   width: 58px;
 36:   margin-top: ${(props) => props.theme.space[1]};
 37: `;
 38: 
 39: const ChairRow = styled.View`
 40:   flex-direction: row;
 41:   justify-content: center;
 42:   margin-top: 1px;
 43: `;
 44: 
 45: const ChairItem = styled(SharedChairItem)`
 46:   width: 22px;
 47:   height: 22px;
 48:   margin: 2px;
 49:   justify-content: center;
 50:   align-items: center;
 51: `;
 52: 
 53: const ShowMoreButton = styled(TouchableOpacity)`
 54:   background-color: ${(props) => props.theme.colors.ui.tertiary};
 55:   padding-horizontal: ${(props) => props.theme.space[1]};
 56:   padding-vertical: 2px;
 57:   border-radius: 4px;
 58:   margin-top: 4px;
 59:   align-items: center;
 60: `;
 61: 
 62: const ButtonText = styled(CustomText)`
 63:   font-size: ${(props) => props.theme.fontSizes.caption};
 64: `;
 65: 
 66: const CounterSeatHeaderContainer = styled.View`
 67:   align-items: center;
 68:   justify-content: center;
 69:   margin-top: 40px;
 70: `;
 71: 
 72: const CounterSeatTitle = styled(CustomText)`
 73:   font-size: ${(props) => props.theme.fontSizes.caption};
 74:   font-weight: ${(props) => props.theme.fontWeights.bold};
 75:   margin-bottom: ${(props) => props.theme.space[1]};
 76: `;
 77: 
 78: // Helper function for arranging chairs in rows
 79: const getChairRows = (chairs, perRow = 2) => {
 80:   const rows = [];
 81:   for (let i = 0; i < chairs.length; i += perRow) {
 82:     rows.push(chairs.slice(i, i + perRow));
 83:   }
 84:   return rows;
 85: };
 86: 
 87: // Calculate the position of a reservation block
 88: const getReservationPosition = (
 89:   reservation,
 90:   tables,
 91:   counterSeats,
 92:   tableWidth,
 93:   counterSeatWidth,
 94:   timeSlotHeight,
 95:   isCounterSeat = false
 96: ) => {
 97:   if (isCounterSeat) {
 98:     const counterSeatIndex = counterSeats.findIndex(
 99:       (seat) => seat.id === reservation.counterSeatId
100:     );
101: 
102:     if (counterSeatIndex === -1) return null;
103: 
104:     const left = counterSeatIndex * counterSeatWidth;
105: 
106:     const [hours, minutes] = reservation.time.split(":").map(Number);
107:     const startMinutes = (hours - 9) * 60 + minutes;
108:     const top = (startMinutes / 30) * timeSlotHeight;
109: 
110:     const height = (reservation.duration / 30) * timeSlotHeight;
111: 
112:     return {
113:       left,
114:       top,
115:       width: counterSeatWidth,
116:       height,
117:     };
118:   } else {
119:     const tableIndex = tables.findIndex(
120:       (table) => table.id === reservation.tableId
121:     );
122: 
123:     if (tableIndex === -1) return null;
124: 
125:     const counterSeatsWidth = counterSeats.length * counterSeatWidth;
126:     const left = counterSeatsWidth + tableIndex * tableWidth;
127: 
128:     const [hours, minutes] = reservation.time.split(":").map(Number);
129:     const startMinutes = (hours - 9) * 60 + minutes;
130:     const top = (startMinutes / 30) * timeSlotHeight;
131: 
132:     const height = (reservation.duration / 30) * timeSlotHeight;
133: 
134:     return {
135:       left,
136:       top,
137:       width: tableWidth,
138:       height,
139:     };
140:   }
141: };
142: 
143: // Table header component
144: export const TableHeader = ({
145:   table,
146:   isExpanded,
147:   toggleExpand,
148:   width = 100,
149: }) => {
150:   const chairRows = getChairRows(table.chairs, 2);
151:   const rowsToDisplay = isExpanded ? chairRows : chairRows.slice(0, 1);
152: 
153:   return (
154:     <TableColumn style={{ width }}>
155:       <TableItem>
156:         <SharedTableItem
157:           status={table.status || "empty"}
158:           style={{ width: width * 0.6, height: 40 }}
159:         >
160:           <CustomText variant="caption">Table {table.id}</CustomText>
161:         </SharedTableItem>
162: 
163:         <ChairsGrid>
164:           {rowsToDisplay.map((row, rowIndex) => (
165:             <ChairRow key={`row-${rowIndex}`}>
166:               {row.map((chair) => {
167:                 const chairData =
168:                   typeof chair === "object"
169:                     ? chair
170:                     : { id: chair, status: "empty" };
171:                 return (
172:                   <ChairItem key={chairData.id} status={chairData.status}>
173:                     <CustomText
174:                       variant="caption"
175:                       style={{ fontSize: 10, fontWeight: "bold" }}
176:                     >
177:                       {chairData.id.toString().slice(-1)}
178:                     </CustomText>
179:                   </ChairItem>
180:                 );
181:               })}
182:             </ChairRow>
183:           ))}
184:         </ChairsGrid>
185: 
186:         {table.chairs.length > 2 && (
187:           <ShowMoreButton onPress={toggleExpand}>
188:             <ButtonText>
189:               {isExpanded ? "Hide" : `+${table.chairs.length - 2}`}
190:             </ButtonText>
191:           </ShowMoreButton>
192:         )}
193:       </TableItem>
194:     </TableColumn>
195:   );
196: };
197: 
198: export const CounterSeatHeader = ({
199:   seat,
200:   isExpanded,
201:   toggleExpand,
202:   width = 60,
203: }) => {
204:   const seatData =
205:     typeof seat === "object" ? seat : { id: seat, status: "empty" };
206: 
207:   return (
208:     <TableColumn style={{ width }}>
209:       <CounterSeatHeaderContainer>
210:         <CounterSeatTitle></CounterSeatTitle>
211:         <ChairItem status={seatData.status || "empty"} onPress={toggleExpand}>
212:           <CustomText
213:             variant="caption"
214:             style={{ fontSize: 10, fontWeight: "bold" }}
215:           >
216:             {seatData.id}
217:           </CustomText>
218:         </ChairItem>
219:       </CounterSeatHeaderContainer>
220:     </TableColumn>
221:   );
222: };
223: 
224: export const ReservationBlock = ({
225:   reservation,
226:   tables,
227:   counterSeats,
228:   isSelected,
229:   onPress,
230:   tableWidth,
231:   counterSeatWidth,
232:   timeSlotHeight,
233:   isCounterSeat = false,
234: }) => {
235:   const position = getReservationPosition(
236:     reservation,
237:     tables,
238:     counterSeats,
239:     tableWidth,
240:     counterSeatWidth,
241:     timeSlotHeight,
242:     isCounterSeat
243:   );
244: 
245:   if (!position) return null;
246: 
247:   return (
248:     <ReservationBlockStyled
249:       {...position}
250:       status={reservation.status}
251:       onPress={() => onPress(reservation)}
252:       isSelected={isSelected}
253:     >
254:       <ReservationName>{reservation.customerName}</ReservationName>
255:       <ReservationDetails>
256:         {reservation.time} • {reservation.people}{" "}
257:         {reservation.people > 1 ? "people" : "person"}
258:       </ReservationDetails>
259:     </ReservationBlockStyled>
260:   );
261: };
262: 
263: export const ReservationDetailsPanel = ({ reservation, onClose }) => {
264:   if (!reservation) return null;
265: 
266:   return (
267:     <ReservationPanelStyled>
268:       <CustomText variant="title">{reservation.customerName}</CustomText>
269:       <View style={{ marginTop: 8 }}>
270:         <CustomText variant="body">
271:           Time: {reservation.time} ({reservation.duration} min)
272:         </CustomText>
273:         <CustomText variant="body">
274:           Party: {reservation.people}{" "}
275:           {reservation.people > 1 ? "people" : "person"}
276:         </CustomText>
277: 
278:         {reservation.isCounterSeat ? (
279:           <CustomText variant="body">
280:             Counter Seat: {reservation.counterSeatId}
281:           </CustomText>
282:         ) : (
283:           <CustomText variant="body">
284:             Table: {reservation.tableId} • Chairs:{" "}
285:             {reservation.chairs ? reservation.chairs.join(", ") : ""}
286:           </CustomText>
287:         )}
288: 
289:         {reservation.note && (
290:           <CustomText variant="body">Note: {reservation.note}</CustomText>
291:         )}
292:       </View>
293: 
294:       <View style={{ marginTop: 16 }}>
295:         <ButtonsRow>
296:           <ActionButton variant="confirm" onPress={onClose}>
297:             <CustomText>Confirm</CustomText>
298:           </ActionButton>
299:           <ActionButton onPress={onClose}>
300:             <CustomText>Cancel</CustomText>
301:           </ActionButton>
302:         </ButtonsRow>
303:       </View>
304:     </ReservationPanelStyled>
305:   );
306: };

================
File: src/features/merchant/reservations/components/ReservationComponents.styles.js
================
  1: import styled from "styled-components/native";
  2: import { TouchableOpacity, View } from "react-native";
  3: import { Animated } from "react-native";
  4: import { CustomText } from "../../../../components/CustomText/CustomText";
  5: 
  6: 
  7: export const TabBar = styled.View`
  8:   flex-direction: row;
  9:   padding: 8px;
 10:   background-color: ${(props) => props.theme.colors.bg.primary};
 11: `;
 12: 
 13: export const Tab = styled.TouchableOpacity`
 14:   flex: 1;
 15:   flex-direction: row;
 16:   align-items: center;
 17:   justify-content: center;
 18:   padding-vertical: 10px;
 19:   background-color: ${(props) => props.theme.colors.bg.primary};
 20:   border-width: ${(props) => (props.active ? "2px" : "1px")};
 21:   border-color: ${(props) =>
 22:     props.active
 23:       ? props.theme.colors.ui.primary
 24:       : props.theme.colors.ui.tertiary};
 25:   border-radius: 6px;
 26:   margin-horizontal: 4px;
 27:   elevation: ${(props) => (props.active ? 2 : 0)};
 28:   shadow-opacity: ${(props) => (props.active ? 0.2 : 0)};
 29:   shadow-radius: 4px;
 30:   shadow-color: #000;
 31:   shadow-offset: 0px 2px;
 32: `;
 33: 
 34: export const TabText = styled(CustomText)`
 35:   margin-left: 8px;
 36:   font-size: ${(props) => props.theme.fontSizes.body};
 37:   color: ${(props) =>
 38:     props.active
 39:       ? props.theme.colors.ui.primary
 40:       : props.theme.colors.text.secondary};
 41:   font-weight: ${(props) => (props.active ? "bold" : "normal")};
 42: `;
 43: 
 44: // Reservation visual elements
 45: export const ReservationBlockStyled = styled(TouchableOpacity)`
 46:   position: absolute;
 47:   left: ${(props) => props.left}px;
 48:   top: ${(props) => props.top}px;
 49:   width: ${(props) => props.width}px;
 50:   height: ${(props) => props.height}px;
 51:   background-color: ${(props) =>
 52:     props.status === "confirmed"
 53:       ? "#b3ffb3"
 54:       : props.status === "pending"
 55:       ? "#ffd11a"
 56:       : "#ff4d4d"};
 57:   border-radius: 5px;
 58:   padding: ${(props) => props.theme.space[1]};
 59:   justify-content: space-between;
 60:   z-index: 1;
 61:   box-sizing: border-box;
 62:   ${(props) =>
 63:     props.isSelected &&
 64:     !props.isPending &&
 65:     `
 66:     border-width: 2px;
 67:     border-color: blue;
 68:   `}
 69: `;
 70: 
 71: export const PendingBorder = styled(Animated.View)`
 72:   position: absolute;
 73:   top: -2px;
 74:   left: -2px;
 75:   right: -2px;
 76:   bottom: -2px;
 77:   border-width: 3px;
 78:   border-color: #ff6b6b;
 79:   border-radius: 7px;
 80:   z-index: 2;
 81:   pointer-events: none;
 82: `;
 83: 
 84: export const ReservationName = styled(CustomText)`
 85:   font-size: ${(props) => props.theme.fontSizes.caption};
 86:   font-weight: ${(props) => props.theme.fontWeights.bold};
 87: `;
 88: 
 89: export const ReservationDetails = styled(CustomText)`
 90:   font-size: ${(props) => props.theme.fontSizes.caption};
 91: `;
 92: 
 93: // Panel styles for details display
 94: export const ReservationPanelStyled = styled.View`
 95:   background-color: ${(props) => props.theme.colors.bg.primary};
 96:   padding: ${(props) => props.theme.space[3]};
 97:   border-top-width: 1px;
 98:   border-top-color: ${(props) => props.theme.colors.ui.tertiary};
 99:   elevation: 5;
100:   shadow-color: #000;
101:   shadow-offset: 0px -2px;
102:   shadow-opacity: 0.1;
103:   shadow-radius: 4px;
104: `;
105: 
106: export const ButtonsRow = styled.View`
107:   flex-direction: row;
108:   justify-content: space-between;
109: `;
110: 
111: export const ActionButton = styled(TouchableOpacity)`
112:   padding: ${(props) => props.theme.space[2]};
113:   border-radius: 5px;
114:   min-width: 100px;
115:   align-items: center;
116:   background-color: ${(props) =>
117:     props.variant === "confirm" ? "#b3ffb3" : "#ff4d4d"};
118: `;

================
File: src/features/merchant/reservations/components/ReservationsGrid.js
================
  1: import React, { useState, useRef, useEffect } from "react";
  2: import { View, ScrollView, Animated, TouchableOpacity } from "react-native";
  3: import styled from "styled-components/native";
  4: import { CustomText } from "../../../../components/CustomText/CustomText";
  5: 
  6: import {
  7:   TableHeader,
  8:   CounterSeatHeader,
  9:   ReservationDetailsPanel,
 10: } from "./ReservationComponents";
 11: 
 12: import {
 13:   PendingBorder,
 14:   ReservationBlockStyled,
 15:   ReservationName,
 16:   ReservationDetails,
 17: } from "./ReservationComponents.styles";
 18: 
 19: const GRID_CONSTANTS = {
 20:   TABLE_WIDTH: 100,
 21:   COUNTER_SEAT_WIDTH: 60,
 22:   TIME_COLUMN_WIDTH: 60,
 23:   TIME_SLOT_HEIGHT: 30,
 24: };
 25: 
 26: const Container = styled.View`
 27:   flex: 1;
 28:   background-color: ${(props) => props.theme.colors.bg.primary};
 29: `;
 30: 
 31: const MainGrid = styled.View`
 32:   flex: 1;
 33:   flex-direction: column;
 34: `;
 35: 
 36: const HeaderContainer = styled.View`
 37:   background-color: ${(props) => props.theme.colors.bg.primary};
 38:   border-bottom-width: 1px;
 39:   border-bottom-color: ${(props) => props.theme.colors.ui.tertiary};
 40:   position: relative;
 41:   z-index: 2;
 42: `;
 43: 
 44: const LeftColumnContainer = styled.View`
 45:   position: absolute;
 46:   left: 0;
 47:   top: 0;
 48:   bottom: 0;
 49:   width: ${({ width }) => width}px;
 50:   background-color: ${(props) => props.theme.colors.bg.primary};
 51:   z-index: 10;
 52:   border-right-width: 1px;
 53:   border-right-color: ${(props) => props.theme.colors.ui.tertiary};
 54: `;
 55: 
 56: const TimeColumn = styled.View`
 57:   width: ${({ width }) => width}px;
 58: `;
 59: 
 60: const TimeSlot = styled.View`
 61:   height: ${({ height }) => height}px;
 62:   border-bottom-width: 1px;
 63:   border-bottom-color: ${(props) => props.theme.colors.ui.tertiary};
 64:   justify-content: center;
 65:   align-items: center;
 66: `;
 67: 
 68: const TimeText = styled(CustomText)`
 69:   font-size: ${(props) => props.theme.fontSizes.caption};
 70: `;
 71: 
 72: const ExpandAllButton = styled.TouchableOpacity`
 73:   background-color: ${(props) => props.theme.colors.ui.disabled};
 74:   padding: 4px 8px;
 75:   border-radius: 12px;
 76:   margin-vertical: 8px;
 77:   align-items: center;
 78:   justify-content: center;
 79:   shadow-color: #000;
 80:   shadow-offset: 0px 2px;
 81:   shadow-opacity: 0.1;
 82:   shadow-radius: 3px;
 83:   elevation: 2;
 84:   width: 80%;
 85:   align-self: center;
 86: `;
 87: 
 88: const ExpandAllButtonText = styled(CustomText)`
 89:   font-size: ${(props) => props.theme.fontSizes.caption};
 90:   color: ${(props) => props.theme.colors.text.primary};
 91:   font-weight: ${(props) => props.theme.fontWeights.bold};
 92: `;
 93: 
 94: const ContentContainer = styled.View`
 95:   flex: 1;
 96:   flex-direction: row;
 97:   position: relative;
 98: `;
 99: 
100: const GridContainer = styled.View`
101:   flex: 1;
102:   position: relative;
103: `;
104: 
105: const TimeColumnHeader = styled.View`
106:   width: ${({ width }) => width}px;
107:   padding: ${(props) => props.theme.space[2]};
108:   padding-top: 40px;
109:   align-items: center;
110:   justify-content: center;
111:   background-color: ${(props) => props.theme.colors.bg.primary};
112: `;
113: 
114: const HeaderScrollView = styled.ScrollView`
115:   flex-direction: row;
116: `;
117: 
118: const HeaderRow = styled.View`
119:   flex-direction: row;
120:   padding-vertical: ${(props) => props.theme.space[2]};
121: `;
122: 
123: const CurrentTimeLine = styled(Animated.View)`
124:   position: absolute;
125:   left: 0;
126:   right: 0;
127:   height: 2px;
128:   background-color: #ff3b30;
129:   z-index: 5;
130: `;
131: 
132: const CurrentTimeIndicator = styled.View`
133:   position: absolute;
134:   left: -5px;
135:   width: 10px;
136:   height: 10px;
137:   border-radius: 5px;
138:   background-color: #ff3b30;
139:   top: -4px;
140: `;
141: 
142: // Utility functions
143: const calculateCurrentTimePosition = (timeSlotHeight) => {
144:   const now = new Date();
145:   const hours = now.getHours();
146:   const minutes = now.getMinutes();
147: 
148:   if (hours < 9 || (hours === 22 && minutes > 30) || hours > 22) {
149:     return -100;
150:   }
151: 
152:   const minutesSince9AM = (hours - 9) * 60 + minutes;
153:   return (minutesSince9AM / 30) * timeSlotHeight;
154: };
155: 
156: // Parse time strings into minutes since midnight
157: const parseTimeToMinutes = (timeStr) => {
158:   const [hours, minutes] = timeStr.split(":").map(Number);
159:   return hours * 60 + minutes;
160: };
161: 
162: // Get ID from item consistently
163: const getItemId = (item) => {
164:   return typeof item === "object" ? item.id : item;
165: };
166: 
167: // Sort all seating items (tables and counter seats) using smart sorting
168: const smartSortSeatingItems = (tables, counterSeats, reservations) => {
169:   if (!tables || !counterSeats || !reservations) {
170:     return [];
171:   }
172: 
173:   // Create a unified array with type information
174:   const allItems = [
175:     ...tables.map((table) => ({
176:       item: table,
177:       type: "table",
178:       id: getItemId(table),
179:     })),
180:     ...counterSeats.map((seat) => ({
181:       item: seat,
182:       type: "counterSeat",
183:       id: getItemId(seat),
184:     })),
185:   ];
186: 
187:   const now = new Date();
188:   const currentTimeInMinutes = now.getHours() * 60 + now.getMinutes();
189: 
190:   // Create a reservation map for quick lookups
191:   const reservationMap = new Map();
192: 
193:   // Process all reservations and organize by table/seat ID
194:   reservations.forEach((res) => {
195:     const itemKey = res.isCounterSeat
196:       ? `counter-${res.counterSeatId}`
197:       : `table-${res.tableId}`;
198: 
199:     if (!reservationMap.has(itemKey)) {
200:       reservationMap.set(itemKey, []);
201:     }
202: 
203:     const startTime = parseTimeToMinutes(res.time);
204:     const endTime = startTime + res.duration;
205: 
206:     reservationMap.get(itemKey).push({
207:       reservation: res,
208:       startTime,
209:       endTime,
210:       timeUntilStart: startTime - currentTimeInMinutes,
211:       timeUntilEnd: endTime - currentTimeInMinutes,
212:     });
213:   });
214: 
215:   // Process each seating item
216:   allItems.forEach((seatingItem) => {
217:     const itemKey = `${seatingItem.type === "table" ? "table" : "counter"}-${
218:       seatingItem.id
219:     }`;
220:     const itemReservations = reservationMap.get(itemKey) || [];
221: 
222:     if (itemReservations.length === 0) {
223:       // No reservations for this item
224:       seatingItem.status = "empty";
225:       seatingItem.priority = Number.MAX_SAFE_INTEGER;
226:       return;
227:     }
228: 
229:     // Find upcoming, current, and past reservations
230:     const upcomingReservations = itemReservations.filter(
231:       (r) => r.timeUntilStart > 0
232:     );
233:     const currentReservations = itemReservations.filter(
234:       (r) => r.timeUntilStart <= 0 && r.timeUntilEnd > 0
235:     );
236:     const pastReservations = itemReservations.filter(
237:       (r) => r.timeUntilEnd <= 0
238:     );
239: 
240:     // Determine status and priority
241:     if (upcomingReservations.length > 0) {
242:       // Sort by closest upcoming start time
243:       upcomingReservations.sort((a, b) => a.timeUntilStart - b.timeUntilStart);
244:       seatingItem.status = "upcoming";
245:       seatingItem.priority = upcomingReservations[0].timeUntilStart;
246:       seatingItem.reservation = upcomingReservations[0].reservation;
247:     } else if (currentReservations.length > 0) {
248:       // Sort by start time (earliest first)
249:       currentReservations.sort((a, b) => a.startTime - b.startTime);
250:       seatingItem.status = "current";
251:       seatingItem.priority = 1000000 + currentReservations[0].startTime;
252:       seatingItem.reservation = currentReservations[0].reservation;
253:     } else if (pastReservations.length > 0) {
254:       // Sort by most recent end time
255:       pastReservations.sort((a, b) => b.endTime - a.endTime);
256:       seatingItem.status = "past";
257:       seatingItem.priority = 2000000 + (1440 - pastReservations[0].endTime);
258:       seatingItem.reservation = pastReservations[0].reservation;
259:     }
260:   });
261: 
262:   // Sort the items
263:   allItems.sort((a, b) => {
264:     // First sort by reservation status
265:     const statusOrder = { upcoming: 0, current: 1, past: 2, empty: 3 };
266:     const aStatus = a.status || "empty";
267:     const bStatus = b.status || "empty";
268: 
269:     if (statusOrder[aStatus] !== statusOrder[bStatus]) {
270:       return statusOrder[aStatus] - statusOrder[bStatus];
271:     }
272: 
273:     // Then sort by priority within the same status
274:     if (a.priority !== b.priority) {
275:       return a.priority - b.priority;
276:     }
277: 
278:     // As a last resort, sort by ID
279:     return a.id.toString().localeCompare(b.id.toString());
280:   });
281: 
282:   return allItems;
283: };
284: 
285: // Traditional sorting: Tables first, then counter seats, both sorted by ID
286: const traditionalSortSeatingItems = (tables, counterSeats) => {
287:   if (!tables || !counterSeats) {
288:     return [];
289:   }
290: 
291:   // Create a unified array with type information, sort by ID numerically
292:   const tableItems = tables
293:     .map((table) => ({
294:       item: table,
295:       type: "table",
296:       id: getItemId(table),
297:     }))
298:     .sort((a, b) => {
299:       // Extract numeric part for sorting
300:       const aNum = parseInt(a.id.toString().replace(/\D/g, "")) || 0;
301:       const bNum = parseInt(b.id.toString().replace(/\D/g, "")) || 0;
302:       return aNum - bNum;
303:     });
304: 
305:   const counterItems = counterSeats
306:     .map((seat) => ({
307:       item: seat,
308:       type: "counterSeat",
309:       id: getItemId(seat),
310:     }))
311:     .sort((a, b) => {
312:       // Extract numeric part for sorting
313:       const aNum = parseInt(a.id.toString().replace(/\D/g, "")) || 0;
314:       const bNum = parseInt(b.id.toString().replace(/\D/g, "")) || 0;
315:       return aNum - bNum;
316:     });
317: 
318:   // Tables first, then counter seats
319:   return [...tableItems, ...counterItems];
320: };
321: 
322: // Main component
323: const ReservationsGrid = ({
324:   timeSlots,
325:   tables,
326:   counterSeats,
327:   reservations,
328:   isSmartSorting = false,
329: }) => {
330:   const {
331:     TABLE_WIDTH,
332:     COUNTER_SEAT_WIDTH,
333:     TIME_COLUMN_WIDTH,
334:     TIME_SLOT_HEIGHT,
335:   } = GRID_CONSTANTS;
336: 
337:   // State variables
338:   const [selectedReservation, setSelectedReservation] = useState(null);
339:   const [currentTimePosition, setCurrentTimePosition] = useState(0);
340:   const [expandedTableIds, setExpandedTableIds] = useState(new Set());
341:   const [expandedCounterSeatIds, setExpandedCounterSeatIds] = useState(
342:     new Set()
343:   );
344:   const [areAllExpanded, setAreAllExpanded] = useState(false);
345:   const [sortedItems, setSortedItems] = useState([]);
346: 
347:   // Pre-compute sorted items for both sorting methods to eliminate waiting when switching
348:   const [traditionalSorted, setTraditionalSorted] = useState([]);
349:   const [smartSorted, setSmartSorted] = useState([]);
350: 
351:   // Animation for breathing effect on pending reservations
352:   const [breathingAnim] = useState(new Animated.Value(0.4));
353: 
354:   // Set up breathing animation
355:   useEffect(() => {
356:     // Create the breathing animation sequence
357:     const breathe = () => {
358:       Animated.sequence([
359:         Animated.timing(breathingAnim, {
360:           toValue: 1,
361:           duration: 1000,
362:           useNativeDriver: false, // Changed to false for border animation
363:         }),
364:         Animated.timing(breathingAnim, {
365:           toValue: 0.4,
366:           duration: 1000,
367:           useNativeDriver: false, // Changed to false for border animation
368:         }),
369:       ]).start(() => breathe()); // Restart animation when complete
370:     };
371: 
372:     // Start the animation
373:     breathe();
374: 
375:     // Clean up
376:     return () => breathingAnim.stopAnimation();
377:   }, []);
378: 
379:   // Pre-compute all sorting options when data changes
380:   useEffect(() => {
381:     const traditional = traditionalSortSeatingItems(tables, counterSeats);
382:     const smart = smartSortSeatingItems(tables, counterSeats, reservations);
383: 
384:     setTraditionalSorted(traditional);
385:     setSmartSorted(smart);
386: 
387:     // Set the current sorted items based on selected mode
388:     setSortedItems(isSmartSorting ? smart : traditional);
389:   }, [tables, counterSeats, reservations]);
390: 
391:   // Update sorted items immediately when sorting method changes
392:   useEffect(() => {
393:     setSortedItems(isSmartSorting ? smartSorted : traditionalSorted);
394:   }, [isSmartSorting, smartSorted, traditionalSorted]);
395: 
396:   useEffect(() => {
397:     const updateTimePosition = () => {
398:       setCurrentTimePosition(calculateCurrentTimePosition(TIME_SLOT_HEIGHT));
399:     };
400: 
401:     updateTimePosition();
402:     const interval = setInterval(updateTimePosition, 60000);
403:     return () => clearInterval(interval);
404:   }, [TIME_SLOT_HEIGHT]);
405: 
406:   // Toggle expansion functions
407:   const toggleExpand = (id, isTable) => {
408:     if (isTable) {
409:       setExpandedTableIds((prevExpanded) => {
410:         const newExpanded = new Set(prevExpanded);
411:         if (newExpanded.has(id)) {
412:           newExpanded.delete(id);
413:         } else {
414:           newExpanded.add(id);
415:         }
416:         return newExpanded;
417:       });
418:     } else {
419:       setExpandedCounterSeatIds((prevExpanded) => {
420:         const newExpanded = new Set(prevExpanded);
421:         if (newExpanded.has(id)) {
422:           newExpanded.delete(id);
423:         } else {
424:           newExpanded.add(id);
425:         }
426:         return newExpanded;
427:       });
428:     }
429:   };
430: 
431:   const toggleAllTables = () => {
432:     if (areAllExpanded) {
433:       setExpandedTableIds(new Set());
434:       setExpandedCounterSeatIds(new Set());
435:     } else {
436:       setExpandedTableIds(new Set(tables.map((table) => getItemId(table))));
437:       setExpandedCounterSeatIds(
438:         new Set(counterSeats.map((seat) => getItemId(seat)))
439:       );
440:     }
441:     setAreAllExpanded(!areAllExpanded);
442:   };
443: 
444:   // Scroll sync handlers
445:   const handleHeaderScroll = (event) => {
446:     if (gridScrollRef.current) {
447:       gridScrollRef.current.scrollTo({
448:         x: event.nativeEvent.contentOffset.x,
449:         y: 0,
450:         animated: false,
451:       });
452:     }
453:   };
454: 
455:   const handleGridScroll = (event) => {
456:     if (headerScrollRef.current) {
457:       headerScrollRef.current.scrollTo({
458:         x: event.nativeEvent.contentOffset.x,
459:         y: 0,
460:         animated: false,
461:       });
462:     }
463:   };
464: 
465:   const handleVerticalScroll = (event) => {
466:     if (leftColumnScrollRef.current) {
467:       leftColumnScrollRef.current.scrollTo({
468:         y: event.nativeEvent.contentOffset.y,
469:         animated: false,
470:       });
471:     }
472:   };
473: 
474:   const handleLeftColumnScroll = (event) => {
475:     if (verticalScrollRef.current) {
476:       verticalScrollRef.current.scrollTo({
477:         y: event.nativeEvent.contentOffset.y,
478:         animated: false,
479:       });
480:     }
481:   };
482: 
483:   // Handle reservation click
484:   const handleReservationPress = (reservation) => {
485:     setSelectedReservation(
486:       selectedReservation?.id === reservation.id ? null : reservation
487:     );
488:   };
489: 
490:   // Refs for synchronized scrolling
491:   const verticalScrollRef = useRef(null);
492:   const leftColumnScrollRef = useRef(null);
493:   const headerScrollRef = useRef(null);
494:   const gridScrollRef = useRef(null);
495: 
496:   // Calculate content height
497:   const contentHeight = timeSlots.length * TIME_SLOT_HEIGHT;
498: 
499:   // Render header for an item (either table or counter seat)
500:   const renderItemHeader = (seatingItem) => {
501:     const { item, type, id } = seatingItem;
502: 
503:     if (type === "table") {
504:       const isExpanded = expandedTableIds.has(id);
505:       return (
506:         <TableHeader
507:           key={`table-${id}`}
508:           table={item}
509:           isExpanded={isExpanded}
510:           toggleExpand={() => toggleExpand(id, true)}
511:           width={TABLE_WIDTH}
512:         />
513:       );
514:     } else {
515:       // counter seat
516:       const isExpanded = expandedCounterSeatIds.has(id);
517:       return (
518:         <CounterSeatHeader
519:           key={`counter-${id}`}
520:           seat={item}
521:           isExpanded={isExpanded}
522:           toggleExpand={() => toggleExpand(id, false)}
523:           width={COUNTER_SEAT_WIDTH}
524:         />
525:       );
526:     }
527:   };
528: 
529:   // Get width for an item based on its type
530:   const getItemWidth = (type) => {
531:     return type === "table" ? TABLE_WIDTH : COUNTER_SEAT_WIDTH;
532:   };
533: 
534:   // Render reservation blocks
535:   const renderReservationBlocks = () => {
536:     // Create a map of the sorted item positions
537:     const itemPositionMap = {};
538:     let currentPosition = 0;
539: 
540:     sortedItems.forEach((item) => {
541:       const key = `${item.type === "table" ? "table" : "counter"}-${item.id}`;
542:       itemPositionMap[key] = currentPosition;
543:       currentPosition += getItemWidth(item.type);
544:     });
545: 
546:     return (
547:       <>
548:         {reservations.map((reservation) => {
549:           const isCounterSeat = !!reservation.isCounterSeat;
550:           const itemKey = isCounterSeat
551:             ? `counter-${reservation.counterSeatId}`
552:             : `table-${reservation.tableId}`;
553: 
554:           // Skip if we don't have this item in our sorted grid
555:           if (!(itemKey in itemPositionMap)) {
556:             return null;
557:           }
558: 
559:           // Calculate position based on the sortedItems layout
560:           const position = itemPositionMap[itemKey];
561:           const width = isCounterSeat ? COUNTER_SEAT_WIDTH : TABLE_WIDTH;
562: 
563:           const top =
564:             ((parseTimeToMinutes(reservation.time) - 9 * 60) / 30) *
565:             TIME_SLOT_HEIGHT;
566:           const height = (reservation.duration / 30) * TIME_SLOT_HEIGHT;
567: 
568:           return (
569:             <ReservationBlockStyled
570:               key={`res-${reservation.id}`}
571:               left={position}
572:               top={top}
573:               width={width}
574:               height={height}
575:               status={reservation.status}
576:               onPress={() => handleReservationPress(reservation)}
577:               isSelected={selectedReservation?.id === reservation.id}
578:               isPending={reservation.status === "pending"}
579:             >
580:               {reservation.status === "pending" && (
581:                 <PendingBorder style={{ opacity: breathingAnim }} />
582:               )}
583:               <ReservationName>{reservation.customerName}</ReservationName>
584:               <ReservationDetails>
585:                 {reservation.time} • {reservation.people}{" "}
586:                 {reservation.people > 1 ? "people" : "person"}
587:               </ReservationDetails>
588:             </ReservationBlockStyled>
589:           );
590:         })}
591:       </>
592:     );
593:   };
594: 
595:   return (
596:     <Container>
597:       <MainGrid>
598:         <HeaderContainer>
599:           <LeftColumnContainer width={TIME_COLUMN_WIDTH}>
600:             <TimeColumnHeader width={TIME_COLUMN_WIDTH}>
601:               <ExpandAllButton
602:                 onPress={toggleAllTables}
603:                 areAllExpanded={areAllExpanded}
604:               >
605:                 <ExpandAllButtonText>
606:                   {areAllExpanded ? "Collapse All" : "Expand All"}
607:                 </ExpandAllButtonText>
608:               </ExpandAllButton>
609:             </TimeColumnHeader>
610:           </LeftColumnContainer>
611: 
612:           <HeaderScrollView
613:             ref={headerScrollRef}
614:             horizontal
615:             showsHorizontalScrollIndicator={false}
616:             onScroll={handleHeaderScroll}
617:             scrollEventThrottle={16}
618:             contentContainerStyle={{ paddingLeft: TIME_COLUMN_WIDTH }}
619:           >
620:             <HeaderRow>
621:               {/* Render all items headers in sorted order */}
622:               {sortedItems.map(renderItemHeader)}
623:             </HeaderRow>
624:           </HeaderScrollView>
625:         </HeaderContainer>
626: 
627:         <ContentContainer>
628:           <LeftColumnContainer width={TIME_COLUMN_WIDTH}>
629:             <ScrollView
630:               ref={leftColumnScrollRef}
631:               onScroll={handleLeftColumnScroll}
632:               scrollEventThrottle={16}
633:               showsVerticalScrollIndicator={true}
634:             >
635:               <TimeColumn width={TIME_COLUMN_WIDTH}>
636:                 {timeSlots.map((time) => (
637:                   <TimeSlot
638:                     key={time}
639:                     height={TIME_SLOT_HEIGHT}
640:                     width={TIME_COLUMN_WIDTH}
641:                   >
642:                     <TimeText>{time}</TimeText>
643:                   </TimeSlot>
644:                 ))}
645:               </TimeColumn>
646:             </ScrollView>
647:           </LeftColumnContainer>
648: 
649:           <HeaderScrollView
650:             ref={gridScrollRef}
651:             horizontal
652:             showsHorizontalScrollIndicator={false}
653:             onScroll={handleGridScroll}
654:             scrollEventThrottle={16}
655:             contentContainerStyle={{ paddingLeft: TIME_COLUMN_WIDTH }}
656:           >
657:             <ScrollView
658:               ref={verticalScrollRef}
659:               onScroll={handleVerticalScroll}
660:               scrollEventThrottle={16}
661:               showsVerticalScrollIndicator={false}
662:             >
663:               <GridContainer style={{ height: contentHeight }}>
664:                 {/* Render grid cells */}
665:                 <View style={{ flexDirection: "row" }}>
666:                   {/* All item columns */}
667:                   {sortedItems.map((seatingItem, index) => (
668:                     <View
669:                       key={`item-col-${seatingItem.id}`}
670:                       style={{ width: getItemWidth(seatingItem.type) }}
671:                     >
672:                       {timeSlots.map((time, timeIndex) => (
673:                         <View
674:                           key={`item-cell-${index}-${timeIndex}`}
675:                           style={{
676:                             width: getItemWidth(seatingItem.type),
677:                             height: TIME_SLOT_HEIGHT,
678:                             borderLeftWidth: 1,
679:                             borderBottomWidth: 1,
680:                             borderLeftColor: "#e1e1e1",
681:                             borderBottomColor: "#e1e1e1",
682:                           }}
683:                         />
684:                       ))}
685:                     </View>
686:                   ))}
687:                 </View>
688: 
689:                 {}
690:                 <CurrentTimeLine style={{ top: currentTimePosition }}>
691:                   <CurrentTimeIndicator />
692:                 </CurrentTimeLine>
693: 
694:                 {}
695:                 {renderReservationBlocks()}
696:               </GridContainer>
697:             </ScrollView>
698:           </HeaderScrollView>
699:         </ContentContainer>
700:       </MainGrid>
701: 
702:       {}
703:       {selectedReservation && (
704:         <ReservationDetailsPanel
705:           reservation={selectedReservation}
706:           onClose={() => setSelectedReservation(null)}
707:         />
708:       )}
709:     </Container>
710:   );
711: };
712: 
713: export default ReservationsGrid;

================
File: src/features/merchant/reservations/components/ReservationsMailbox.js
================
  1: import React, { useState, useRef, useEffect } from "react";
  2: import {
  3:   FlatList,
  4:   Animated,
  5:   View,
  6:   Alert,
  7:   TouchableOpacity,
  8: } from "react-native";
  9: import styled from "styled-components/native";
 10: import { CustomText } from "../../../../components/CustomText/CustomText";
 11: import { MaterialIcons } from "@expo/vector-icons";
 12: import { GestureHandlerRootView } from "react-native-gesture-handler";
 13: import Swipeable from "react-native-gesture-handler/Swipeable";
 14: 
 15: 
 16: const COLORS = {
 17:   PENDING: {
 18:     bg: "#ffd11a",
 19:     text: "#a67f00",
 20:   },
 21:   CONFIRMED: {
 22:     bg: "#4CAF50",
 23:     text: "#FFFFFF",
 24:   },
 25:   CANCELED: {
 26:     bg: "#ff4d4d",
 27:     text: "#FFFFFF",
 28:   },
 29: };
 30: 
 31: 
 32: const Container = styled.View`
 33:   flex: 1;
 34:   background-color: ${(props) => props.theme.colors.bg.primary};
 35: `;
 36: 
 37: const ReservationCard = styled(TouchableOpacity)`
 38:   background-color: ${(props) => props.theme.colors.bg.primary};
 39:   border-radius: 4px;
 40:   margin: 2px 12px;
 41:   padding: 10px 12px;
 42:   shadow-opacity: 0.05;
 43:   shadow-radius: 2px;
 44:   shadow-color: #000;
 45:   shadow-offset: 0px 1px;
 46:   elevation: 1;
 47:   border-left-width: 3px;
 48:   border-left-color: ${(props) => {
 49:     switch (props.status) {
 50:       case "pending":
 51:         return COLORS.PENDING.bg;
 52:       case "confirmed":
 53:         return COLORS.CONFIRMED.bg;
 54:       default:
 55:         return COLORS.CANCELED.bg;
 56:     }
 57:   }};
 58: `;
 59: 
 60: const StatusIndicator = styled.View`
 61:   position: absolute;
 62:   right: 10px;
 63:   top: 10px;
 64:   border-radius: 3px;
 65:   padding: 2px 4px;
 66:   background-color: ${(props) => {
 67:     switch (props.status) {
 68:       case "pending":
 69:         return COLORS.PENDING.bg;
 70:       case "confirmed":
 71:         return COLORS.CONFIRMED.bg;
 72:       default:
 73:         return COLORS.CANCELED.bg;
 74:     }
 75:   }};
 76: `;
 77: 
 78: const StatusText = styled(CustomText)`
 79:   font-size: 10px;
 80:   font-weight: bold;
 81:   color: ${(props) => {
 82:     switch (props.status) {
 83:       case "pending":
 84:         return COLORS.PENDING.text;
 85:       case "confirmed":
 86:         return COLORS.CONFIRMED.text;
 87:       default:
 88:         return COLORS.CANCELED.text;
 89:     }
 90:   }};
 91: `;
 92: 
 93: const CardTitle = styled(CustomText)`
 94:   font-size: 16px;
 95:   font-weight: bold;
 96:   margin-bottom: 4px;
 97:   margin-right: 65px;
 98: `;
 99: 
100: const DetailRow = styled.View`
101:   flex-direction: row;
102:   align-items: center;
103:   margin-vertical: 2px;
104: `;
105: 
106: const DetailIcon = styled(MaterialIcons)`
107:   margin-right: 4px;
108:   font-size: 14px;
109: `;
110: 
111: const DetailText = styled(CustomText)`
112:   font-size: 12px;
113: `;
114: 
115: const SectionHeader = styled.View`
116:   background-color: ${(props) => props.theme.colors.ui.tertiary};
117:   padding: 6px 12px;
118: `;
119: 
120: const SectionHeaderText = styled(CustomText)`
121:   font-size: 16px;
122:   font-weight: bold;
123: `;
124: 
125: const SwipeHintContainer = styled(Animated.View)`
126:   padding: 16px;
127:   align-items: center;
128:   margin-bottom: 8px;
129: `;
130: 
131: const SwipeHintText = styled(CustomText)`
132:   font-size: 14px;
133:   color: ${(props) => props.theme.colors.text.secondary};
134:   text-align: center;
135: `;
136: 
137: const ActionContainer = styled.View`
138:   flex: 1;
139:   flex-direction: row;
140:   align-items: center;
141:   justify-content: center;
142:   background-color: ${(props) => props.color};
143: `;
144: 
145: const ActionText = styled(CustomText)`
146:   color: white;
147:   font-weight: bold;
148:   font-size: 16px;
149:   margin-left: 8px;
150: `;
151: 
152: const NoReservationsContainer = styled.View`
153:   flex: 1;
154:   justify-content: center;
155:   align-items: center;
156:   padding: 20px;
157: `;
158: 
159: const NoReservationsText = styled(CustomText)`
160:   font-size: 16px;
161:   color: ${(props) => props.theme.colors.text.secondary};
162:   text-align: center;
163: `;
164: 
165: const ReservationsMailbox = ({ reservations }) => {
166:   const [expandedId, setExpandedId] = useState(null);
167:   const [hintVisible, setHintVisible] = useState(true);
168:   const swipeableRef = useRef(null);
169:   const fadeAnim = useRef(new Animated.Value(1)).current;
170:   const flatListRef = useRef(null);
171:   const hideTimerRef = useRef(null);
172: 
173:   // Track scroll for pull detection
174:   const lastScrollY = useRef(0);
175:   const scrollVelocity = useRef(0);
176:   const lastScrollTime = useRef(Date.now());
177: 
178:   // Auto-hide hint after initial display
179:   useEffect(() => {
180:     // Initial timeout - hide after 5 seconds
181:     const timer = setTimeout(() => {
182:       Animated.timing(fadeAnim, {
183:         toValue: 0,
184:         duration: 1000,
185:         useNativeDriver: true,
186:       }).start(() => setHintVisible(false));
187:     }, 5000);
188: 
189:     return () => {
190:       clearTimeout(timer);
191:       if (hideTimerRef.current) {
192:         clearTimeout(hideTimerRef.current);
193:       }
194:     };
195:   }, []);
196: 
197:   // Show hint only with strong pull-to-refresh type gesture
198:   const handleScroll = (event) => {
199:     const currentTime = Date.now();
200:     const timeDelta = currentTime - lastScrollTime.current;
201:     const currentY = event.nativeEvent.contentOffset.y;
202: 
203:     // Calculate scroll velocity (pixels per millisecond)
204:     if (timeDelta > 0) {
205:       scrollVelocity.current = (lastScrollY.current - currentY) / timeDelta;
206:     }
207: 
208:     // Strong pull detected at the top (negative because pulling down)
209:     const isStrongPullUp = scrollVelocity.current > 0.5 && currentY < 10;
210:     const isScrollingDown = currentY > 30 && currentY > lastScrollY.current;
211: 
212:     // Show hint on strong pull at top
213:     if (isStrongPullUp && !hintVisible) {
214:       setHintVisible(true);
215:       Animated.timing(fadeAnim, {
216:         toValue: 1,
217:         duration: 300,
218:         useNativeDriver: true,
219:       }).start();
220: 
221:       // Keep hint visible for a short time
222:       clearTimeout(hideTimerRef.current);
223:       hideTimerRef.current = setTimeout(() => {
224:         Animated.timing(fadeAnim, {
225:           toValue: 0,
226:           duration: 500,
227:           useNativeDriver: true,
228:         }).start(() => setHintVisible(false));
229:       }, 3000);
230:     }
231:     // Hide hint when scrolling down
232:     else if (isScrollingDown && hintVisible) {
233:       clearTimeout(hideTimerRef.current);
234:       Animated.timing(fadeAnim, {
235:         toValue: 0,
236:         duration: 300,
237:         useNativeDriver: true,
238:       }).start(() => setHintVisible(false));
239:     }
240: 
241:     // Save current position and time for next calculation
242:     lastScrollY.current = currentY;
243:     lastScrollTime.current = currentTime;
244:   };
245: 
246:   const sortReservations = (reservations) => {
247:     return [...reservations].sort((a, b) => {
248:       // Priority by status (pending first)
249:       if (a.status === "pending" && b.status !== "pending") return -1;
250:       if (a.status !== "pending" && b.status === "pending") return 1;
251: 
252:       // Then sort by time
253:       const timeA = a.time.split(":").map(Number);
254:       const timeB = b.time.split(":").map(Number);
255: 
256:       if (timeA[0] !== timeB[0]) return timeA[0] - timeB[0]; // Sort by hour
257:       return timeA[1] - timeB[1]; // Sort by minute
258:     });
259:   };
260: 
261:   // Group reservations by status
262:   const groupedReservations = {
263:     today: sortReservations(reservations.filter((r) => r.status === "pending")),
264:     upcoming: sortReservations(
265:       reservations.filter((r) => r.status === "confirmed")
266:     ),
267:     past: sortReservations(
268:       reservations.filter(
269:         (r) => r.status !== "pending" && r.status !== "confirmed"
270:       )
271:     ),
272:   };
273: 
274:   // Handler functions with alerts for testing
275:   const handleConfirm = (id) => {
276:     Alert.alert(
277:       "Confirm Reservation",
278:       `Reservation #${id} has been CONFIRMED.`,
279:       [{ text: "OK" }]
280:     );
281:     // Here you would update the reservation status in your state or database
282:   };
283: 
284:   const handleCancel = (id) => {
285:     Alert.alert("Cancel Reservation", `Reservation #${id} has been CANCELED.`, [
286:       { text: "OK" },
287:     ]);
288:     // Here you would update the reservation status in your state or database
289:   };
290: 
291:   // Action renderers - Pure functions that return appropriate action UI
292:   const renderRightActions = (progress, dragX) => {
293:     return (
294:       <ActionContainer color={COLORS.CONFIRMED.bg}>
295:         <MaterialIcons name="check-circle" size={24} color="white" />
296:         <ActionText>CONFIRM</ActionText>
297:       </ActionContainer>
298:     );
299:   };
300: 
301:   const renderLeftActions = (progress, dragX) => {
302:     return (
303:       <ActionContainer color={COLORS.CANCELED.bg}>
304:         <MaterialIcons name="cancel" size={24} color="white" />
305:         <ActionText>CANCEL</ActionText>
306:       </ActionContainer>
307:     );
308:   };
309: 
310:   // Card renderer
311:   const renderReservationCard = ({ item }) => {
312:     const isExpanded = expandedId === item.id;
313: 
314:     return (
315:       <Swipeable
316:         ref={(ref) => {
317:           if (ref && expandedId === item.id) {
318:             swipeableRef.current = ref;
319:           }
320:         }}
321:         friction={2}
322:         leftThreshold={40}
323:         rightThreshold={40}
324:         renderLeftActions={renderLeftActions}
325:         renderRightActions={renderRightActions}
326:         onSwipeableLeftOpen={() => handleCancel(item.id)}
327:         onSwipeableRightOpen={() => handleConfirm(item.id)}
328:         onSwipeableWillOpen={(direction) => {
329:           // Close previous swipeable
330:           if (swipeableRef.current && expandedId !== item.id) {
331:             swipeableRef.current.close();
332:           }
333:           // Log for debugging
334:           console.log(`Swiping ${direction} for reservation #${item.id}`);
335:           setExpandedId(item.id);
336:         }}
337:         containerStyle={{ backgroundColor: "transparent" }}
338:         childrenContainerStyle={{ backgroundColor: "white" }}
339:       >
340:         <ReservationCard
341:           status={item.status}
342:           onPress={() => setExpandedId(expandedId === item.id ? null : item.id)}
343:         >
344:           <StatusIndicator status={item.status}>
345:             <StatusText status={item.status}>
346:               {item.status.toUpperCase()}
347:             </StatusText>
348:           </StatusIndicator>
349: 
350:           <CardTitle numberOfLines={1} ellipsizeMode="tail">
351:             {item.customerName}
352:           </CardTitle>
353: 
354:           <DetailRow>
355:             <DetailIcon name="access-time" color="#757575" />
356:             <DetailText>
357:               {item.time} ({item.duration} min)
358:             </DetailText>
359:           </DetailRow>
360: 
361:           <DetailRow>
362:             <DetailIcon name="people" color="#757575" />
363:             <DetailText>
364:               {item.people} {item.people > 1 ? "people" : "person"}
365:             </DetailText>
366:           </DetailRow>
367: 
368:           {!isExpanded ? (
369:             <DetailRow>
370:               <DetailIcon name="event-seat" color="#757575" />
371:               <DetailText numberOfLines={1} ellipsizeMode="tail">
372:                 {item.isCounterSeat
373:                   ? `Counter: ${item.counterSeatId}`
374:                   : `Table: ${item.tableId}`}
375:               </DetailText>
376:             </DetailRow>
377:           ) : (
378:             <>
379:               <DetailRow>
380:                 <DetailIcon name="event-seat" color="#757575" />
381:                 <DetailText>
382:                   {item.isCounterSeat
383:                     ? `Counter Seat: ${item.counterSeatId}`
384:                     : `Table: ${item.tableId}`}
385:                 </DetailText>
386:               </DetailRow>
387:               {item.note && (
388:                 <DetailRow>
389:                   <DetailIcon name="notes" color="#757575" />
390:                   <DetailText>{item.note}</DetailText>
391:                 </DetailRow>
392:               )}
393:             </>
394:           )}
395:         </ReservationCard>
396:       </Swipeable>
397:     );
398:   };
399: 
400:   // Section header renderer
401:   const renderSectionHeader = (title, count) => (
402:     <SectionHeader>
403:       <SectionHeaderText>
404:         {title} ({count})
405:       </SectionHeaderText>
406:     </SectionHeader>
407:   );
408: 
409:   // Combine all sections into a flat array for FlatList
410:   const sections = [
411:     { key: "hint", type: "hint" },
412:     {
413:       key: "pendingHeader",
414:       type: "header",
415:       title: "Pending Reservations",
416:       count: groupedReservations.today.length,
417:     },
418:     ...groupedReservations.today.map((item) => ({
419:       key: `pending-${item.id}`,
420:       type: "item",
421:       item,
422:     })),
423:     {
424:       key: "upcomingHeader",
425:       type: "header",
426:       title: "Confirmed Reservations",
427:       count: groupedReservations.upcoming.length,
428:     },
429:     ...groupedReservations.upcoming.map((item) => ({
430:       key: `upcoming-${item.id}`,
431:       type: "item",
432:       item,
433:     })),
434:     {
435:       key: "pastHeader",
436:       type: "header",
437:       title: "Past Reservations",
438:       count: groupedReservations.past.length,
439:     },
440:     ...groupedReservations.past.map((item) => ({
441:       key: `past-${item.id}`,
442:       type: "item",
443:       item,
444:     })),
445:   ];
446: 
447:   const renderItem = ({ item }) => {
448:     switch (item.type) {
449:       case "hint":
450:         return hintVisible ? (
451:           <SwipeHintContainer style={{ opacity: fadeAnim }}>
452:             <SwipeHintText>
453:               ← Swipe LEFT to CANCEL{"\n"}
454:               Swipe RIGHT to CONFIRM →
455:             </SwipeHintText>
456:           </SwipeHintContainer>
457:         ) : null;
458:       case "header":
459:         return renderSectionHeader(item.title, item.count);
460:       case "item":
461:         return renderReservationCard({ item: item.item });
462:       default:
463:         return null;
464:     }
465:   };
466: 
467:   if (!reservations || reservations.length === 0) {
468:     return (
469:       <NoReservationsContainer>
470:         <MaterialIcons name="event-busy" size={60} color="#757575" />
471:         <NoReservationsText>No reservations found</NoReservationsText>
472:       </NoReservationsContainer>
473:     );
474:   }
475: 
476:   return (
477:     <GestureHandlerRootView style={{ flex: 1 }}>
478:       <Container>
479:         <FlatList
480:           ref={flatListRef}
481:           data={sections}
482:           renderItem={renderItem}
483:           keyExtractor={(item) => item.key}
484:           onScroll={handleScroll}
485:           scrollEventThrottle={16}
486:         />
487:       </Container>
488:     </GestureHandlerRootView>
489:   );
490: };
491: 
492: export default ReservationsMailbox;

================
File: src/features/merchant/reservations/screens/MerchantReservationsScreen.js
================
 1: import React, { useState } from "react";
 2: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
 3: import { seatingData, merchantReservations } from "../../../../data/mockData";
 4: import { generateTimeSlots } from "../utils/timeUtils";
 5: import ReservationsGrid from "../components/ReservationsGrid";
 6: import ReservationsMailbox from "../components/ReservationsMailbox";
 7: import {
 8:   TabBar,
 9:   Tab,
10:   TabText,
11: } from "../components/ReservationComponents.styles";
12: import { MaterialIcons } from "@expo/vector-icons";
13: import styled from "styled-components/native";
14: 
15: const Container = styled.View`
16:   flex: 1;
17:   background-color: ${(props) => props.theme.colors.bg.primary};
18: `;
19: 
20: 
21: const TABS = {
22:   GRID: "grid",
23:   SMART: "smart",
24:   MAILBOX: "mailbox",
25: };
26: 
27: export const MerchantReservationsScreen = () => {
28:   const timeSlots = generateTimeSlots();
29:   const [activeTab, setActiveTab] = useState(TABS.GRID);
30: 
31:   return (
32:     <SafeArea>
33:       <Container>
34:         <TabBar>
35:           <Tab
36:             active={activeTab === TABS.GRID}
37:             onPress={() => setActiveTab(TABS.GRID)}
38:             activeOpacity={0.6}
39:           >
40:             <MaterialIcons
41:               name="grid-on"
42:               size={20}
43:               color={activeTab === TABS.GRID ? "#262626" : "#757575"}
44:             />
45:             <TabText active={activeTab === TABS.GRID}>Grid View</TabText>
46:           </Tab>
47: 
48:           <Tab
49:             active={activeTab === TABS.SMART}
50:             onPress={() => setActiveTab(TABS.SMART)}
51:             activeOpacity={0.6}
52:           >
53:             <MaterialIcons
54:               name="auto-awesome"
55:               size={20}
56:               color={activeTab === TABS.SMART ? "#262626" : "#757575"}
57:             />
58:             <TabText active={activeTab === TABS.SMART}>Smart View</TabText>
59:           </Tab>
60: 
61:           <Tab
62:             active={activeTab === TABS.MAILBOX}
63:             onPress={() => setActiveTab(TABS.MAILBOX)}
64:             activeOpacity={0.6}
65:           >
66:             <MaterialIcons
67:               name="mail"
68:               size={20}
69:               color={activeTab === TABS.MAILBOX ? "#262626" : "#757575"}
70:             />
71:             <TabText active={activeTab === TABS.MAILBOX}>Inbox</TabText>
72:           </Tab>
73:         </TabBar>
74: 
75:         {activeTab === TABS.MAILBOX ? (
76:           <ReservationsMailbox reservations={merchantReservations} />
77:         ) : (
78:           <ReservationsGrid
79:             timeSlots={timeSlots}
80:             tables={seatingData.tables}
81:             counterSeats={seatingData.counterSeats}
82:             reservations={merchantReservations}
83:             isSmartSorting={activeTab === TABS.SMART}
84:           />
85:         )}
86:       </Container>
87:     </SafeArea>
88:   );
89: };

================
File: src/features/merchant/reservations/utils/timeUtils.js
================
 1: export const generateTimeSlots = () => {
 2:   const slots = [];
 3:   for (let hour = 9; hour <= 22; hour++) {
 4:     const hourStr = hour.toString().padStart(2, "0");
 5:     slots.push(`${hourStr}:00`);
 6:     slots.push(`${hourStr}:30`);
 7:   }
 8:   return slots;
 9: };
10: 
11: 
12: 
13: 
14: 
15: 
16: export const calculateCurrentTimePosition = (timeSlotHeight) => {
17:   const now = new Date();
18:   const hours = now.getHours();
19:   const minutes = now.getMinutes();
20: 
21: 
22:   if (hours < 9 || (hours === 22 && minutes > 30) || hours > 22) {
23:     return -100;
24:   }
25: 
26:   const minutesSince9AM = (hours - 9) * 60 + minutes;
27:   return (minutesSince9AM / 30) * timeSlotHeight;
28: };
29: 
30: 
31: 
32: 
33: 
34: 
35: export const parseTimeString = (timeString) => {
36:   return timeString.split(":").map(Number);
37: };
38: 
39: 
40: 
41: 
42: 
43: 
44: export const convertToMinutesSince9AM = (timeString) => {
45:   const [hours, minutes] = parseTimeString(timeString);
46:   return (hours - 9) * 60 + minutes;
47: };
48: 
49: 
50: 
51: 
52: 
53: 
54: export const getTimeSlotIndex = (timeString) => {
55:   const minutesSince9AM = convertToMinutesSince9AM(timeString);
56:   return Math.floor(minutesSince9AM / 30);
57: };
58: 
59: 
60: 
61: 
62: 
63: 
64: export const formatTimeFromDate = (date) => {
65:   const hours = date.getHours().toString().padStart(2, "0");
66:   const minutes = date.getMinutes().toString().padStart(2, "0");
67:   return `${hours}:${minutes}`;
68: };
69: 
70: 
71: 
72: 
73: 
74: 
75: export const generateCurrentDayTimes = (count = 5) => {
76:   let timesArray = [];
77:   let current = new Date();
78:   current.setSeconds(0);
79:   current.setMilliseconds(0);
80: 
81: 
82:   const minutes = current.getMinutes();
83:   current.setMinutes(minutes >= 30 ? 30 : 0);
84: 
85:   for (let i = 0; i < count; i++) {
86:     timesArray.push(formatTimeFromDate(current));
87:     current.setMinutes(current.getMinutes() + 30);
88:   }
89:   return timesArray;
90: };

================
File: src/features/merchant/settings/screens/MerchantSettingsScreen.js
================
  1: import React from "react";
  2: import { ScrollView, View, TouchableOpacity } from "react-native";
  3: import { List, Avatar } from "react-native-paper";
  4: import styled from "styled-components/native";
  5: 
  6: import { SafeArea } from "../../../../components/SafeArea/SafeArea";
  7: import { Spacer } from "../../../../components/Spacer/Spacer";
  8: import { CustomText } from "../../../../components/CustomText/CustomText";
  9: import { Separator } from "../../../../components/Separator/Separator";
 10: import { useAuthentication } from "../../../../services/AuthenticationContext";
 11: 
 12: 
 13: const merchantProfile = {
 14:   name: "Restaurant Owner",
 15:   email: "restaurant@example.com",
 16:   restaurantName: "Gourmet Delights",
 17:   profileImage: require("../../../../../assets/images/user_profile.jpg"),
 18:   phoneNumber: "+81 80 6748 5678",
 19: };
 20: 
 21: 
 22: const SettingsContainer = styled(ScrollView)`
 23:   background-color: ${(props) => props.theme.colors.bg.primary};
 24: `;
 25: 
 26: const ProfileContainer = styled(View)`
 27:   flex-direction: row;
 28:   justify-content: space-between;
 29:   align-items: center;
 30:   padding: ${(props) => props.theme.space[3]};
 31: `;
 32: 
 33: const UserInfoContainer = styled(View)`
 34:   flex: 1;
 35:   margin-right: ${(props) => props.theme.space[2]};
 36:   align-items: flex-start;
 37: `;
 38: 
 39: const AvatarContainer = styled(View)`
 40:   align-items: center;
 41:   justify-content: center;
 42: `;
 43: 
 44: const SettingsItem = styled(List.Item)`
 45:   padding: ${(props) => props.theme.space[3]};
 46: `;
 47: 
 48: const EmailText = styled(CustomText)`
 49:   margin-top: ${(props) => props.theme.space[1]};
 50:   color: ${(props) => props.theme.colors.text.secondary};
 51: `;
 52: 
 53: const RestaurantNameText = styled(CustomText)`
 54:   margin-top: ${(props) => props.theme.space[1]};
 55:   color: ${(props) => props.theme.colors.text.primary};
 56:   font-weight: ${(props) => props.theme.fontWeights.bold};
 57: `;
 58: 
 59: const StatusBadge = styled(View)`
 60:   background-color: #4caf50;
 61:   padding: ${(props) => props.theme.space[1]} ${(props) => props.theme.space[2]};
 62:   border-radius: 12px;
 63:   margin-top: ${(props) => props.theme.space[2]};
 64:   align-self: flex-start;
 65: `;
 66: 
 67: const StatusText = styled(CustomText)`
 68:   color: ${(props) => props.theme.colors.text.inverse};
 69:   font-size: ${(props) => props.theme.fontSizes.caption};
 70:   font-weight: ${(props) => props.theme.fontWeights.bold};
 71: `;
 72: 
 73: const SectionTitle = styled(CustomText)`
 74:   padding: ${(props) => props.theme.space[3]};
 75:   font-weight: ${(props) => props.theme.fontWeights.bold};
 76:   color: ${(props) => props.theme.colors.text.secondary};
 77: `;
 78: 
 79: export const MerchantSettingsScreen = ({ navigation }) => {
 80:   const { onLogout } = useAuthentication();
 81: 
 82:   return (
 83:     <SafeArea>
 84:       <SettingsContainer>
 85:         {}
 86:         <ProfileContainer>
 87:           <UserInfoContainer>
 88:             <CustomText variant="h3">{merchantProfile.name}</CustomText>
 89:             <EmailText variant="caption">{merchantProfile.email}</EmailText>
 90:             <RestaurantNameText variant="body">
 91:               {merchantProfile.restaurantName}
 92:             </RestaurantNameText>
 93:             <StatusBadge>
 94:               <StatusText>ACTIVE</StatusText>
 95:             </StatusBadge>
 96:           </UserInfoContainer>
 97:           <AvatarContainer>
 98:             <TouchableOpacity onPress={() => {}}>
 99:               <Avatar.Image
100:                 size={80}
101:                 source={merchantProfile.profileImage}
102:                 backgroundColor={(props) => props.theme.colors.brand.primary}
103:               />
104:             </TouchableOpacity>
105:           </AvatarContainer>
106:         </ProfileContainer>
107:         <Separator type="full" />
108: 
109:         {}
110:         <SectionTitle variant="body">ACCOUNT</SectionTitle>
111:         <List.Section>
112:           <SettingsItem
113:             title="Profile Settings"
114:             description="Edit your personal information"
115:             left={(props) => (
116:               <List.Icon
117:                 {...props}
118:                 color={(props) => props.theme.colors.text.primary}
119:                 icon="account-cog"
120:               />
121:             )}
122:             onPress={() => {}}
123:           />
124:           <SettingsItem
125:             title="Restaurant Information"
126:             description="Update restaurant details"
127:             left={(props) => (
128:               <List.Icon
129:                 {...props}
130:                 color={(props) => props.theme.colors.text.primary}
131:                 icon="store"
132:               />
133:             )}
134:             onPress={() => {}}
135:           />
136:           <SettingsItem
137:             title="Menu Management"
138:             description="Add, edit, or remove menu items"
139:             left={(props) => (
140:               <List.Icon
141:                 {...props}
142:                 color={(props) => props.theme.colors.text.primary}
143:                 icon="food"
144:               />
145:             )}
146:             onPress={() => {}}
147:           />
148:         </List.Section>
149: 
150:         {}
151:         <SectionTitle variant="body">BUSINESS SETTINGS</SectionTitle>
152:         <List.Section>
153:           <SettingsItem
154:             title="Seating Layout"
155:             description="Manage tables and seating arrangement"
156:             left={(props) => (
157:               <List.Icon
158:                 {...props}
159:                 color={(props) => props.theme.colors.text.primary}
160:                 icon="table-furniture"
161:               />
162:             )}
163:             onPress={() => navigation.navigate("Home")}
164:           />
165:           <SettingsItem
166:             title="Reservation Settings"
167:             description="Configure reservation rules and availability"
168:             left={(props) => (
169:               <List.Icon
170:                 {...props}
171:                 color={(props) => props.theme.colors.text.primary}
172:                 icon="calendar-clock"
173:               />
174:             )}
175:             onPress={() => navigation.navigate("Reservations")}
176:           />
177:           <SettingsItem
178:             title="Business Hours"
179:             description="Set your restaurant opening hours"
180:             left={(props) => (
181:               <List.Icon
182:                 {...props}
183:                 color={(props) => props.theme.colors.text.primary}
184:                 icon="clock-outline"
185:               />
186:             )}
187:             onPress={() => {}}
188:           />
189:         </List.Section>
190: 
191:         {}
192:         <SectionTitle variant="body">SYSTEM</SectionTitle>
193:         <List.Section>
194:           <SettingsItem
195:             title="Notifications"
196:             description="Manage notification preferences"
197:             left={(props) => (
198:               <List.Icon
199:                 {...props}
200:                 color={(props) => props.theme.colors.text.primary}
201:                 icon="bell"
202:               />
203:             )}
204:             onPress={() => {}}
205:           />
206:           <SettingsItem
207:             title="Payment Methods"
208:             description="Configure payment options"
209:             left={(props) => (
210:               <List.Icon
211:                 {...props}
212:                 color={(props) => props.theme.colors.text.primary}
213:                 icon="credit-card"
214:               />
215:             )}
216:             onPress={() => {}}
217:           />
218:           <SettingsItem
219:             title="Help & Support"
220:             description="Contact customer support"
221:             left={(props) => (
222:               <List.Icon
223:                 {...props}
224:                 color={(props) => props.theme.colors.text.primary}
225:                 icon="help-circle"
226:               />
227:             )}
228:             onPress={() => {}}
229:           />
230:           <SettingsItem
231:             title="Logout"
232:             description="Sign out from your account"
233:             left={(props) => (
234:               <List.Icon
235:                 {...props}
236:                 color={(props) => props.theme.colors.text.error}
237:                 icon="logout"
238:               />
239:             )}
240:             onPress={onLogout}
241:           />
242:         </List.Section>
243:         <Spacer position="bottom" size="large" />
244:       </SettingsContainer>
245:     </SafeArea>
246:   );
247: };

================
File: src/infrastructure/navigation/AppNavigator.js
================
  1: import React from "react";
  2: import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
  3: import { createStackNavigator } from "@react-navigation/stack";
  4: import { Ionicons } from "@expo/vector-icons";
  5: import { NavigationContainer } from "@react-navigation/native";
  6: 
  7: import { useAuthentication } from "../../services/AuthenticationContext";
  8: import { globalScreenOptions } from "../options/GlobalScreenOptions";
  9: import { RestaurantsNavigator } from "./RestaurantsNavigator";
 10: import { CheckoutNavigator } from "./CheckoutNavigator";
 11: import { ReservationsNavigator } from "./ReservationsNavigator";
 12: import { MerchantNavigator } from "./MerchantNavigator";
 13: import { SettingsNavigator } from "./SettingsNavigator";
 14: import { RestaurantDetailScreen } from "../../features/customer/restaurants/screens/RestaurantDetailScreen";
 15: import { AccountSettingsScreen } from "../../features/customer/settings/screens/AccountSettingsScreen";
 16: 
 17: const TAB_ICON = {
 18:   Restaurants: "restaurant",
 19:   Checkout: "cart",
 20:   Reservations: "book",
 21:   Settings: "settings",
 22: };
 23: 
 24: const Tab = createBottomTabNavigator();
 25: const Stack = createStackNavigator();
 26: 
 27: const createTabScreenOptions = ({ route }) => {
 28:   const iconName = TAB_ICON[route.name];
 29: 
 30:   return {
 31:     tabBarIcon: ({ size, color }) => (
 32:       <Ionicons name={iconName} size={size} color={color} />
 33:     ),
 34:   };
 35: };
 36: 
 37: 
 38: const HomeTabs = () => (
 39:   <Tab.Navigator screenOptions={createTabScreenOptions}>
 40:     <Tab.Screen
 41:       name="Restaurants"
 42:       component={RestaurantsNavigator}
 43:       options={{ headerShown: false }}
 44:     />
 45:     <Tab.Screen
 46:       name="Checkout"
 47:       component={CheckoutNavigator}
 48:       options={{ headerShown: false }}
 49:     />
 50:     <Tab.Screen
 51:       name="Reservations"
 52:       component={ReservationsNavigator}
 53:       options={{ header: () => null }}
 54:     />
 55:     <Tab.Screen
 56:       name="Settings"
 57:       component={SettingsNavigator}
 58:       options={{ headerShown: false }}
 59:     />
 60:   </Tab.Navigator>
 61: );
 62: 
 63: 
 64: export const AppNavigator = () => {
 65:   const { user } = useAuthentication();
 66:   const role = user?.role;
 67:   return (
 68:     <Stack.Navigator
 69:       screenOptions={{
 70:         headerShown: false,
 71:       }}
 72:     >
 73:       {role === "customer" ? (
 74:         <>
 75:           {}
 76:           <Stack.Screen name="Home" component={HomeTabs} />
 77:           {}
 78: 
 79:           <Stack.Screen
 80:             name="RestaurantDetailScreen"
 81:             component={RestaurantDetailScreen}
 82:             options={({ route }) => ({
 83:               ...globalScreenOptions.restaurantDetail,
 84:               presentation:
 85:                 route.params?.presentationStyle === "modal" ? "modal" : "card",
 86:             })}
 87:           />
 88:           <Stack.Screen
 89:             name="AccountSettings"
 90:             component={AccountSettingsScreen}
 91:             options={globalScreenOptions.common}
 92:           />
 93:         </>
 94:       ) : (
 95:         <>
 96:           <Stack.Screen name="Merchant" component={MerchantNavigator} />
 97:         </>
 98:       )}
 99:     </Stack.Navigator>
100:   );
101: };

================
File: src/infrastructure/navigation/AuthNavigator.js
================
 1: import React from "react";
 2: import { createStackNavigator } from "@react-navigation/stack";
 3: 
 4: import { LoginScreen } from "../../features/auth/screens/LoginScreen";
 5: import { globalScreenOptions } from "../options/GlobalScreenOptions";
 6: 
 7: const Stack = createStackNavigator();
 8: 
 9: export const AuthNavigator = () => {
10:   return (
11:     <Stack.Navigator screenOptions={globalScreenOptions.nonHeader}>
12:       <Stack.Screen name="Login" component={LoginScreen} />
13:       {}
14:     </Stack.Navigator>
15:   );
16: };

================
File: src/infrastructure/navigation/CheckoutNavigator.js
================
 1: import React from "react";
 2: import {
 3:   ScrollView,
 4:   TextInput,
 5:   Text,
 6:   TouchableOpacity,
 7:   View,
 8:   StyleSheet,
 9: } from "react-native";
10: import * as FileSystem from "expo-file-system";
11: 
12: import { createStackNavigator } from "@react-navigation/stack";
13: 
14: const CheckoutStack = createStackNavigator();
15: 
16: export const CheckoutNavigator = () => {
17:   return (
18:     <View style={{ flex: 1 }}>
19:       <Text>Checkout Navigator</Text>
20:     </View>
21:   );
22: };

================
File: src/infrastructure/navigation/index.js
================
 1: import { NavigationContainer } from "@react-navigation/native";
 2: import { AppNavigator } from "./AppNavigator";
 3: import { GlobalWrapper } from "../../components/GlobalWrapper/GlobalWrapper";
 4: import { AuthNavigator } from "./AuthNavigator";
 5: import { useAuthentication } from "../../services/AuthenticationContext";
 6: 
 7: export const Navigation = () => {
 8:   const { isAuthenticated } = useAuthentication();
 9: 
10:   return (
11:     <GlobalWrapper>
12:       <NavigationContainer>
13:         {isAuthenticated ? <AppNavigator /> : <AuthNavigator />}
14:       </NavigationContainer>
15:     </GlobalWrapper>
16:   );
17: };

================
File: src/infrastructure/navigation/MerchantNavigator.js
================
 1: import React from "react";
 2: import { createBottomTabNavigator } from "@react-navigation/bottom-tabs";
 3: import { Ionicons } from "@expo/vector-icons";
 4: import { useTheme } from "styled-components/native";
 5: 
 6: import { MerchantHomeScreen } from "../../features/merchant/dashboard/screens/MerchantHomeScreen";
 7: import { MerchantSettingsScreen } from "../../features/merchant/settings/screens/MerchantSettingsScreen";
 8: import { MerchantReservationsScreen } from "../../features/merchant/reservations/screens/MerchantReservationsScreen";
 9: 
10: const Tab = createBottomTabNavigator();
11: 
12: export const MerchantNavigator = () => {
13:   const theme = useTheme();
14:   return (
15:     <Tab.Navigator
16:       screenOptions={({ route }) => ({
17:         headerShown: false,
18:         tabBarIcon: ({ color, size }) => {
19:           let iconName;
20:           if (route.name === "Home") {
21:             iconName = "home";
22:           } else if (route.name === "Settings") {
23:             iconName = "settings";
24:           } else if (route.name === "Reservations") {
25:             iconName = "calendar";
26:           }
27:           return <Ionicons name={iconName} size={size} color={color} />;
28:         },
29:         tabBarActiveTintColor: theme.colors.text.primary,
30:         tabBarInactiveTintColor: theme.colors.text.secondary,
31:         tabBarStyle: {
32:           backgroundColor: theme.colors.bg.primary,
33:         },
34:       })}
35:     >
36:       <Tab.Screen name="Home" component={MerchantHomeScreen} />
37:       <Tab.Screen name="Reservations" component={MerchantReservationsScreen} />
38:       <Tab.Screen name="Settings" component={MerchantSettingsScreen} />
39:     </Tab.Navigator>
40:   );
41: };

================
File: src/infrastructure/navigation/ReservationsNavigator.js
================
 1: import React from "react";
 2: import { createStackNavigator } from "@react-navigation/stack";
 3: import { useTheme } from "styled-components/native";
 4: 
 5: import { ReservationsScreen } from "../../features/customer/reservations/screens/ReservationsScreen";
 6: 
 7: const ReservationStack = createStackNavigator();
 8: 
 9: export const ReservationsNavigator = () => {
10:   const theme = useTheme();
11:   const getNumericValue = (value) => parseInt(value.replace("px", ""), 10);
12: 
13:   return (
14:     <ReservationStack.Navigator
15:       screenOptions={{
16:         headerShown: true,
17:         headerTitleAlign: "left",
18:         headerTintColor: theme.colors.text.primary,
19:         headerStyle: {
20:           backgroundColor: theme.colors.bg.primary,
21:           shadowColor: "transparent",
22:           elevation: 0,
23:         },
24:         headerTitleStyle: {
25:           fontSize: getNumericValue(theme.fontSizes.h4),
26:           fontFamily: theme.fonts.heading,
27:           fontWeight: theme.fontWeights.regular,
28:           lineHeight: getNumericValue(theme.fontSizes.h2),
29:           paddingLeft: getNumericValue(theme.space[2]),
30:         },
31:       }}
32:     >
33:       <ReservationStack.Screen
34:         name="ReservationsScreen"
35:         component={ReservationsScreen}
36:         options={{
37:           headerTitle: "Reservations",
38:         }}
39:       />
40:     </ReservationStack.Navigator>
41:   );
42: };

================
File: src/infrastructure/navigation/RestaurantsNavigator.js
================
 1: import React from "react";
 2: import { ScrollView, TextInput, Text, TouchableOpacity } from "react-native";
 3: import {
 4:   createStackNavigator,
 5:   TransitionPresets,
 6: } from "@react-navigation/stack";
 7: 
 8: import { RestaurantsScreen } from "../../features/customer/restaurants/screens/RestaurantsScreen";
 9: import { RestaurantDetailScreen } from "../../features/customer/restaurants/screens/RestaurantDetailScreen";
10: 
11: const RestaurantStack = createStackNavigator();
12: 
13: export const RestaurantsNavigator = () => {
14:   return (
15: 
16:     <RestaurantStack.Navigator
17:       screenOptions={{
18:         headerShown: false,
19:         ...TransitionPresets.ModalPresentationIOS,
20:       }}
21:     >
22:       <RestaurantStack.Screen
23:         name="RestaurantsScreen"
24:         component={RestaurantsScreen}
25:         options={{ headerShown: false }}
26:       />
27:     </RestaurantStack.Navigator>
28:   );
29: };

================
File: src/infrastructure/navigation/SettingsNavigator.js
================
 1: import React from "react";
 2: import {
 3:   createStackNavigator,
 4:   CardStyleInterpolators,
 5: } from "@react-navigation/stack";
 6: 
 7: import { SettingsScreen } from "../../features/customer/settings/screens/SettingsScreen";
 8: 
 9: const SettingsStack = createStackNavigator();
10: 
11: export const SettingsNavigator = () => {
12:   return (
13:     <SettingsStack.Navigator
14:       screenOptions={{
15:         headerShown: false,
16:         cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS,
17:       }}
18:     >
19:       <SettingsStack.Screen name="SettingsScreen" component={SettingsScreen} />
20:     </SettingsStack.Navigator>
21:   );
22: };

================
File: src/infrastructure/options/GlobalScreenOptions.js
================
 1: import { Platform } from "react-native";
 2: import { colors } from "../../infrastructure/theme/colors";
 3: import { TransitionPresets } from "@react-navigation/stack";
 4: 
 5: const commonHeaderOptions = {
 6:   headerStyle: {
 7:     height: Platform.select({ ios: 56, android: 66 }),
 8:     backgroundColor: colors.bg.primary,
 9:   },
10:   headerTitleStyle: {
11:     fontWeight: "bold",
12:     fontSize: 20,
13:     color: colors.text.primary,
14:     textAlign: "center",
15:   },
16:   headerBackTitleVisible: false,
17:   headerTitleAlign: "center",
18:   headerLeftContainerStyle: {
19:     marginTop: Platform.select({ ios: -45, android: -41 }),
20:   },
21:   headerTitleContainerStyle: {
22:     marginTop: Platform.select({ ios: -50, android: -45 }),
23:   },
24: };
25: 
26: 
27: export const globalScreenOptions = {
28:   common: commonHeaderOptions,
29:   nonHeader: {
30:     ...commonHeaderOptions,
31:     headerShown: false,
32:   },
33:   restaurantDetail: {
34:     headerShown: false,
35: 
36: 
37: 
38:   },
39: };

================
File: src/infrastructure/theme/colors.js
================
 1: export const colors = {
 2:   brand: {
 3:     primary: "#FFFFFF",
 4:     secondary: "#757575",
 5:     muted: "#C6DAF7",
 6:   },
 7:   ui: {
 8:     primary: "#262626",
 9:     secondary: "#757575",
10:     tertiary: "#F1F1F1",
11:     quaternary: "#FFFFFF",
12:     disabled: "#DEDEDE",
13:     error: "#D0421B",
14:     success: "#138000",
15:   },
16:   bg: {
17:     primary: "#FFFFFF",
18:     secondary: "#F1F1F1",
19:   },
20:   text: {
21:     primary: "#262626",
22:     secondary: "#757575",
23:     disabled: "#9C9C9C",
24:     inverse: "#FFFFFF",
25:     error: "#D0421B",
26:     success: "#138000",
27:   },
28: };

================
File: src/infrastructure/theme/fonts.js
================
 1: export const fonts = {
 2:   body: "Oswald_400Regular",
 3:   heading: "Lato_400Regular",
 4:   monospace: "Oswald_400Regular",
 5: };
 6: 
 7: export const fontWeights = {
 8:   regular: 400,
 9:   medium: 500,
10:   bold: 700,
11: };
12: 
13: export const fontSizes = {
14:   caption: "12px",
15:   button: "14px",
16:   body: "16px",
17:   title: "20px",
18:   h5: "24px",
19:   h4: "34px",
20:   h3: "45px",
21:   h2: "56px",
22:   h1: "112px",
23: };

================
File: src/infrastructure/theme/index.js
================
 1: import { colors } from './colors';
 2: import { sizes } from './sizes';
 3: import { space, lineHeights } from './spacing';
 4: import { fonts, fontWeights, fontSizes } from './fonts';
 5: 
 6: export const theme = {
 7:   colors,
 8:   sizes,
 9:   space,
10:   lineHeights,
11:   fonts,
12:   fontSizes,
13:   fontWeights,
14: };

================
File: src/infrastructure/theme/sizes.js
================
1: export const sizes = ['8px', '16px', '32px', '64px', '128px'];

================
File: src/infrastructure/theme/spacing.js
================
1: export const lineHeights = {
2:     title: '28px',
3:     copy: '20px',
4:   };
5: 
6:   export const space = ['0px', '4px', '8px', '16px', '32px', '64px'];

================
File: src/services/i18n/locales/en/en.js
================
  1: export default {
  2:   common: {
  3:     languages: {
  4:       en: "English",
  5:       ja: "Japanese",
  6:       zh: "Chinese",
  7:     },
  8:     actions: {
  9:       save: "Save",
 10:       cancel: "Cancel",
 11:       confirm: "Confirm",
 12:       delete: "Delete",
 13:       edit: "Edit",
 14:       view: "View",
 15:       back: "Back",
 16:       next: "Next",
 17:       submit: "Submit",
 18:     },
 19:     status: {
 20:       loading: "Loading...",
 21:       success: "Success",
 22:       error: "Error",
 23:       pending: "Pending",
 24:       completed: "Completed",
 25:       confirmed: "Confirmed",
 26:       cancelled: "Cancelled",
 27:     },
 28:     validation: {
 29:       required: "This field is required",
 30:       invalidEmail: "Please enter a valid email address",
 31:       invalidPhone: "Please enter a valid phone number",
 32:       minLength: "Must be at least {{count}} characters",
 33:       maxLength: "Must be at most {{count}} characters",
 34:       passwordMatch: "Passwords do not match",
 35:       invalidInput: "Invalid input",
 36:     },
 37:   },
 38:   auth: {
 39:     login: {
 40:       title: "Login",
 41:       phoneNumber: "Phone number",
 42:       password: "Password",
 43:       loginButton: "Login",
 44:       loggingIn: "Logging in...",
 45:       noAccount: "Don't have an account? Sign Up",
 46:       customer: "Customer",
 47:       merchant: "Merchant",
 48:       forgotPassword: "Forgot Password?",
 49:     },
 50:     signup: {
 51:       title: "Sign Up",
 52:       name: "Full Name",
 53:       email: "Email Address",
 54:       phoneNumber: "Phone Number",
 55:       password: "Password",
 56:       confirmPassword: "Confirm Password",
 57:       signupButton: "Sign Up",
 58:       haveAccount: "Already have an account? Login",
 59:     },
 60:     validation: {
 61:       phoneRequired: "Phone number is required",
 62:       phoneDigitsOnly: "Phone number must contain only digits",
 63:       passwordRequired: "Password is required",
 64:       passwordMinLength: "Password must be at least 6 characters",
 65:       nameRequired: "Name is required",
 66:       emailRequired: "Email is required",
 67:     },
 68:     errors: {
 69:       invalidCredentials: "Invalid credentials",
 70:       networkError: "Network error, please try again",
 71:       unknownError: "An unknown error occurred",
 72:     },
 73:   },
 74:   restaurant: {
 75:     list: {
 76:       title: "Restaurants",
 77:       search: "Search restaurants...",
 78:       filter: "Filter",
 79:       sort: "Sort",
 80:       noResults: "No restaurants found",
 81:       open: "Open Now",
 82:       closed: "Closed",
 83:     },
 84:     detail: {
 85:       menu: "Menu",
 86:       reviews: "Reviews",
 87:       info: "Information",
 88:       photos: "Photos",
 89:       address: "Address",
 90:       hours: "Opening Hours",
 91:       phone: "Phone",
 92:       website: "Website",
 93:       reserve: "Make Reservation",
 94:       directions: "Get Directions",
 95:     },
 96:     filters: {
 97:       price: "Price",
 98:       cuisine: "Cuisine",
 99:       distance: "Distance",
100:       rating: "Rating",
101:       openNow: "Open Now",
102:     },
103:     menu: {
104:       starters: "Starters",
105:       mainCourse: "Main Course",
106:       desserts: "Desserts",
107:       drinks: "Drinks",
108:       specials: "Specials",
109:       popular: "Popular Items",
110:     },
111:     reviews: {
112:       write: "Write a Review",
113:       rating: "Rating",
114:       comment: "Comment",
115:       submit: "Submit Review",
116:       helpful: "Helpful",
117:       report: "Report",
118:     },
119:   },
120:   reservations: {
121:     new: {
122:       title: "New Reservation",
123:       date: "Date",
124:       time: "Time",
125:       party: "Party Size",
126:       notes: "Special Requests",
127:       confirm: "Confirm Reservation",
128:       termsAgree: "I agree to the booking terms and conditions",
129:     },
130:     list: {
131:       title: "My Reservations",
132:       upcoming: "Upcoming",
133:       past: "Past",
134:       cancelled: "Cancelled",
135:       noUpcoming: "No upcoming reservations",
136:       noPast: "No past reservations",
137:     },
138:     details: {
139:       title: "Reservation Details",
140:       restaurant: "Restaurant",
141:       date: "Date",
142:       time: "Time",
143:       party: "Party Size",
144:       status: "Status",
145:       notes: "Special Requests",
146:       cancel: "Cancel Reservation",
147:       modify: "Modify Reservation",
148:       directions: "Get Directions",
149:       contact: "Contact Restaurant",
150:     },
151:     status: {
152:       confirmed: "Confirmed",
153:       pending: "Pending",
154:       cancelled: "Cancelled",
155:       completed: "Completed",
156:       noShow: "No Show",
157:     },
158:     cancel: {
159:       title: "Cancel Reservation",
160:       confirm: "Are you sure you want to cancel this reservation?",
161:       reason: "Reason for cancellation",
162:       policy: "Cancellation Policy",
163:       submit: "Submit Cancellation",
164:     },
165:   },
166:   merchant: {
167:     dashboard: {
168:       title: "Dashboard",
169:       overview: "Overview",
170:       today: "Today",
171:       reservations: "Reservations",
172:       tables: "Tables",
173:       seating: "Seating View",
174:       revenue: "Revenue",
175:       customers: "Customers",
176:     },
177:     tables: {
178:       title: "Table Management",
179:       tableNumber: "Table Number",
180:       capacity: "Capacity",
181:       status: "Status",
182:       empty: "Empty",
183:       occupied: "Occupied",
184:       reserved: "Reserved",
185:       addTable: "Add Table",
186:       editTable: "Edit Table",
187:       deleteTable: "Delete Table",
188:     },
189:     reservations: {
190:       title: "Reservations",
191:       calendar: "Calendar View",
192:       list: "List View",
193:       grid: "Grid View",
194:       smart: "Smart View",
195:       mailbox: "Inbox",
196:       new: "New Reservation",
197:       noReservations: "No reservations found",
198:     },
199:     settings: {
200:       title: "Settings",
201:       profile: "Restaurant Profile",
202:       hours: "Business Hours",
203:       menu: "Menu Management",
204:       staff: "Staff Management",
205:       notifications: "Notifications",
206:       payment: "Payment Methods",
207:       seating: "Seating Layout",
208:       account: "Account Settings",
209:     },
210:   },
211:   settings: {
212:     title: "Settings",
213:     account: {
214:       title: "Account Settings",
215:       name: "Name",
216:       email: "Email",
217:       phone: "Phone Number",
218:       password: "Change Password",
219:       language: "Language",
220:       notifications: "Notifications",
221:       logout: "Logout",
222:     },
223:     appearance: {
224:       title: "Appearance",
225:       theme: "Theme",
226:       light: "Light",
227:       dark: "Dark",
228:       system: "System Default",
229:       fontSize: "Font Size",
230:     },
231:     notifications: {
232:       title: "Notifications",
233:       push: "Push Notifications",
234:       email: "Email Notifications",
235:       sms: "SMS Notifications",
236:       reservations: "Reservation Updates",
237:       promotions: "Promotions and Offers",
238:       system: "System Updates",
239:     },
240:     privacy: {
241:       title: "Privacy",
242:       dataUsage: "Data Usage",
243:       location: "Location Services",
244:       cookies: "Cookies",
245:       advertising: "Personalized Advertising",
246:     },
247:     help: {
248:       title: "Help & Support",
249:       faq: "FAQ",
250:       contact: "Contact Support",
251:       terms: "Terms of Service",
252:       privacy: "Privacy Policy",
253:       about: "About SeatMaster",
254:     },
255:   },
256: };

================
File: src/services/i18n/locales/ja/ja.js
================
  1: export default {
  2:   common: {
  3:     languages: {
  4:       en: "英語",
  5:       ja: "日本語",
  6:       zh: "中国語",
  7:     },
  8:     actions: {
  9:       save: "保存",
 10:       cancel: "キャンセル",
 11:       confirm: "確認",
 12:       delete: "削除",
 13:       edit: "編集",
 14:       view: "表示",
 15:       back: "戻る",
 16:       next: "次へ",
 17:       submit: "送信",
 18:     },
 19:     status: {
 20:       loading: "読み込み中...",
 21:       success: "成功",
 22:       error: "エラー",
 23:       pending: "保留中",
 24:       completed: "完了",
 25:       confirmed: "確認済み",
 26:       cancelled: "キャンセル済み",
 27:     },
 28:     validation: {
 29:       required: "このフィールドは必須です",
 30:       invalidEmail: "有効なメールアドレスを入力してください",
 31:       invalidPhone: "有効な電話番号を入力してください",
 32:       minLength: "{{count}}文字以上である必要があります",
 33:       maxLength: "{{count}}文字以下である必要があります",
 34:       passwordMatch: "パスワードが一致しません",
 35:       invalidInput: "無効な入力",
 36:     },
 37:   },
 38:   auth: {
 39:     login: {
 40:       title: "ログイン",
 41:       phoneNumber: "電話番号",
 42:       password: "パスワード",
 43:       loginButton: "ログイン",
 44:       loggingIn: "ログイン中...",
 45:       noAccount: "アカウントがありませんか？登録する",
 46:       customer: "お客様",
 47:       merchant: "店舗",
 48:       forgotPassword: "パスワードをお忘れですか？",
 49:     },
 50:     signup: {
 51:       title: "新規登録",
 52:       name: "氏名",
 53:       email: "メールアドレス",
 54:       phoneNumber: "電話番号",
 55:       password: "パスワード",
 56:       confirmPassword: "パスワード（確認）",
 57:       signupButton: "登録",
 58:       haveAccount: "すでにアカウントをお持ちですか？ログイン",
 59:     },
 60:     validation: {
 61:       phoneRequired: "電話番号が必要です",
 62:       phoneDigitsOnly: "電話番号は数字のみを含む必要があります",
 63:       passwordRequired: "パスワードが必要です",
 64:       passwordMinLength: "パスワードは6文字以上である必要があります",
 65:       nameRequired: "名前が必要です",
 66:       emailRequired: "メールアドレスが必要です",
 67:     },
 68:     errors: {
 69:       invalidCredentials: "無効な認証情報",
 70:       networkError: "ネットワークエラー、もう一度お試しください",
 71:       unknownError: "不明なエラーが発生しました",
 72:     },
 73:   },
 74:   restaurant: {
 75:     list: {
 76:       title: "レストラン",
 77:       search: "レストランを検索...",
 78:       filter: "フィルター",
 79:       sort: "並び替え",
 80:       noResults: "レストランが見つかりません",
 81:       open: "営業中",
 82:       closed: "閉店",
 83:     },
 84:     detail: {
 85:       menu: "メニュー",
 86:       reviews: "レビュー",
 87:       info: "情報",
 88:       photos: "写真",
 89:       address: "住所",
 90:       hours: "営業時間",
 91:       phone: "電話番号",
 92:       website: "ウェブサイト",
 93:       reserve: "予約する",
 94:       directions: "道順を見る",
 95:     },
 96:     filters: {
 97:       price: "価格",
 98:       cuisine: "料理ジャンル",
 99:       distance: "距離",
100:       rating: "評価",
101:       openNow: "営業中",
102:     },
103:     menu: {
104:       starters: "前菜",
105:       mainCourse: "メインコース",
106:       desserts: "デザート",
107:       drinks: "ドリンク",
108:       specials: "おすすめ",
109:       popular: "人気商品",
110:     },
111:     reviews: {
112:       write: "レビューを書く",
113:       rating: "評価",
114:       comment: "コメント",
115:       submit: "レビューを送信",
116:       helpful: "役に立った",
117:       report: "報告する",
118:     },
119:   },
120:   reservations: {
121:     new: {
122:       title: "新規予約",
123:       date: "日付",
124:       time: "時間",
125:       party: "人数",
126:       notes: "特別リクエスト",
127:       confirm: "予約を確定",
128:       termsAgree: "予約規約に同意します",
129:     },
130:     list: {
131:       title: "予約一覧",
132:       upcoming: "今後の予約",
133:       past: "過去の予約",
134:       cancelled: "キャンセル済み",
135:       noUpcoming: "今後の予約はありません",
136:       noPast: "過去の予約はありません",
137:     },
138:     details: {
139:       title: "予約詳細",
140:       restaurant: "レストラン",
141:       date: "日付",
142:       time: "時間",
143:       party: "人数",
144:       status: "ステータス",
145:       notes: "特別リクエスト",
146:       cancel: "予約をキャンセル",
147:       modify: "予約を変更",
148:       directions: "道順を見る",
149:       contact: "レストランに連絡",
150:     },
151:     status: {
152:       confirmed: "確認済み",
153:       pending: "保留中",
154:       cancelled: "キャンセル済み",
155:       completed: "完了",
156:       noShow: "無断キャンセル",
157:     },
158:     cancel: {
159:       title: "予約のキャンセル",
160:       confirm: "この予約をキャンセルしてもよろしいですか？",
161:       reason: "キャンセルの理由",
162:       policy: "キャンセルポリシー",
163:       submit: "キャンセルを送信",
164:     },
165:   },
166:   merchant: {
167:     dashboard: {
168:       title: "ダッシュボード",
169:       overview: "概要",
170:       today: "今日",
171:       reservations: "予約",
172:       tables: "テーブル",
173:       seating: "座席表示",
174:       revenue: "売上",
175:       customers: "顧客",
176:     },
177:     tables: {
178:       title: "テーブル管理",
179:       tableNumber: "テーブル番号",
180:       capacity: "収容人数",
181:       status: "状態",
182:       empty: "空席",
183:       occupied: "使用中",
184:       reserved: "予約済み",
185:       addTable: "テーブルを追加",
186:       editTable: "テーブルを編集",
187:       deleteTable: "テーブルを削除",
188:     },
189:     reservations: {
190:       title: "予約",
191:       calendar: "カレンダー表示",
192:       list: "リスト表示",
193:       grid: "グリッド表示",
194:       smart: "スマート表示",
195:       mailbox: "受信箱",
196:       new: "新規予約",
197:       noReservations: "予約が見つかりません",
198:     },
199:     settings: {
200:       title: "設定",
201:       profile: "レストランプロフィール",
202:       hours: "営業時間",
203:       menu: "メニュー管理",
204:       staff: "スタッフ管理",
205:       notifications: "通知",
206:       payment: "支払い方法",
207:       seating: "座席レイアウト",
208:       account: "アカウント設定",
209:     },
210:   },
211:   settings: {
212:     title: "設定",
213:     account: {
214:       title: "アカウント設定",
215:       name: "名前",
216:       email: "メール",
217:       phone: "電話番号",
218:       password: "パスワード変更",
219:       language: "言語",
220:       notifications: "通知",
221:       logout: "ログアウト",
222:     },
223:     appearance: {
224:       title: "外観",
225:       theme: "テーマ",
226:       light: "ライト",
227:       dark: "ダーク",
228:       system: "システムデフォルト",
229:       fontSize: "フォントサイズ",
230:     },
231:     notifications: {
232:       title: "通知",
233:       push: "プッシュ通知",
234:       email: "メール通知",
235:       sms: "SMS通知",
236:       reservations: "予約アップデート",
237:       promotions: "プロモーションとオファー",
238:       system: "システムアップデート",
239:     },
240:     privacy: {
241:       title: "プライバシー",
242:       dataUsage: "データ使用",
243:       location: "位置情報サービス",
244:       cookies: "クッキー",
245:       advertising: "パーソナライズド広告",
246:     },
247:     help: {
248:       title: "ヘルプ＆サポート",
249:       faq: "よくある質問",
250:       contact: "サポートに連絡",
251:       terms: "利用規約",
252:       privacy: "プライバシーポリシー",
253:       about: "SeatMasterについて",
254:     },
255:   },
256: };

================
File: src/services/i18n/locales/zh/zh.js
================
  1: export default {
  2:   common: {
  3:     languages: {
  4:       en: "英文",
  5:       ja: "日文",
  6:       zh: "中文",
  7:     },
  8:     actions: {
  9:       save: "保存",
 10:       cancel: "取消",
 11:       confirm: "确认",
 12:       delete: "删除",
 13:       edit: "编辑",
 14:       view: "查看",
 15:       back: "返回",
 16:       next: "下一步",
 17:       submit: "提交",
 18:     },
 19:     status: {
 20:       loading: "加载中...",
 21:       success: "成功",
 22:       error: "错误",
 23:       pending: "待处理",
 24:       completed: "已完成",
 25:       confirmed: "已确认",
 26:       cancelled: "已取消",
 27:     },
 28:     validation: {
 29:       required: "此字段为必填项",
 30:       invalidEmail: "请输入有效的电子邮件地址",
 31:       invalidPhone: "请输入有效的电话号码",
 32:       minLength: "必须至少有{{count}}个字符",
 33:       maxLength: "必须最多有{{count}}个字符",
 34:       passwordMatch: "密码不匹配",
 35:       invalidInput: "无效输入",
 36:     },
 37:   },
 38:   auth: {
 39:     login: {
 40:       title: "登录",
 41:       phoneNumber: "电话号码",
 42:       password: "密码",
 43:       loginButton: "登录",
 44:       loggingIn: "正在登录...",
 45:       noAccount: "没有账户？注册",
 46:       customer: "顾客",
 47:       merchant: "商家",
 48:       forgotPassword: "忘记密码？",
 49:     },
 50:     signup: {
 51:       title: "注册",
 52:       name: "姓名",
 53:       email: "电子邮件",
 54:       phoneNumber: "电话号码",
 55:       password: "密码",
 56:       confirmPassword: "确认密码",
 57:       signupButton: "注册",
 58:       haveAccount: "已有账户？登录",
 59:     },
 60:     validation: {
 61:       phoneRequired: "电话号码为必填项",
 62:       phoneDigitsOnly: "电话号码只能包含数字",
 63:       passwordRequired: "密码为必填项",
 64:       passwordMinLength: "密码必须至少6个字符",
 65:       nameRequired: "姓名为必填项",
 66:       emailRequired: "电子邮件为必填项",
 67:     },
 68:     errors: {
 69:       invalidCredentials: "无效的凭据",
 70:       networkError: "网络错误，请重试",
 71:       unknownError: "发生未知错误",
 72:     },
 73:   },
 74:   restaurant: {
 75:     list: {
 76:       title: "餐厅",
 77:       search: "搜索餐厅...",
 78:       filter: "筛选",
 79:       sort: "排序",
 80:       noResults: "未找到餐厅",
 81:       open: "营业中",
 82:       closed: "已关闭",
 83:     },
 84:     detail: {
 85:       menu: "菜单",
 86:       reviews: "评价",
 87:       info: "信息",
 88:       photos: "照片",
 89:       address: "地址",
 90:       hours: "营业时间",
 91:       phone: "电话",
 92:       website: "网站",
 93:       reserve: "预订",
 94:       directions: "获取路线",
 95:     },
 96:     filters: {
 97:       price: "价格",
 98:       cuisine: "菜系",
 99:       distance: "距离",
100:       rating: "评分",
101:       openNow: "营业中",
102:     },
103:     menu: {
104:       starters: "前菜",
105:       mainCourse: "主菜",
106:       desserts: "甜点",
107:       drinks: "饮品",
108:       specials: "特色菜",
109:       popular: "热门菜品",
110:     },
111:     reviews: {
112:       write: "写评价",
113:       rating: "评分",
114:       comment: "评论",
115:       submit: "提交评价",
116:       helpful: "有帮助",
117:       report: "举报",
118:     },
119:   },
120:   reservations: {
121:     new: {
122:       title: "新预订",
123:       date: "日期",
124:       time: "时间",
125:       party: "人数",
126:       notes: "特殊要求",
127:       confirm: "确认预订",
128:       termsAgree: "我同意预订条款和条件",
129:     },
130:     list: {
131:       title: "我的预订",
132:       upcoming: "即将到来",
133:       past: "过去的",
134:       cancelled: "已取消",
135:       noUpcoming: "没有即将到来的预订",
136:       noPast: "没有过去的预订",
137:     },
138:     details: {
139:       title: "预订详情",
140:       restaurant: "餐厅",
141:       date: "日期",
142:       time: "时间",
143:       party: "人数",
144:       status: "状态",
145:       notes: "特殊要求",
146:       cancel: "取消预订",
147:       modify: "修改预订",
148:       directions: "获取路线",
149:       contact: "联系餐厅",
150:     },
151:     status: {
152:       confirmed: "已确认",
153:       pending: "待确认",
154:       cancelled: "已取消",
155:       completed: "已完成",
156:       noShow: "未到场",
157:     },
158:     cancel: {
159:       title: "取消预订",
160:       confirm: "您确定要取消此预订吗？",
161:       reason: "取消原因",
162:       policy: "取消政策",
163:       submit: "提交取消",
164:     },
165:   },
166:   merchant: {
167:     dashboard: {
168:       title: "仪表板",
169:       overview: "概览",
170:       today: "今天",
171:       reservations: "预订",
172:       tables: "餐桌",
173:       seating: "座位视图",
174:       revenue: "收入",
175:       customers: "顾客",
176:     },
177:     tables: {
178:       title: "餐桌管理",
179:       tableNumber: "餐桌号",
180:       capacity: "容量",
181:       status: "状态",
182:       empty: "空闲",
183:       occupied: "已占用",
184:       reserved: "已预订",
185:       addTable: "添加餐桌",
186:       editTable: "编辑餐桌",
187:       deleteTable: "删除餐桌",
188:     },
189:     reservations: {
190:       title: "预订",
191:       calendar: "日历视图",
192:       list: "列表视图",
193:       grid: "网格视图",
194:       smart: "智能视图",
195:       mailbox: "收件箱",
196:       new: "新预订",
197:       noReservations: "未找到预订",
198:     },
199:     settings: {
200:       title: "设置",
201:       profile: "餐厅档案",
202:       hours: "营业时间",
203:       menu: "菜单管理",
204:       staff: "员工管理",
205:       notifications: "通知",
206:       payment: "支付方式",
207:       seating: "座位布局",
208:       account: "账户设置",
209:     },
210:   },
211:   settings: {
212:     title: "设置",
213:     account: {
214:       title: "账户设置",
215:       name: "姓名",
216:       email: "电子邮件",
217:       phone: "电话号码",
218:       password: "更改密码",
219:       language: "语言",
220:       notifications: "通知",
221:       logout: "退出登录",
222:     },
223:     appearance: {
224:       title: "外观",
225:       theme: "主题",
226:       light: "浅色",
227:       dark: "深色",
228:       system: "系统默认",
229:       fontSize: "字体大小",
230:     },
231:     notifications: {
232:       title: "通知",
233:       push: "推送通知",
234:       email: "电子邮件通知",
235:       sms: "短信通知",
236:       reservations: "预订更新",
237:       promotions: "促销和优惠",
238:       system: "系统更新",
239:     },
240:     privacy: {
241:       title: "隐私",
242:       dataUsage: "数据使用",
243:       location: "位置服务",
244:       cookies: "cookies",
245:       advertising: "个性化广告",
246:     },
247:     help: {
248:       title: "帮助与支持",
249:       faq: "常见问题",
250:       contact: "联系支持",
251:       terms: "服务条款",
252:       privacy: "隐私政策",
253:       about: "关于SeatMaster",
254:     },
255:   },
256: };

================
File: src/services/i18n/index.js
================
 1: import i18n from "i18next";
 2: import { initReactI18next } from "react-i18next";
 3: import intervalPlural from "i18next-intervalplural-postprocessor";
 4: import * as RNLocalize from "react-native-localize";
 5: 
 6: 
 7: import en from "./locales/en/en";
 8: import ja from "./locales/ja/ja";
 9: import zh from "./locales/zh/zh";
10: const resources = {
11:   en: {
12:     common: en.common,
13:     auth: en.auth,
14:     restaurant: en.restaurant,
15: 
16:   },
17:   ja: {
18:     common: ja.common,
19:     auth: ja.auth,
20:     restaurant: ja.restaurant,
21: 
22:   },
23:   zh: {
24:     common: zh.common,
25:     auth: zh.auth,
26:     restaurant: zh.restaurant,
27: 
28:   },
29: };
30: 
31: const deviceLanguage = RNLocalize.getLocales()[0].languageCode;
32: const supportedLanguages = ["en", "ja", "zh"];
33: 
34: 
35: i18n
36:   .use(initReactI18next)
37:   .use(intervalPlural)
38:   .init({
39:     resources,
40:     lng: supportedLanguages.includes(deviceLanguage) ? deviceLanguage : "en",
41:     fallbackLng: "en",
42:     ns: ["common", "auth", "restaurant", "reservations", "settings"],
43:     defaultNS: "common",
44:     interpolation: {
45:       escapeValue: false,
46:     },
47:   });
48: 
49: export default i18n;

================
File: src/services/AuthenticationContext.js
================
 1: import React, { useState, createContext, useContext } from "react";
 2: 
 3: export const AuthenticationContext = createContext();
 4: 
 5: export const AuthenticationContextProvider = ({ children }) => {
 6:   const [user, setUser] = useState(null);
 7:   const [isLoading, setIsLoading] = useState(false);
 8:   const [error, setError] = useState(null);
 9: 
10: 
11:   const onLogin = async (username, password, role) => {
12:     setIsLoading(true);
13:     setError(null);
14: 
15: 
16:     setTimeout(() => {
17: 
18:       if (username === "+1123" && password === "123123") {
19:         setUser({ username, role });
20:       } else {
21:         setError("Invalid credentials");
22:       }
23:       setIsLoading(false);
24:     }, 1000);
25:   };
26: 
27: 
28:   const onRegister = async (username, password, repeatedPassword, role) => {
29:     setIsLoading(true);
30:     setError(null);
31: 
32:     if (password !== repeatedPassword) {
33:       setError("Passwords do not match");
34:       setIsLoading(false);
35:       return;
36:     }
37: 
38: 
39:     setTimeout(() => {
40: 
41:       setUser({ username, role });
42:       setIsLoading(false);
43:     }, 1000);
44:   };
45: 
46:   const onLogout = () => {
47:     setUser(null);
48:   };
49: 
50:   return (
51:     <AuthenticationContext.Provider
52:       value={{
53:         user,
54:         isAuthenticated: !!user,
55:         isLoading,
56:         error,
57:         onLogin,
58:         onRegister,
59:         onLogout,
60:       }}
61:     >
62:       {children}
63:     </AuthenticationContext.Provider>
64:   );
65: };
66: 
67: 
68: export const useAuthentication = () => useContext(AuthenticationContext);

================
File: src/services/LanguageContext.js
================
 1: import React, { createContext, useState, useContext, useEffect } from "react";
 2: import AsyncStorage from "@react-native-async-storage/async-storage";
 3: import { useTranslation } from "react-i18next";
 4: 
 5: export const LanguageContext = createContext();
 6: 
 7: export const LanguageContextProvider = ({ children }) => {
 8:   const { i18n } = useTranslation();
 9:   const [currentLanguage, setCurrentLanguage] = useState(i18n.language);
10:   const [isLoading, setIsLoading] = useState(true);
11: 
12: 
13:   useEffect(() => {
14:     loadSavedLanguage();
15:   }, []);
16: 
17:   const loadSavedLanguage = async () => {
18:     try {
19:       const savedLanguage = await AsyncStorage.getItem("userLanguage");
20:       if (savedLanguage) {
21:         setCurrentLanguage(savedLanguage);
22:       }
23:     } catch (error) {
24:       console.error("Failed to load language preference:", error);
25:     } finally {
26:       setIsLoading(false);
27:     }
28:   };
29: 
30:   const changeLanguage = async (languageCode) => {
31:     try {
32:       setCurrentLanguage(languageCode);
33:       await i18n.changeLanguage(languageCode);
34:       await AsyncStorage.setItem("userLanguage", languageCode);
35:     } catch (error) {
36:       console.error("Failed to save language preference:", error);
37:     }
38:   };
39: 
40:   return (
41:     <LanguageContext.Provider
42:       value={{
43:         currentLanguage,
44:         changeLanguage,
45:         isLoading,
46:       }}
47:     >
48:       {children}
49:     </LanguageContext.Provider>
50:   );
51: };
52: 
53: export const useLanguage = () => useContext(LanguageContext);

================
File: .cursorignore
================
1: # Add directories or file patterns to ignore during indexing (e.g. foo/ or *.csv)
2: assets/
3: android/
4: node_modules/

================
File: .gitignore
================
 1: # Learn more https://docs.github.com/en/get-started/getting-started-with-git/ignoring-files
 2: 
 3: .vscode
 4: 
 5: # dependencies
 6: node_modules/
 7: 
 8: # Expo
 9: .expo/
10: dist/
11: web-build/
12: ios/
13: android/
14: 
15: # Native
16: *.orig.*
17: *.jks
18: *.p8
19: *.p12
20: *.key
21: *.mobileprovision
22: 
23: # Metro
24: .metro-health-check*
25: 
26: # debug
27: npm-debug.*
28: yarn-debug.*
29: yarn-error.*
30: 
31: # macOS
32: .DS_Store
33: *.pem
34: 
35: # local env files
36: .env*.local
37: 
38: # typescript
39: *.tsbuildinfo
40: 
41: # @generated expo-cli sync-2b81b286409207a5da26e14c78851eb30d8ccbdb
42: # The following patterns were generated by expo-cli
43: 
44: expo-env.d.ts
45: # @end expo-cli

================
File: App.js
================
 1: import { theme } from "./src/infrastructure/theme";
 2: import { ThemeProvider } from "styled-components/native";
 3: import { AuthenticationContextProvider } from "./src/services/AuthenticationContext";
 4: import { LanguageContextProvider } from "./src/services/LanguageContext";
 5: import { Navigation } from "./src/infrastructure/navigation";
 6: import { StatusBar as ExpoStatusBar } from "expo-status-bar";
 7: import "./src/services/i18n";
 8: import Constants from "expo-constants";
 9: 
10: export default function App() {
11:   return (
12:     <>
13:       <LanguageContextProvider>
14:         <AuthenticationContextProvider>
15:           <ThemeProvider theme={theme}>
16:             <Navigation />
17:           </ThemeProvider>
18:         </AuthenticationContextProvider>
19:       </LanguageContextProvider>
20:       <ExpoStatusBar style="auto" />
21:     </>
22:   );
23: }

================
File: app.json
================
 1: {
 2:   "expo": {
 3:     "name": "seat-master-js",
 4:     "slug": "seat-master-js",
 5:     "version": "1.0.0",
 6:     "assetBundlePatterns": [
 7:       "**/*"
 8:     ],
 9:     "orientation": "portrait",
10:     "icon": "./assets/images/icon.png",
11:     "scheme": "myapp",
12:     "userInterfaceStyle": "automatic",
13:     "splash": {
14:       "image": "./assets/images/splash.png",
15:       "resizeMode": "contain",
16:       "backgroundColor": "#ffffff"
17:     },
18:     "ios": {
19:       "supportsTablet": true,
20:       "bundleIdentifier": "com.vickerszhu.seatmasterjs"
21:     },
22:     "android": {
23:       "adaptiveIcon": {
24:         "foregroundImage": "./assets/images/adaptive-icon.png",
25:         "backgroundColor": "#ffffff"
26:       },
27:       "package": "com.vickerszhu.seatmasterjs"
28:     },
29:     "web": {
30:       "bundler": "metro",
31:       "output": "static",
32:       "favicon": "./assets/images/favicon.png"
33:     },
34:     "plugins": [
35:       "expo-router"
36:     ],
37:     "experiments": {
38:       "typedRoutes": true
39:     },
40:     "extra": {
41:       "router": {
42:         "origin": false
43:       },
44:       "eas": {
45:         "projectId": "c6d8ffc4-9bc2-4f22-a564-ff0301c850a4"
46:       }
47:     }
48:   }
49: }

================
File: babel.config.js
================
1: module.exports = function (api) {
2:   api.cache(true);
3:   return {
4:     presets: ['babel-preset-expo']
5:   };
6: };

================
File: eas.json
================
 1: {
 2:   "build": {
 3:     "development": {
 4:       "developmentClient": true,
 5:       "distribution": "internal"
 6:     },
 7:     "preview": {
 8:       "distribution": "internal"
 9:     },
10:     "production": {}
11:   }
12: }

================
File: metro.config.js
================
1: const { getDefaultConfig } = require('expo/metro-config');
2: 
3: const defaultConfig = getDefaultConfig(__dirname);
4: 
5: defaultConfig.resolver.assetExts.push('glb', 'gltf');
6: 
7: module.exports = defaultConfig;

================
File: package.json
================
 1: {
 2:   "name": "seat-master-js",
 3:   "main": "node_modules/expo/AppEntry.js",
 4:   "version": "1.0.0",
 5:   "scripts": {
 6:     "start": "expo start",
 7:     "android": "expo run:android",
 8:     "ios": "expo run:ios",
 9:     "web": "expo start --web",
10:     "test": "jest --watchAll"
11:   },
12:   "jest": {
13:     "preset": "jest-expo"
14:   },
15:   "dependencies": {
16:     "@expo/vector-icons": "^14.0.2",
17:     "@react-native-async-storage/async-storage": "^2.1.2",
18:     "@react-navigation/native": "^6.1.18",
19:     "@react-navigation/stack": "^6.4.1",
20:     "expo": "~51.0.22",
21:     "expo-asset": "^10.0.10",
22:     "expo-dev-client": "^4.0.22",
23:     "expo-file-system": "^17.0.1",
24:     "expo-font": "~12.0.9",
25:     "expo-gl": "^14.0.2",
26:     "expo-linear-gradient": "~13.0.2",
27:     "expo-linking": "~6.3.1",
28:     "expo-router": "~3.5.18",
29:     "expo-splash-screen": "~0.27.5",
30:     "expo-status-bar": "~1.12.1",
31:     "expo-system-ui": "~3.0.7",
32:     "expo-web-browser": "~13.0.3",
33:     "firebase": "^11.1.0",
34:     "formik": "^2.4.6",
35:     "i18next": "^24.2.3",
36:     "i18next-intervalplural-postprocessor": "^3.0.0",
37:     "react": "18.2.0",
38:     "react-dom": "18.2.0",
39:     "react-i18next": "^15.4.1",
40:     "react-native": "^0.74.5",
41:     "react-native-asset": "^2.1.1",
42:     "react-native-collapsible-tab-view": "^8.0.0",
43:     "react-native-dropdown-picker": "^5.4.6",
44:     "react-native-fs": "^2.20.0",
45:     "react-native-gesture-handler": "^2.20.0",
46:     "react-native-localize": "^3.4.1",
47:     "react-native-pager-view": "6.3.0",
48:     "react-native-paper": "^5.12.3",
49:     "react-native-reanimated": "~3.10.1",
50:     "react-native-safe-area-context": "4.10.5",
51:     "react-native-static-server": "^0.5.0",
52:     "react-native-svg": "15.2.0",
53:     "react-native-tab-view": "^3.5.2",
54:     "react-native-web": "~0.19.10",
55:     "react-native-webview": "13.8.6",
56:     "react-native-webview-autoheight": "^1.0.6",
57:     "react-promise-suspense": "^0.3.4",
58:     "styled-components": "^6.1.12",
59:     "yup": "^1.5.0"
60:   },
61:   "devDependencies": {
62:     "@babel/core": "^7.20.0",
63:     "@types/react": "~18.2.45",
64:     "@types/react-native": "^0.73.0",
65:     "depcheck": "^1.4.7",
66:     "jest": "^29.2.1",
67:     "jest-expo": "~51.0.3",
68:     "react-test-renderer": "18.2.0",
69:     "typescript": "~5.3.3"
70:   },
71:   "private": true
72: }

================
File: repomix.config.json
================
 1: {
 2:   "include": ["src/**/*", "*.*"],
 3:   "ignore": {
 4:     "customPatterns": ["**/*.log", "node_modules/**/*"]
 5:   },
 6:   "output": {
 7:     "style": "plain",
 8:     "filePath": "repomix-output.txt",
 9:     "removeComments": true,
10:     "showLineNumbers": true,
11:     "topFilesLength": 10
12:   }
13: }

================
File: tsconfig.json
================
 1: {
 2:   "extends": "expo/tsconfig.base",
 3:   "compilerOptions": {
 4:     "jsx": "react-jsx",
 5:     "strict": true,
 6:     "paths": {
 7:       "@/*": [
 8:         "./*"
 9:       ]
10:     }
11:   },
12:   "include": [
13:     "**/*.ts",
14:     "**/*.tsx",
15:     ".expo/types/**/*.ts",
16:     "expo-env.d.ts"
17:   ]
18: }



================================================================
End of Codebase
================================================================
